(function(){"use strict";function n(){e.add("directionality",function(n){wn(n),Nn(n)})}var t,r,o,e=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),u=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},i=function(n){return function(t){return u(t)===n}},c=function(n){return function(t){return typeof t===n}},f=i("string"),l=c("boolean"),a=function(n){return null==n},m=function(n){return!a(n)},d=c("function"),s=c("number"),g=function(){},v=function(n,t){return function(r){return n(t(r))}},h=function(n){return function(){return n}},p=function(n){return n},y=h(!1),w=h(!0),D=function(){return N},N=(t=function(n){return n()},r=p,o={fold:function(n,t){return n()},isSome:y,isNone:w,getOr:r,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:r,orThunk:t,map:D,each:g,bind:D,exists:y,forall:w,filter:function(){return D()},toArray:function(){return[]},toString:h("none()")},o),T=function(n){var t=h(n),r=function(){return e},o=function(t){return t(n)},e={fold:function(t,r){return r(n)},isSome:w,isNone:y,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:r,orThunk:r,map:function(t){return T(t(n))},each:function(t){t(n)},bind:o,exists:o,forall:o,filter:function(t){return t(n)?e:N},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return e},S=function(n){return null==n?N:T(n)},b={some:T,none:D,from:S},O=function(n,t){for(var r=n.length,o=new Array(r),e=0;e<r;e++){var u=n[e];o[e]=t(u,e)}return o},A=function(n,t){for(var r=0,o=n.length;r<o;r++){var e=n[r];t(e,r)}},C=function(n,t){for(var r=[],o=0,e=n.length;o<e;o++){var u=n[o];t(u,o)&&r.push(u)}return r},k=9,E=11,L=1,M=3,P=function(n,t){var r=t||document,o=r.createElement("div");if(o.innerHTML=n,!o.hasChildNodes()||o.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return B(o.childNodes[0])},R=function(n,t){var r=t||document,o=r.createElement(n);return B(o)},x=function(n,t){var r=t||document,o=r.createTextNode(n);return B(o)},B=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},H=function(n,t,r){return b.from(n.dom.elementFromPoint(t,r)).map(B)},V={fromHtml:P,fromTag:R,fromText:x,fromDom:B,fromPoint:H},j=function(n,t){var r=n.dom;if(r.nodeType!==L)return!1;var o=r;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var z=function(n){var t=n.dom.nodeName;return t.toLowerCase()},F=function(n){return n.dom.nodeType},U=function(n){return function(t){return F(t)===n}},I=U(L),K=U(M),q=U(k),G=U(E),J=function(n){return function(t){return I(t)&&z(t)===n}},Q=function(n){return V.fromDom(n.dom.ownerDocument)},W=function(n){return q(n)?n:Q(n)},X=function(n){return b.from(n.dom.parentNode).map(V.fromDom)},Y=function(n){return O(n.dom.childNodes,V.fromDom)},Z=function(n,t,r){if(!(f(r)||l(r)||s(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,r+"")},$=function(n,t,r){Z(n.dom,t,r)},_=function(n,t){n.dom.removeAttribute(t)},nn=function(n){return G(n)&&m(n.dom.host)},tn=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),rn=tn?function(n){return V.fromDom(n.dom.getRootNode())}:W,on=function(n){var t=rn(n);return nn(t)?b.some(t):b.none()},en=function(n){return V.fromDom(n.dom.host)},un=function(n){var t=K(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var r=t.ownerDocument;return on(V.fromDom(t)).fold(function(){return r.body.contains(t)},v(un,en))},cn=function(n,t,r){for(var o=n.dom,e=d(r)?r:y;o.parentNode;){o=o.parentNode;var u=V.fromDom(o);if(t(u))return b.some(u);if(e(u))break}return b.none()},fn=function(n,t,r){return cn(n,function(n){return j(n,t)},r)},ln=function(n){return void 0!==n.style&&d(n.style.getPropertyValue)},an=function(n,t){var r=n.dom,o=window.getComputedStyle(r),e=o.getPropertyValue(t);return""!==e||un(n)?e:mn(r,t)},mn=function(n,t){return ln(n)?n.style.getPropertyValue(t):""},dn=function(n){return"rtl"===an(n,"direction")?"rtl":"ltr"},sn=function(n,t){return C(Y(n),t)},gn=function(n,t){return sn(n,function(n){return j(n,t)})},vn=function(n){return X(n).filter(I)},hn=function(n,t){var r=t?fn(n,"ol,ul"):b.some(n);return r.getOr(n)},pn=J("li"),yn=function(n,t){var r=n.selection.getSelectedBlocks();r.length>0&&(A(r,function(n){var r=V.fromDom(n),o=pn(r),e=hn(r,o),u=vn(e);u.each(function(n){var r=dn(n);if(r!==t?$(e,"dir",t):dn(e)!==t&&_(e,"dir"),o){var u=gn(e,"li[dir]");A(u,function(n){return _(n,"dir")})}})}),n.nodeChanged())},wn=function(n){n.addCommand("mceDirectionLTR",function(){yn(n,"ltr")}),n.addCommand("mceDirectionRTL",function(){yn(n,"rtl")})},Dn=function(n,t){return function(r){var o=function(n){var o=V.fromDom(n.element);r.setActive(dn(o)===t)};return n.on("NodeChange",o),function(){return n.off("NodeChange",o)}}},Nn=function(n){n.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return n.execCommand("mceDirectionLTR")},onSetup:Dn(n,"ltr")}),n.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return n.execCommand("mceDirectionRTL")},onSetup:Dn(n,"rtl")})};n()})();