(function(){"use strict";function n(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}function t(n,t,e){if(e||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}function e(n,t,e,r,o){return n(e,r)?L.some(e):C(o)&&o(e)?L.none():t(e,r,o)}function r(){var n=function(n){return Rt.fromDom(n.dom.cloneNode(!1))},t=function(n){return Oe(n).dom},e=function(n){return!!Ce(n)&&("body"===be(n)||H(tu,be(n)))},r=function(n){return!!Ce(n)&&H(["br","img","hr","input"],be(n))},o=function(n){return Ce(n)&&"false"===mr(n,"contenteditable")},u=function(n,t){return n.dom.compareDocumentPosition(t.dom)},i=function(n,t){var e=pr(n);fr(t,e)},c=function(n){var t=be(n);return H(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},a=function(n){return Ce(n)?dr(n,"lang"):L.none()};return{up:D({selector:or,closest:cr,predicate:nr,all:Be}),down:D({selector:Ze,predicate:Ye}),styles:D({get:Or,getRaw:kr,set:Rr,remove:Ir}),attrs:D({get:mr,set:lr,remove:gr,copyTo:i}),insert:D({before:_o,after:Wo,afterAll:qo,append:Fo,appendAll:Go,prepend:jo,wrap:Vo}),remove:D({unwrap:Xo,remove:Ko}),create:D({nu:Rt.fromTag,clone:n,text:Rt.fromText}),query:D({comparePosition:u,prevSibling:Ee,nextSibling:Me}),property:D({children:Pe,name:be,parent:ke,document:t,isText:Se,isComment:ye,isElement:Ce,isSpecial:c,getLanguage:a,getText:Qo,setText:nu,isBoundary:e,isEmptyTag:r,isNonEditable:o}),eq:It,is:Pt}}function o(n,t,e){var r=function(t,r,o){e.targets().each(function(e){var u=qr(r);u.each(function(u){var i=Zs(n),c=Qc(T,Rt.fromDom(n.getDoc()),i),a=TC(u,e,c);gs(n,t,r,o,a)})})},o=function(){return ps(n)},u=yC.byAttr(Da,r,o);return n.on("init",function(e){var r=n.getWin(),o=ra(n),i=ia(n),c=function(){var t=n.selection,e=Rt.fromDom(t.getStart()),r=Rt.fromDom(t.getEnd()),i=su(qr,[e,r]);i.fold(function(){return u.clear(o)},T)},a=mC(r,o,i,u),l=dC(r,o,i,u),f=gC(r,o,i,u),s=function(n){return!0===n.raw.shiftKey};n.on("TableSelectorChange",function(n){return f(n.start,n.finish)});var m=function(t,e){s(t)&&(e.kill&&t.kill(),e.selection.each(function(t){var e=ch.relative(t.start,t.finish),o=Sh(r,e);n.selection.setRng(o)}))},d=function(t){var e=mf(t);if(e.raw.shiftKey&&uC(e.raw.which)){var r=n.selection.getRng(),o=Rt.fromDom(r.startContainer),u=Rt.fromDom(r.endContainer);l.keyup(e,o,r.startOffset,u,r.endOffset).each(function(n){m(e,n)})}},g=function(e){var r=mf(e);t().each(function(n){return n.hideBars()});var o=n.selection.getRng(),u=Rt.fromDom(o.startContainer),i=Rt.fromDom(o.endContainer),c=ri(iC,cC)(Rt.fromDom(n.selection.getStart()));l.keydown(r,u,o.startOffset,i,o.endOffset,c).each(function(n){m(r,n)}),t().each(function(n){return n.showBars()})},p=function(n){return 0===n.button},v=function(n){return void 0===n.buttons||(!(!xC.browser.isEdge()||0!==n.buttons)||0!=(1&n.buttons))},b=function(n){a.clearstate()},h=function(n){p(n)&&RC(n)&&a.mousedown(mf(n))},w=function(n){v(n)&&RC(n)&&a.mouseover(mf(n))},y=function(n){p(n)&&RC(n)&&a.mouseup(mf(n))},C=function(){var n=Ov(Rt.fromDom(o)),t=Ov(0),e=function(e){var r=Rt.fromDom(e.target);if("td"===be(r)||"th"===be(r)){var o=n.get(),u=t.get();It(o,r)&&e.timeStamp-u<300&&(e.preventDefault(),f(r,r))}n.set(r),t.set(e.timeStamp)};return{touchEnd:e}},S=C();n.on("dragstart",b),n.on("mousedown",h),n.on("mouseover",w),n.on("mouseup",y),n.on("touchend",S.touchEnd),n.on("keyup",d),n.on("keydown",g),n.on("NodeChange",c)}),{clear:u.clear}}function u(){Iu.add("table",BC)}var i,c,a,l=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},f=function(n){return function(t){return l(t)===n}},s=function(n){return function(t){return typeof t===n}},m=function(n){return function(t){return n===t}},d=f("string"),g=f("object"),p=f("array"),v=m(null),b=s("boolean"),h=m(void 0),w=function(n){return null==n},y=function(n){return!w(n)},C=s("function"),S=s("number"),T=function(){},x=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},R=function(n,t){return function(e){return n(t(e))}},D=function(n){return function(){return n}},O=function(n){return n},A=function(n,t){return n===t},k=function(n){return function(t){return!n(t)}},I=function(n){return function(){throw new Error(n)}},B=D(!1),E=D(!0),M=function(){return P},P=(i=function(n){return n()},c=O,a={fold:function(n,t){return n()},isSome:B,isNone:E,getOr:c,getOrThunk:i,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:D(null),getOrUndefined:D(void 0),or:c,orThunk:i,map:M,each:T,bind:M,exists:B,forall:E,filter:function(){return M()},toArray:function(){return[]},toString:D("none()")},a),N=function(n){var t=D(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:E,isNone:B,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return N(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:P},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},z=function(n){return null==n?P:N(n)},L={some:N,none:M,from:z},_=Array.prototype.slice,W=Array.prototype.indexOf,j=Array.prototype.push,F=function(n,t){return W.call(n,t)},H=function(n,t){return F(n,t)>-1},V=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return!0}return!1},U=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},q=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},G=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},$=function(n,t){for(var e=n.length-1;e>=0;e--){var r=n[e];t(r,e)}},K=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o],c=t(i,o)?e:r;c.push(i)}return{pass:e,fail:r}},X=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},Y=function(n,t,e){return $(n,function(n,r){e=t(e,n,r)}),e},J=function(n,t,e){return G(n,function(n,r){e=t(e,n,r)}),e},Q=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return L.some(u);if(e(u,r))break}return L.none()},Z=function(n,t){return Q(n,t,B)},nn=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return L.some(e)}return L.none()},tn=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!p(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);j.apply(t,n[e])}return t},en=function(n,t){return tn(q(n,t))},rn=function(n,t){for(var e=0,r=n.length;e<r;++e){var o=n[e];if(!0!==t(o,e))return!1}return!0},on=function(n){var t=_.call(n,0);return t.reverse(),t},un=function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var u=n[r];e[String(u)]=t(u,r)}return e},cn=function(n){return[n]},an=function(n,t){var e=_.call(n,0);return e.sort(t),e},ln=function(n,t){return t>=0&&t<n.length?L.some(n[t]):L.none()},fn=function(n){return ln(n,0)},sn=function(n){return ln(n,n.length-1)},mn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return L.none()},dn=function(){return dn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},dn.apply(this,arguments)},gn=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},pn=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),a=o||!u&&i&&r("(min-device-width:768px)"),l=u||i&&!a,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),s=!l&&!a&&!f;return{isiPad:D(o),isiPhone:D(u),isTablet:D(a),isPhone:D(l),isTouch:D(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:D(f),isDesktop:D(s)}},vn=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},bn=function(n,t){var e=vn(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return yn(r(1),r(2))},hn=function(n,t){var e=String(t).toLowerCase();return 0===n.length?wn():bn(n,e)},wn=function(){return yn(0,0)},yn=function(n,t){return{major:n,minor:t}},Cn={nu:yn,detect:hn,unknown:wn},Sn=function(n,t){return mn(t.brands,function(t){var e=t.brand.toLowerCase();return Z(n,function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(n){return{current:n.name,version:Cn.nu(parseInt(t.version,10),0)}})})},Tn=function(n,t){var e=String(t).toLowerCase();return Z(n,function(n){return n.search(e)})},xn=function(n,t){return Tn(n,t).map(function(n){var e=Cn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Rn=function(n,t){return Tn(n,t).map(function(n){var e=Cn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Dn=function(n,t){return n.substring(t)},On=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},An=function(n,t){return In(n,t)?Dn(n,t.length):n},kn=function(n,t){return-1!==n.indexOf(t)},In=function(n,t){return On(n,t,0)},Bn=function(n,t){return On(n,t,n.length-t.length)},En=function(n){return function(t){return t.replace(n,"")}},Mn=En(/^\s+|\s+$/g),Pn=function(n){return n.length>0},Nn=function(n){return!Pn(n)},zn=function(n){var t=parseFloat(n);return isNaN(t)?L.none():L.some(t)},Ln=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_n=function(n){return function(t){return kn(t,n)}},Wn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return kn(n,"edge/")&&kn(n,"chrome")&&kn(n,"safari")&&kn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ln],search:function(n){return kn(n,"chrome")&&!kn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return kn(n,"msie")||kn(n,"trident")}},{name:"Opera",versionRegexes:[Ln,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_n("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_n("firefox")},{name:"Safari",versionRegexes:[Ln,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(kn(n,"safari")||kn(n,"mobile/"))&&kn(n,"applewebkit")}}],jn=[{name:"Windows",search:_n("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return kn(n,"iphone")||kn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_n("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:_n("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_n("linux"),versionRegexes:[]},{name:"Solaris",search:_n("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_n("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_n("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fn={browsers:D(Wn),oses:D(jn)},Hn="Edge",Vn="Chrome",Un="IE",qn="Opera",Gn="Firefox",$n="Safari",Kn=function(){return Xn({current:void 0,version:Cn.unknown()})},Xn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(Hn),isChrome:r(Vn),isIE:r(Un),isOpera:r(qn),isFirefox:r(Gn),isSafari:r($n)}},Yn={unknown:Kn,nu:Xn,edge:D(Hn),chrome:D(Vn),ie:D(Un),opera:D(qn),firefox:D(Gn),safari:D($n)},Jn="Windows",Qn="iOS",Zn="Android",nt="Linux",tt="OSX",et="Solaris",rt="FreeBSD",ot="ChromeOS",ut=function(){return it({current:void 0,version:Cn.unknown()})},it=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(Jn),isiOS:r(Qn),isAndroid:r(Zn),isOSX:r(tt),isLinux:r(nt),isSolaris:r(et),isFreeBSD:r(rt),isChromeOS:r(ot)}},ct={unknown:ut,nu:it,windows:D(Jn),ios:D(Qn),android:D(Zn),linux:D(nt),osx:D(tt),solaris:D(et),freebsd:D(rt),chromeos:D(ot)},at=function(n,t,e){var r=Fn.browsers(),o=Fn.oses(),u=t.bind(function(n){return Sn(r,n)}).orThunk(function(){return xn(r,n)}).fold(Yn.unknown,Yn.nu),i=Rn(o,n).fold(ct.unknown,ct.nu),c=pn(i,u,n,e);return{browser:u,os:i,deviceType:c}},lt={detect:at},ft=function(n){return window.matchMedia(n).matches},st=gn(function(){return lt.detect(navigator.userAgent,L.from(navigator.userAgentData),ft)}),mt=function(){return st()},dt=function(n,t,e){return 0!=(n.compareDocumentPosition(t)&e)},gt=function(n,t){return dt(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},pt=8,vt=9,bt=11,ht=1,wt=3,yt=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Tt(r.childNodes[0])},Ct=function(n,t){var e=t||document,r=e.createElement(n);return Tt(r)},St=function(n,t){var e=t||document,r=e.createTextNode(n);return Tt(r)},Tt=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},xt=function(n,t,e){return L.from(n.dom.elementFromPoint(t,e)).map(Tt)},Rt={fromHtml:yt,fromTag:Ct,fromText:St,fromDom:Tt,fromPoint:xt},Dt=function(n,t){var e=n.dom;if(e.nodeType!==ht)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ot=function(n){return n.nodeType!==ht&&n.nodeType!==vt&&n.nodeType!==bt||0===n.childElementCount},At=function(n,t){var e=void 0===t?document:t.dom;return Ot(e)?[]:q(e.querySelectorAll(n),Rt.fromDom)},kt=function(n,t){var e=void 0===t?document:t.dom;return Ot(e)?L.none():L.from(e.querySelector(n)).map(Rt.fromDom)},It=function(n,t){return n.dom===t.dom},Bt=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},Et=function(n,t){return gt(n.dom,t.dom)},Mt=function(n,t){return mt().browser.isIE()?Et(n,t):Bt(n,t)},Pt=Dt,Nt=Object.keys,zt=Object.hasOwnProperty,Lt=function(n,t){for(var e=Nt(n),r=0,o=e.length;r<o;r++){var u=e[r],i=n[u];t(i,u)}},_t=function(n,t){return Wt(n,function(n,e){return{k:e,v:t(n,e)}})},Wt=function(n,t){var e={};return Lt(n,function(n,r){var o=t(n,r);e[o.k]=o.v}),e},jt=function(n){return function(t,e){n[e]=t}},Ft=function(n,t,e,r){var o={};return Lt(n,function(n,o){(t(n,o)?e:r)(n,o)}),o},Ht=function(n,t){var e={};return Ft(n,t,jt(e),T),e},Vt=function(n,t){var e=[];return Lt(n,function(n,r){e.push(t(n,r))}),e},Ut=function(n){return Vt(n,O)},qt=function(n){return Nt(n).length},Gt=function(n,t){return $t(n,t)?L.from(n[t]):L.none()},$t=function(n,t){return zt.call(n,t)},Kt=function(n,t){return $t(n,t)&&void 0!==n[t]&&null!==n[t]},Xt=function(n){for(var t in n)if(zt.call(n,t))return!1;return!0},Yt=["tfoot","thead","tbody","colgroup"],Jt=function(n){return H(Yt,n)},Qt=function(n,t){return{rows:n,columns:t}},Zt=function(n,t){return{row:n,column:t}},ne=function(n,t,e){return{element:n,rowspan:t,colspan:e}},te=function(n,t,e,r){return{element:n,rowspan:t,colspan:e,isNew:r}},ee=function(n,t,e,r,o,u){return{element:n,rowspan:t,colspan:e,row:r,column:o,isLocked:u}},re=function(n,t,e){return{element:n,cells:t,section:e}},oe=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},ue=function(n,t,e){return{element:n,isNew:t,isLocked:e}},ie=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},ce=function(n,t,e,r){return{startRow:n,startCol:t,finishRow:e,finishCol:r}},ae=function(n,t,e){return{element:n,colspan:t,column:e}},le=function(n,t){return{element:n,columns:t}};"undefined"!=typeof window?window:Function("return this;")();var fe,se,me,de,ge,pe,ve,be=function(n){var t=n.dom.nodeName;return t.toLowerCase()},he=function(n){return n.dom.nodeType},we=function(n){return function(t){return he(t)===n}},ye=function(n){return he(n)===pt||"#comment"===be(n)},Ce=we(ht),Se=we(wt),Te=we(vt),xe=we(bt),Re=function(n){return function(t){return Ce(t)&&be(t)===n}},De=function(n){return Rt.fromDom(n.dom.ownerDocument)},Oe=function(n){return Te(n)?n:De(n)},Ae=function(n){return Rt.fromDom(Oe(n).dom.defaultView)},ke=function(n){return L.from(n.dom.parentNode).map(Rt.fromDom)},Ie=function(n){return L.from(n.dom.parentElement).map(Rt.fromDom)},Be=function(n,t){for(var e=C(t)?t:B,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=Rt.fromDom(u);if(o.push(i),!0===e(i))break;r=u}return o},Ee=function(n){return L.from(n.dom.previousSibling).map(Rt.fromDom)},Me=function(n){return L.from(n.dom.nextSibling).map(Rt.fromDom)},Pe=function(n){return q(n.dom.childNodes,Rt.fromDom)},Ne=function(n,t){var e=n.dom.childNodes;return L.from(e[t]).map(Rt.fromDom)},ze=function(n){return Ne(n,0)},Le=function(n){return xe(n)&&y(n.dom.host)},_e=C(Element.prototype.attachShadow)&&C(Node.prototype.getRootNode),We=D(_e),je=_e?function(n){return Rt.fromDom(n.dom.getRootNode())}:Oe,Fe=function(n){var t=je(n);return Le(t)?L.some(t):L.none()},He=function(n){return Rt.fromDom(n.dom.host)},Ve=function(n){if(We()&&y(n.target)){var t=Rt.fromDom(n.target);if(Ce(t)&&Ue(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return fn(e)}}return L.from(n.target)},Ue=function(n){return y(n.dom.shadowRoot)},qe=function(n){var t=Se(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var e=t.ownerDocument;return Fe(Rt.fromDom(t)).fold(function(){return e.body.contains(t)},R(qe,He))},Ge=function(){return $e(Rt.fromDom(document))},$e=function(n){var t=n.dom.body;if(null==t)throw new Error("Body is not available yet");return Rt.fromDom(t)},Ke=function(n,t,e){return X(Be(n,e),t)},Xe=function(n,t){return X(Pe(n),t)},Ye=function(n,t){var e=[];return G(Pe(n),function(n){t(n)&&(e=e.concat([n])),e=e.concat(Ye(n,t))}),e},Je=function(n,t,e){return Ke(n,function(n){return Dt(n,t)},e)},Qe=function(n,t){return Xe(n,function(n){return Dt(n,t)})},Ze=function(n,t){return At(t,n)},nr=function(n,t,e){for(var r=n.dom,o=C(e)?e:B;r.parentNode;){r=r.parentNode;var u=Rt.fromDom(r);if(t(u))return L.some(u);if(o(u))break}return L.none()},tr=function(n,t,r){var o=function(n,t){return t(n)};return e(o,nr,n,t,r)},er=function(n,t){var e=function(n){return t(Rt.fromDom(n))},r=Z(n.dom.childNodes,e);return r.map(Rt.fromDom)},rr=function(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=Rt.fromDom(n.childNodes[r]);if(t(o))return L.some(o);var u=e(n.childNodes[r]);if(u.isSome())return u}return L.none()};return e(n.dom)},or=function(n,t,e){return nr(n,function(n){return Dt(n,t)},e)},ur=function(n,t){return er(n,function(n){return Dt(n,t)})},ir=function(n,t){return kt(t,n)},cr=function(n,t,r){var o=function(n,t){return Dt(n,t)};return e(o,or,n,t,r)},ar=function(n,t,e){if(!(d(e)||b(e)||S(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},lr=function(n,t,e){ar(n.dom,t,e)},fr=function(n,t){var e=n.dom;Lt(t,function(n,t){ar(e,t,n)})},sr=function(n,t){Lt(t,function(t,e){t.fold(function(){gr(n,e)},function(t){ar(n.dom,e,t)})})},mr=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},dr=function(n,t){return L.from(mr(n,t))},gr=function(n,t){n.dom.removeAttribute(t)},pr=function(n){return J(n.dom.attributes,function(n,t){return n[t.name]=t.value,n},{})},vr=function(n,t,e){return void 0===e&&(e=A),n.exists(function(n){return e(n,t)})},br=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},hr=function(n,t,e){return n.isSome()&&t.isSome()?L.some(e(n.getOrDie(),t.getOrDie())):L.none()},wr=function(n,t){return null!=n?t(n):L.none()},yr=function(n){return n.bind(O)},Cr=function(n,t){return n?L.some(t):L.none()},Sr=function(n){return void 0!==n.style&&C(n.style.getPropertyValue)},Tr=function(n,t,e){if(!d(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);Sr(n)&&n.style.setProperty(t,e)},xr=function(n,t){Sr(n)&&n.style.removeProperty(t)},Rr=function(n,t,e){var r=n.dom;Tr(r,t,e)},Dr=function(n,t){var e=n.dom;Lt(t,function(n,t){Tr(e,t,n)})},Or=function(n,t){var e=n.dom,r=window.getComputedStyle(e),o=r.getPropertyValue(t);return""!==o||qe(n)?o:Ar(e,t)},Ar=function(n,t){return Sr(n)?n.style.getPropertyValue(t):""},kr=function(n,t){var e=n.dom,r=Ar(e,t);return L.from(r).filter(function(n){return n.length>0})},Ir=function(n,t){var e=n.dom;xr(e,t),vr(dr(n,"style").map(Mn),"")&&gr(n,"style")},Br=function(n,t){var e=n.dom,r=t.dom;Sr(e)&&Sr(r)&&(r.style.cssText=e.style.cssText)},Er=function(n,t,e){return void 0===e&&(e=0),dr(n,t).map(function(n){return parseInt(n,10)}).getOr(e)},Mr=function(n,t){return Er(n,t,1)},Pr=function(n){return Re("col")(n)?Er(n,"span",1)>1:Mr(n,"colspan")>1},Nr=function(n){return Mr(n,"rowspan")>1},zr=function(n,t){return parseInt(Or(n,t),10)},Lr=D(10),_r=D(10),Wr=function(n,t){return jr(n,t,E)},jr=function(n,t,e){return en(Pe(n),function(n){return Dt(n,t)?e(n)?[n]:[]:jr(n,t,e)})},Fr=function(n,t,e){if(void 0===e&&(e=B),e(t))return L.none();if(H(n,be(t)))return L.some(t);var r=function(n){return Dt(n,"table")||e(n)};return or(t,n.join(","),r)},Hr=function(n,t){return Fr(["td","th"],n,t)},Vr=function(n){return Wr(n,"th,td")},Ur=function(n){return Dt(n,"colgroup")?Qe(n,"col"):en($r(n),function(n){return Qe(n,"col")})},qr=function(n,t){return cr(n,"table",t)},Gr=function(n){return Wr(n,"tr")},$r=function(n){return qr(n).fold(D([]),function(n){return Qe(n,"colgroup")})},Kr=function(n,t){return q(n,function(n){if("colgroup"===be(n)){var e=q(Ur(n),function(n){var t=Er(n,"span",1);return ne(n,1,t)});return re(n,e,"colgroup")}e=q(Vr(n),function(n){var t=Er(n,"rowspan",1),e=Er(n,"colspan",1);return ne(n,t,e)});return re(n,e,t(n))})},Xr=function(n){return ke(n).map(function(n){var t=be(n);return Jt(t)?t:"tbody"}).getOr("tbody")},Yr=function(n){var e=Gr(n),r=$r(n),o=t(t([],r,!0),e,!0);return Kr(o,Xr)},Jr=function(n,t){return Kr(n,function(){return t})},Qr=function(n,t,e){var r=n.cells,o=r.slice(0,t),u=r.slice(t),i=o.concat(e).concat(u);return to(n,i)},Zr=function(n,t,e){return Qr(n,t,[e])},no=function(n,t,e){var r=n.cells;r[t]=e},to=function(n,t){return ie(n.element,t,n.section,n.isNew)},eo=function(n,t){var e=n.cells,r=q(e,t);return ie(n.element,r,n.section,n.isNew)},ro=function(n,t){return n.cells[t]},oo=function(n,t){return ro(n,t).element},uo=function(n){return n.cells.length},io=function(n){var t=K(n,function(n){return"colgroup"===n.section});return{rows:t.fail,cols:t.pass}},co=function(n,t,e){var r=q(n.cells,e);return ie(t(n.element),r,n.section,!0)},ao="data-snooker-locked-cols",lo=function(n){return dr(n,ao).bind(function(n){return L.from(n.match(/\d+/g))}).map(function(n){return un(n,E)})},fo=function(n){var t=J(io(n).rows,function(n,t){return G(t.cells,function(t,e){t.isLocked&&(n[e]=!0)}),n},{}),e=Vt(t,function(n,t){return parseInt(t,10)});return an(e)},so=function(n,t){return n+","+t},mo=function(n,t,e){return L.from(n.access[so(t,e)])},go=function(n,t,e){var r=po(n,function(n){return e(t,n.element)});return r.length>0?L.some(r[0]):L.none()},po=function(n,t){var e=en(n.all,function(n){return n.cells});return X(e,t)},vo=function(n){var t={},e=0;return G(n.cells,function(n){var r=n.colspan;U(r,function(o){var u=e+o;t[u]=ae(n.element,r,u)}),e+=r}),t},bo=function(n){var t={},e=[],r=fn(n).map(function(n){return n.element}).bind(qr),o=r.bind(lo).getOr({}),u=0,i=0,c=0,a=K(n,function(n){return"colgroup"===n.section}),l=a.pass,f=a.fail;G(f,function(n){var r=[];G(n.cells,function(n){for(var e=0;void 0!==t[so(c,e)];)e++;for(var u=Kt(o,e.toString()),a=ee(n.element,n.rowspan,n.colspan,c,e,u),l=0;l<n.colspan;l++)for(var f=0;f<n.rowspan;f++){var s=c+f,m=e+l,d=so(s,m);t[d]=a,i=Math.max(i,m+1)}r.push(a)}),u++,e.push(re(n.element,r,n.section)),c++});var s=sn(l).map(function(n){var t=vo(n),e=le(n.element,Ut(t));return{colgroups:[e],columns:t}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),m=s.columns,d=s.colgroups,g=Qt(u,i);return{grid:g,access:t,all:e,columns:m,colgroups:d}},ho=function(n){var t=Yr(n);return bo(t)},wo=function(n){return en(n.all,function(n){return n.cells})},yo=function(n){return Ut(n.columns)},Co=function(n){return Nt(n.columns).length>0},So=function(n,t){return L.from(n.columns[t])},To={fromTable:ho,generate:bo,getAt:mo,findItem:go,filterItems:po,justCells:wo,justColumns:yo,hasColumns:Co,getColumnAt:So},xo=function(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,u=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},Ro=function(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow},Do=function(t,e){for(var r=!0,o=n(Ro,e),u=e.startRow;u<=e.finishRow;u++)for(var i=e.startCol;i<=e.finishCol;i++)r=r&&To.getAt(t,u,i).exists(o);return r?L.some(e):L.none()},Oo=function(n,t){return ce(Math.min(n.row,t.row),Math.min(n.column,t.column),Math.max(n.row+n.rowspan-1,t.row+t.rowspan-1),Math.max(n.column+n.colspan-1,t.column+t.colspan-1))},Ao=function(n,t,e){var r=To.findItem(n,t,It),o=To.findItem(n,e,It);return r.bind(function(n){return o.map(function(t){return Oo(n,t)})})},ko=function(n,t,e){return Ao(n,t,e).bind(function(t){return Do(n,t)})},Io=function(n,t,e,r){return To.findItem(n,t,It).bind(function(t){var o=e>0?t.row+t.rowspan-1:t.row,u=r>0?t.column+t.colspan-1:t.column,i=To.getAt(n,o+e,u+r);return i.map(function(n){return n.element})})},Bo=function(t,e,r){return Ao(t,e,r).map(function(e){var r=To.filterItems(t,n(xo,e));return q(r,function(n){return n.element})})},Eo=function(n,t){var e=function(n,t){return Mt(t,n)};return To.findItem(n,t,e).map(function(n){return n.element})},Mo=function(n,t,e){return qr(n).bind(function(r){var o=Lo(r);return Io(o,n,t,e)})},Po=function(n,t,e){var r=Lo(n);return Bo(r,t,e)},No=function(n,t,e,r,o){var u=Lo(n),i=It(n,e)?L.some(t):Eo(u,t),c=It(n,o)?L.some(r):Eo(u,r);return i.bind(function(n){return c.bind(function(t){return Bo(u,n,t)})})},zo=function(n,t,e){var r=Lo(n);return ko(r,t,e)},Lo=To.fromTable,_o=function(n,t){var e=ke(n);e.each(function(e){e.dom.insertBefore(t.dom,n.dom)})},Wo=function(n,t){var e=Me(n);e.fold(function(){var e=ke(n);e.each(function(n){Fo(n,t)})},function(n){_o(n,t)})},jo=function(n,t){var e=ze(n);e.fold(function(){Fo(n,t)},function(e){n.dom.insertBefore(t.dom,e.dom)})},Fo=function(n,t){n.dom.appendChild(t.dom)},Ho=function(n,t,e){Ne(n,e).fold(function(){Fo(n,t)},function(n){_o(n,t)})},Vo=function(n,t){_o(n,t),Fo(t,n)},Uo=function(n,t){G(t,function(t){_o(n,t)})},qo=function(n,t){G(t,function(e,r){var o=0===r?n:t[r-1];Wo(o,e)})},Go=function(n,t){G(t,function(t){Fo(n,t)})},$o=function(n){n.dom.textContent="",G(Pe(n),function(n){Ko(n)})},Ko=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Xo=function(n){var t=Pe(n);t.length>0&&Uo(n,t),Ko(n)},Yo=function(n,t){var e=function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return r(e).getOr("")},r=function(t){return n(t)?L.from(t.dom.nodeValue):L.none()},o=function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r};return{get:e,getOption:r,set:o}},Jo=Yo(Se,"text"),Qo=function(n){return Jo.get(n)},Zo=function(n){return Jo.getOption(n)},nu=function(n,t){return Jo.set(n,t)},tu=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],eu=function(n,t,e,r){var o=e[0],u=e.slice(1);return r(n,t,o,u)},ru=function(n,t,e){return e.length>0?eu(n,t,e,ou):L.none()},ou=function(n,t,e,r){var o=t(n,e);return Y(r,function(e,r){var o=t(n,r);return uu(n,e,o)},o)},uu=function(t,e,r){return e.bind(function(e){return r.filter(n(t.eq,e))})},iu=function(t,e){return n(t.eq,e)},cu=function(n,t,e,r){void 0===r&&(r=B);var o=[t].concat(n.up().all(t)),u=[e].concat(n.up().all(e)),i=function(n){var t=nn(n,r);return t.fold(function(){return n},function(t){return n.slice(0,t+1)})},c=i(o),a=i(u),l=Z(c,function(t){return V(a,iu(n,t))});return{firstpath:c,secondpath:a,shared:l}},au=ru,lu=cu,fu=r(),su=function(n,t){return au(fu,function(t,e){return n(e)},t)},mu=function(n,t,e){return lu(fu,n,t,e)},du=function(n){return or(n,"table")},gu=function(n,t,e){var r=function(n){return function(t){return void 0!==e&&e(t)||It(t,n)}};return It(n,t)?L.some({boxes:L.some([n]),start:n,finish:t}):du(n).bind(function(o){return du(t).bind(function(u){if(It(o,u))return L.some({boxes:Po(o,n,t),start:n,finish:t});if(Mt(o,u)){var i=Je(t,"td,th",r(o)),c=i.length>0?i[i.length-1]:t;return L.some({boxes:No(o,n,o,t,u),start:n,finish:c})}if(Mt(u,o)){i=Je(n,"td,th",r(u));var a=i.length>0?i[i.length-1]:n;return L.some({boxes:No(u,n,o,t,u),start:n,finish:a})}return mu(n,t).shared.bind(function(i){return cr(i,"table",e).bind(function(e){var i=Je(t,"td,th",r(e)),c=i.length>0?i[i.length-1]:t,a=Je(n,"td,th",r(e)),l=a.length>0?a[a.length-1]:n;return L.some({boxes:No(e,n,o,t,u),start:l,finish:c})})})})})},pu=function(n,t){var e=Ze(n,t);return e.length>0?L.some(e):L.none()},vu=function(n,t){return Z(n,function(n){return Dt(n,t)})},bu=function(n,t,e){return ir(n,t).bind(function(t){return ir(n,e).bind(function(n){return su(du,[t,n]).map(function(e){return{first:t,last:n,table:e}})})})},hu=function(n,t){return or(n,"table").bind(function(e){return ir(e,t).bind(function(t){return gu(t,n).bind(function(n){return n.boxes.map(function(t){return{boxes:t,start:n.start,finish:n.finish}})})})})},wu=function(n,t,e,r,o){return vu(n,o).bind(function(n){return Mo(n,t,e).bind(function(n){return hu(n,r)})})},yu=function(n,t){return pu(n,t)},Cu=function(n,t,e){return bu(n,t,e).bind(function(t){var e=function(t){return It(n,t)},r="thead,tfoot,tbody,table",o=or(t.first,r,e),u=or(t.last,r,e);return o.bind(function(n){return u.bind(function(e){return It(n,e)?zo(t.table,t.first,t.last):L.none()})})})},Su=function(n){if(!p(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return G(n,function(r,o){var u=Nt(r);if(1!==u.length)throw new Error("one and only one name per case");var i=u[0],c=r[i];if(void 0!==e[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!p(c))throw new Error("case arguments must be an array");t.push(i),e[i]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var u=e.length;if(u!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+u);var a=function(n){var r=Nt(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));var o=rn(t,function(n){return H(r,n)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[i].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var u=t[o];return u.apply(null,e)},match:a,log:function(n){console.log(n,{constructors:t,constructor:i,params:e})}}}}),e},Tu={generate:Su},xu=Tu.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),Ru=function(n,t,e,r){return n.fold(t,e,r)},Du=xu.none,Ou=xu.multiple,Au=xu.single,ku=function(n,t,e){var r=function(){return yu(n(),e).fold(function(){return t().fold(Du,Au)},function(n){return Ou(n)})};return{get:r}
},Iu=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),Bu=function(n,t){return Rt.fromDom(n.dom.cloneNode(t))},Eu=function(n){return Bu(n,!1)},Mu=function(n){return Bu(n,!0)},Pu=function(n,t){var e=Rt.fromTag(t),r=pr(n);return fr(e,r),e},Nu=function(n,t){var e=Pu(n,t),r=Pe(Mu(n));return Go(e,r),e},zu=function(n,t){var e=Pu(n,t);_o(n,e);var r=Pe(n);return Go(e,r),Ko(n),e},Lu=function(n,t){var e=function(t,e){if(!S(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;Sr(r)&&(r.style[n]=e+"px")},r=function(e){var r=t(e);if(r<=0||null===r){var o=Or(e,n);return parseFloat(o)||0}return r},o=r,u=function(n,t){return J(t,function(t,e){var r=Or(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)},i=function(n,t,e){var r=u(n,e),o=t>r?t-r:0;return o};return{set:e,get:r,getOuter:o,aggregate:u,max:i}},_u=function(){var n=mt().browser;return n.isIE()||n.isEdge()},Wu=function(n,t){return zn(n).getOr(t)},ju=function(n,t,e){return Wu(Or(n,t),e)},Fu=function(n){return Or(n,"box-sizing")},Hu=function(n,t,e,r){var o=ju(n,"padding-"+e,0),u=ju(n,"padding-"+r,0),i=ju(n,"border-"+e+"-width",0),c=ju(n,"border-"+r+"-width",0);return t-o-u-i-c},Vu=function(n,t){var e=n.dom,r=e.getBoundingClientRect().height||e.offsetHeight;return"border-box"===t?r:Hu(n,r,"top","bottom")},Uu=function(n,t){var e=n.dom,r=e.getBoundingClientRect().width||e.offsetWidth;return"border-box"===t?r:Hu(n,r,"left","right")},qu=function(n){return _u()?Vu(n,Fu(n)):ju(n,"height",n.dom.offsetHeight)},Gu=function(n){return _u()?Uu(n,Fu(n)):ju(n,"width",n.dom.offsetWidth)},$u=function(n){return Uu(n,"content-box")},Ku=Lu("width",function(n){return n.dom.offsetWidth}),Xu=function(n){return Ku.get(n)},Yu=function(n){return Ku.getOuter(n)},Ju=$u,Qu=Gu,Zu=function(n,t){void 0===t&&(t=E);var e=n.grid,r=U(e.columns,O),o=U(e.rows,O);return q(r,function(e){var r=function(){return en(o,function(t){return To.getAt(n,t,e).filter(function(n){return n.column===e}).toArray()})},u=function(n){return 1===n.colspan&&t(n.element)},i=function(){return To.getAt(n,0,e)};return ni(r,u,i)})},ni=function(n,t,e){var r=n(),o=Z(r,t),u=o.orThunk(function(){return L.from(r[0]).orThunk(e)});return u.map(function(n){return n.element})},ti=function(n){var t=n.grid,e=U(t.rows,O),r=U(t.columns,O);return q(e,function(t){var e=function(){return en(r,function(e){return To.getAt(n,t,e).filter(function(n){return n.row===t}).fold(D([]),function(n){return[n]})})},o=function(n){return 1===n.rowspan},u=function(){return To.getAt(n,t,0)};return ni(e,o,u)})},ei=function(n,t){if(t<0||t>=n.length-1)return L.none();var e=n[t].fold(function(){var e=on(n.slice(0,t));return mn(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return L.some({value:n,delta:0})}),r=n[t+1].fold(function(){var e=n.slice(t+1);return mn(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return L.some({value:n,delta:1})});return e.bind(function(n){return r.map(function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e})})},ri=function(n,t){return function(e){return"rtl"===oi(e)?t:n}},oi=function(n){return"rtl"===Or(n,"direction")?"rtl":"ltr"},ui=Lu("height",function(n){var t=n.dom;return qe(n)?t.getBoundingClientRect().height:t.offsetHeight}),ii=function(n){return ui.get(n)},ci=function(n){return ui.getOuter(n)},ai=qu,li=function(n,t){var e=function(e,r){return li(n+e,t+r)};return{left:n,top:t,translate:e}},fi=li,si=function(n){var t=n.getBoundingClientRect();return fi(t.left,t.top)},mi=function(n,t){return void 0!==n?n:void 0!==t?t:0},di=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return fi(e.offsetLeft,e.offsetTop);var u=mi(null==r?void 0:r.pageYOffset,o.scrollTop),i=mi(null==r?void 0:r.pageXOffset,o.scrollLeft),c=mi(o.clientTop,e.clientTop),a=mi(o.clientLeft,e.clientLeft);return gi(n).translate(i-a,u-c)},gi=function(n){var t=n.dom,e=t.ownerDocument,r=e.body;return r===t?fi(r.offsetLeft,r.offsetTop):qe(n)?si(t):fi(0,0)},pi=function(n,t){return{row:n,y:t}},vi=function(n,t){return{col:n,x:t}},bi=function(n){var t=di(n);return t.left+Yu(n)},hi=function(n){return di(n).left},wi=function(n,t){return vi(n,hi(t))},yi=function(n,t){return vi(n,bi(t))},Ci=function(n){return di(n).top},Si=function(n,t){return pi(n,Ci(t))},Ti=function(n,t){return pi(n,Ci(t)+ci(t))},xi=function(n,t,e){if(0===e.length)return[];var r=q(e.slice(1),function(t,e){return t.map(function(t){return n(e,t)})}),o=e[e.length-1].map(function(n){return t(e.length-1,n)});return r.concat([o])},Ri=function(n){return-n},Di={delta:O,positions:function(n){return xi(Si,Ti,n)},edge:Ci},Oi={delta:O,edge:hi,positions:function(n){return xi(wi,yi,n)}},Ai={delta:Ri,edge:bi,positions:function(n){return xi(yi,wi,n)}},ki=ri(Oi,Ai),Ii={delta:function(n,t){return ki(t).delta(n,t)},positions:function(n,t){return ki(t).positions(n,t)},edge:function(n){return ki(n).edge(n)}},Bi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ei=(fe="[0-9]+",se="[+-]?"+fe,me="[eE]"+se,de="\\.",ge=function(n){return"(?:"+n+")?"},pe=["Infinity",fe+de+ge(fe)+ge(me),de+fe+ge(me),fe+ge(me)].join("|"),ve="[+-]?(?:"+pe+")",new RegExp("^("+ve+")(.*)$")),Mi=function(n,t){return V(t,function(t){return V(Bi[t],function(t){return n===t})})},Pi=function(n,t){var e=L.from(Ei.exec(n));return e.bind(function(n){var e=Number(n[1]),r=n[2];return Mi(r,t)?L.some({value:e,unit:r}):L.none()})},Ni=/(\d+(\.\d+)?)%/,zi=/(\d+(\.\d+)?)px|em/,Li=Re("col"),_i=function(n,t,e){var r=Ie(n).getOrThunk(function(){return $e(De(n))});return t(n)/e(r)*100},Wi=function(n,t){Rr(n,"width",t+"px")},ji=function(n,t){Rr(n,"width",t+"%")},Fi=function(n,t){Rr(n,"height",t+"px")},Hi=function(n){return ai(n)+"px"},Vi=function(n,t,e,r){var o=qr(n).map(function(n){var r=e(n);return Math.floor(t/100*r)}).getOr(t);return r(n,o),o},Ui=function(n,t,e,r){var o=parseFloat(n);return Bn(n,"%")&&"table"!==be(t)?Vi(t,o,e,r):o},qi=function(n){var t=Hi(n);return t?Ui(t,n,ii,Fi):ii(n)},Gi=function(n,t,e){var r=e(n),o=Mr(n,t);return r/o},$i=function(n,t){return kr(n,t).orThunk(function(){return dr(n,t).map(function(n){return n+"px"})})},Ki=function(n){return $i(n,"width")},Xi=function(n){return $i(n,"height")},Yi=function(n){return _i(n,Xu,Ju)},Ji=function(n){return Li(n)?Xu(n):Qu(n)},Qi=function(n){return Gi(n,"rowspan",qi)},Zi=function(n){var t=Ki(n);return t.bind(function(n){return Pi(n,["fixed","relative","empty"])})},nc=function(n,t,e){Rr(n,"width",t+e)},tc=function(n){return Xu(n)+"px"},ec=function(n){return _i(n,Xu,Ju)+"%"},rc=function(n){return Ki(n).exists(function(n){return Ni.test(n)})},oc=function(n){return Ki(n).exists(function(n){return zi.test(n)})},uc=function(n){return Ki(n).isNone()},ic=D(Ni),cc=Re("col"),ac=function(n){return Ki(n).getOrThunk(function(){return Ji(n)+"px"})},lc=function(n){return Xi(n).getOrThunk(function(){return Qi(n)+"px"})},fc=function(n){return q(To.justColumns(n),function(n){return L.from(n.element)})},sc=function(n){var t=mt().browser,e=t.isChrome()||t.isFirefox();return!cc(n)||e},mc=function(n,t,e,r,o,u){return n.filter(r).fold(function(){return u(ei(e,t))},function(n){return o(n)})},dc=function(n,t,e,r){var o=Zu(n),u=To.hasColumns(n)?fc(n):o,i=[L.some(Ii.edge(t))].concat(q(Ii.positions(o,t),function(n){return n.map(function(n){return n.x})})),c=k(Pr);return q(u,function(n,t){return mc(n,t,i,c,function(n){if(sc(n))return e(n);var u=wr(o[t],O);return mc(u,t,i,c,function(n){return r(L.some(Xu(n)))},r)},r)})},gc=function(n){return n.map(function(n){return n+"px"}).getOr("")},pc=function(n,t){return dc(n,t,ac,gc)},vc=function(n,t,e){return dc(n,t,Yi,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})})},bc=function(n,t,e){return dc(n,t,Ji,function(n){return n.getOrThunk(e.minCellWidth)})},hc=function(n,t,e,r,o){var u=ti(n),i=[L.some(e.edge(t))].concat(q(e.positions(u,t),function(n){return n.map(function(n){return n.y})}));return q(u,function(n,t){return mc(n,t,i,k(Nr),r,o)})},wc=function(n,t,e){return hc(n,t,e,Qi,function(n){return n.getOrThunk(_r)})},yc=function(n,t,e){return hc(n,t,e,lc,gc)},Cc=function(n,t){return function(){return qe(n)?t(n):parseFloat(kr(n,"width").getOr("0"))}},Sc=function(n){var t=Cc(n,Xu),e=D(0),r=function(t,e){return bc(t,n,e)};return{width:t,pixelWidth:t,getWidths:r,getCellDelta:e,singleColumnWidth:D([0]),minCellWidth:e,setElementWidth:T,adjustTableWidth:T,isRelative:!0,label:"none"}},Tc=function(n){var t=Cc(n,function(n){return parseFloat(ec(n))}),e=Cc(n,Xu),r=function(n){return n/e()*100},o=function(n,t){return[100-n]},u=function(){return Lr()/e()*100},i=function(e){var r=t(),o=e/100*r,u=r+o;ji(n,u)},c=function(t,e){return vc(t,n,e)};return{width:t,pixelWidth:e,getWidths:c,getCellDelta:r,singleColumnWidth:o,minCellWidth:u,setElementWidth:ji,adjustTableWidth:i,isRelative:!0,label:"percent"}},xc=function(n){var t=Cc(n,Xu),e=O,r=function(n,t){var e=Math.max(Lr(),n+t);return[e-n]},o=function(e){var r=t()+e;Wi(n,r)},u=function(t,e){return bc(t,n,e)};return{width:t,pixelWidth:t,getWidths:u,getCellDelta:e,singleColumnWidth:r,minCellWidth:Lr,setElementWidth:Wi,adjustTableWidth:o,isRelative:!1,label:"pixel"}},Rc=function(n,t){var e=ic().exec(t);return null!==e?Tc(n):xc(n)},Dc=function(n){var t=Ki(n);return t.fold(function(){return Sc(n)},function(t){return Rc(n,t)})},Oc={getTableSize:Dc,pixelSize:xc,percentageSize:Tc,noneSize:Sc},Ac=function(n,t,e,r,o,u){return{minRow:n,minCol:t,maxRow:e,maxCol:r,allCells:o,selectedCells:u}},kc=function(n,t){var e=n.grid.columns,r=n.grid.rows,o=r,u=e,i=0,c=0,a=[],l=[];return Lt(n.access,function(n){if(a.push(n),t(n)){l.push(n);var e=n.row,r=e+n.rowspan-1,f=n.column,s=f+n.colspan-1;e<o?o=e:r>i&&(i=r),f<u?u=f:s>c&&(c=s)}}),Ac(o,u,i,c,a,l)},Ic=function(n,t,e){var r=n[e].element,o=Rt.fromTag("td");Fo(o,Rt.fromTag("br"));var u=t?Fo:jo;u(r,o)},Bc=function(n,t,e,r){for(var o=t.grid.columns,u=t.grid.rows,i=0;i<u;i++)for(var c=!1,a=0;a<o;a++)if(!(i<e.minRow||i>e.maxRow||a<e.minCol||a>e.maxCol)){var l=To.getAt(t,i,a).filter(r).isNone();l?Ic(n,c,i):c=!0}},Ec=function(n,t,e,r){Lt(e.columns,function(n){(n.column<t.minCol||n.column>t.maxCol)&&Ko(n.element)});var o=X(Wr(n,"tr"),function(n){return 0===n.dom.childElementCount});G(o,Ko),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||G(Wr(n,"th,td"),function(n){gr(n,"rowspan"),gr(n,"colspan")}),gr(n,ao),gr(n,"data-snooker-col-series");var u=Oc.getTableSize(n);u.adjustTableWidth(r)},Mc=function(n,t,e,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;var o=bc(t,n,e),u=J(o,function(n,t){return n+t},0),i=J(o.slice(r.minCol,r.maxCol+1),function(n,t){return n+t},0),c=i/u*e.pixelWidth(),a=c-e.pixelWidth();return e.getCellDelta(a)},Pc=function(n,t){var e=function(n){return Dt(n.element,t)},r=Mu(n),o=Yr(r),u=Oc.getTableSize(n),i=To.generate(o),c=kc(i,e),a="th:not("+t+"),td:not("+t+")",l=jr(r,"th,td",function(n){return Dt(n,a)});G(l,Ko),Bc(o,i,c,e);var f=To.fromTable(n),s=Mc(n,f,u,c);return Ec(r,c,i,s),r},Nc=" ",zc=function(n){return"img"===be(n)?1:Zo(n).fold(function(){return Pe(n).length},function(n){return n.length})},Lc=function(n){return Zo(n).filter(function(n){return 0!==n.trim().length||n.indexOf(Nc)>-1}).isSome()},_c=["img","br"],Wc=function(n){var t=Lc(n);return t||H(_c,be(n))},jc=function(n){return rr(n,Wc)},Fc=function(n){return Hc(n,Wc)},Hc=function(n,t){var e=function(n){for(var r=Pe(n),o=r.length-1;o>=0;o--){var u=r[o];if(t(u))return L.some(u);var i=e(u);if(i.isSome())return i}return L.none()};return e(n)},Vc={scope:["row","col"]},Uc=function(n){return function(){var t=Rt.fromTag("td",n.dom);return Fo(t,Rt.fromTag("br",n.dom)),t}},qc=function(n){return function(){return Rt.fromTag("col",n.dom)}},Gc=function(n){return function(){return Rt.fromTag("colgroup",n.dom)}},$c=function(n){return function(){return Rt.fromTag("tr",n.dom)}},Kc=function(n,t,e){var r=Nu(n,t);return Lt(e,function(n,t){null===n?gr(r,t):lr(r,t,n)}),r},Xc=function(n){return n},Yc=function(n,t,e){var r=jc(n);return r.map(function(r){var o=e.join(","),u=Je(r,o,function(t){return It(t,n)});return Y(u,function(n,t){var e=Eu(t);return gr(e,"contenteditable"),Fo(n,e),e},t)}).getOr(t)},Jc=function(n,t){Lt(Vc,function(e,r){return dr(n,r).filter(function(n){return H(e,n)}).each(function(n){return lr(t,r,n)})})},Qc=function(n,t,e){var r=function(n,t){Br(n.element,t),Ir(t,"height"),1!==n.colspan&&Ir(t,"width")},o=function(o){var u=Rt.fromTag(be(o.element),t.dom),i=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=i.length>0?Yc(o.element,u,i):u;return Fo(c,Rt.fromTag("br")),r(o,u),Jc(o.element,u),n(o.element,u),u},u=function(e){var o=Rt.fromTag(be(e.element),t.dom);return r(e,o),n(e.element,o),o};return{col:u,colgroup:Gc(t),row:$c(t),cell:o,replace:Kc,colGap:qc(t),gap:Uc(t)}},Zc=function(n){return{col:qc(n),colgroup:Gc(n),row:$c(n),cell:Uc(n),replace:Xc,colGap:qc(n),gap:Uc(n)}},na=function(n,t){var e=t||document,r=e.createElement("div");return r.innerHTML=n,Pe(Rt.fromDom(r))},ta=function(n){return q(n,Rt.fromDom)},ea=function(n){return n.nodeName.toLowerCase()},ra=function(n){return Rt.fromDom(n.getBody())},oa=function(n){return n.getBoundingClientRect().width},ua=function(n){return n.getBoundingClientRect().height},ia=function(n){return function(t){return It(t,ra(n))}},ca=function(n){return n?n.replace(/px$/,""):""},aa=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},la=function(n){gr(n,"data-mce-style");var t=function(n){return gr(n,"data-mce-style")};G(Vr(n),t),G(Ur(n),t),G(Gr(n),t)},fa=function(n,t){var e=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width");return L.from(e).filter(Pn)},sa=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},ma=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},da=function(n){return Rt.fromDom(n.selection.getStart())},ga=function(n){return Rt.fromDom(n.selection.getEnd())},pa=function(n){return Ru(n.get(),D([]),O,cn)},va=function(n){var t=function(n,t){return dr(n,t).exists(function(n){return parseInt(n,10)>1})},e=function(n){return t(n,"rowspan")||t(n,"colspan")},r=pa(n);return r.length>0&&rn(r,e)?L.some(r):L.none()},ba=function(n,t,e){return Ru(t.get(),L.none,function(t){return t.length<=1?L.none():Cu(n,e.firstSelectedSelector,e.lastSelectedSelector).map(function(n){return{bounds:n,cells:t}})},L.none)},ha="data-mce-selected",wa="td["+ha+"],th["+ha+"]",ya="["+ha+"]",Ca="data-mce-first-selected",Sa="td["+Ca+"],th["+Ca+"]",Ta="data-mce-last-selected",xa="td["+Ta+"],th["+Ta+"]",Ra=ya,Da={selected:ha,selectedSelector:wa,firstSelected:Ca,firstSelectedSelector:Sa,lastSelected:Ta,lastSelectedSelector:xa},Oa=function(n){return{element:n,mergable:L.none(),unmergable:L.none(),selection:[n]}},Aa=function(n,t,e){return{element:e,mergable:ba(t,n,Da),unmergable:va(n),selection:pa(n)}},ka=function(n,t,e){return{element:n,clipboard:t,generators:e}},Ia=function(n,t,e,r){return{selection:pa(n),clipboard:e,generators:r}},Ba=function(n){return qr(n).bind(function(n){return yu(n,Da.firstSelectedSelector)}).fold(D(n),function(n){return n[0]})},Ea=function(n){return function(t,e){var r=be(t),o="col"===r||"colgroup"===r?Ba(t):t;return cr(o,n,e)}},Ma=Ea("th,td,caption"),Pa=Ea("th,td"),Na=function(n){return pa(n)},za=function(n,t){var e=Pa(n),r=e.bind(function(n){return qr(n)}).map(function(n){return Gr(n)});return hr(e,r,function(n,e){return X(e,function(e){return V(ta(e.dom.cells),function(e){return"1"===mr(e,t)||It(e,n)})})}).getOr([])},La=function(n){return qr(n[0]).map(function(n){var t=Pc(n,Ra);return la(t),[t]})},_a=function(n,t){return q(t,function(t){return n.selection.serializer.serialize(t.dom,{})}).join("")},Wa=function(n){return q(n,function(n){return n.dom.innerText}).join("")},ja=function(n,t,e){n.on("BeforeGetContent",function(e){var r=function(t){e.preventDefault(),La(t).each(function(t){e.content="text"===e.format?Wa(t):_a(n,t)})};!0===e.selection&&Ru(t.get(),T,r,T)}),n.on("BeforeSetContent",function(r){if(!0===r.selection&&!0===r.paste){var o=Na(t);fn(o).each(function(t){qr(t).each(function(o){var u=X(na(r.content),function(n){return"meta"!==be(n)}),i=Re("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=Rt.fromDom(n.getDoc()),a=Zc(c),l=ka(t,u[0],a);e.pasteCells(o,l).each(function(){n.focus()})}})})}})},Fa=Tu.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ha=dn({},Fa),Va=function(n,t){return 0===n.length?Ha.none():1===n.length?Ha.only(0):0===t?Ha.left(0,1):t===n.length-1?Ha.right(t-1,t):t>0&&t<n.length-1?Ha.middle(t-1,t,t+1):Ha.none()},Ua=function(n,t,e,r,o){var u=n.slice(0),i=Va(n,t),c=D(q(u,D(0))),a=function(n){return r.singleColumnWidth(u[n],e)},l=function(n,t){return o.calcLeftEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)},f=function(n,t,i){return o.calcMiddleDeltas(u,n,t,i,e,r.minCellWidth(),r.isRelative)},s=function(n,t){return o.calcRightEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)};return i.fold(c,a,l,f,s)},qa=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},Ga=function(n,t){var e=To.justCells(n);return q(e,function(n){var e=qa(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}})},$a=function(n,t){var e=To.justColumns(n);return q(e,function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}})},Ka=function(n,t){var e=To.justCells(n);return q(e,function(n){var e=qa(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}})},Xa=function(n,t){return q(n.all,function(n,e){return{element:n.element,height:t[e]}})},Ya=function(n){return Y(n,function(n,t){return n+t},0)},Ja=function(n,t){return To.hasColumns(n)?$a(n,t):Ga(n,t)},Qa=function(n,t,e){var r=Ja(n,t);G(r,function(n){e.setElementWidth(n.element,n.width)})},Za=function(n,t,e,r,o){var u=To.fromTable(n),i=o.getCellDelta(t),c=o.getWidths(u,o),a=e===u.grid.columns-1,l=r.clampTableDelta(c,e,i,o.minCellWidth(),a),f=Ua(c,e,l,o,r),s=q(f,function(n,t){return n+c[t]});Qa(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},nl=function(n,t,e,r){var o=To.fromTable(n),u=wc(o,n,r),i=q(u,function(n,r){return e===r?Math.max(t+n,_r()):n}),c=Ka(o,i),a=Xa(o,i);G(a,function(n){Fi(n.element,n.height)}),G(c,function(n){Fi(n.element,n.height)});var l=Ya(i);Fi(n,l)},tl=function(n,t,e,r,o){var u=To.generate(t),i=r.getWidths(u,r),c=r.pixelWidth(),a=o.calcRedestributedWidths(i,c,e.pixelDelta,r.isRelative),l=a.newSizes,f=a.delta;Qa(u,l,r),r.adjustTableWidth(f)},el=function(n,t,e,r){var o=To.generate(t),u=r.getWidths(o,r);Qa(o,u,r)},rl=function(n){return q(n,D(0))},ol=function(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))},ul=function(n){return function(t,e,r,o){if(n(r)){var u=Math.max(o,t[e]-Math.abs(r)),i=Math.abs(u-t[e]);return r>=0?i:-i}return r}},il=ul(function(n){return n<0}),cl=ul(E),al=function(){var n=function(n,t,e,r,o){var u=il(n,t,r,o);return ol(n,t,e+1,[u,0],rl)},t=function(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return q(n,function(n,e){var r=e===t?u:n/o;return r-n})},e=function(e,r,o,u,i,c){return c?t(e,r,u,i):n(e,r,o,u,i)},r=function(n,t,r,o,u,i,c){return e(n,r,o,u,i,c)},o=function(n,t){return n(t)},u=function(n,e,r,o,u,i){if(i)return t(n,r,o,u);var c=il(n,r,o,u);return rl(n.slice(0,r)).concat([c])},i=function(n,t,e,r){if(r){var o=t+e,u=o/t,i=q(n,function(n){return n/u});return{delta:100*u-100,newSizes:i}}return{delta:e,newSizes:n}};return{resizeTable:o,clampTableDelta:il,calcLeftEdgeDeltas:e,calcMiddleDeltas:r,calcRightEdgeDeltas:u,calcRedestributedWidths:i}},ll=function(){var n=function(n,t,e,r,o){var u=r>=0?e:t,i=cl(n,u,r,o);return ol(n,t,e+1,[i,-i],rl)},t=function(t,e,r,o,u,i){return n(t,r,o,u,i)},e=function(n,t,e){e&&n(t)},r=function(n,t,e,r,o,u){if(u)return rl(n);var i=r/n.length;return q(n,D(i))},o=function(n,t,e,r,o){if(o){if(e>=0)return e;var u=J(n,function(n,t){return n+t-r},0);return Math.max(-u,e)}return il(n,t,e,r)},u=function(n,t,e,r){return{delta:0,newSizes:n}};return{resizeTable:e,clampTableDelta:o,calcLeftEdgeDeltas:n,calcMiddleDeltas:t,calcRightEdgeDeltas:r,calcRedestributedWidths:u}},fl=function(n,t){var e=L.from(n.dom.documentElement).map(Rt.fromDom).getOr(n);return{parent:D(e),view:D(n),origin:D(fi(0,0)),isResizable:t}},sl=function(n,t,e){var r=function(){return di(t)};return{parent:D(t),view:D(n),origin:r,isResizable:e}},ml=function(n,t,e){return{parent:D(t),view:D(n),origin:D(fi(0,0)),isResizable:e}},dl={only:fl,detached:sl,body:ml},gl=Tu.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),pl=function(n,t,e){var r=e.substring(0,e.length-n.length),o=parseFloat(r);return r===o.toString()?t(o):gl.invalid(e)},vl=function(n){return Bn(n,"%")?pl("%",gl.percent,n):Bn(n,"px")?pl("px",gl.pixels,n):gl.invalid(n)},bl=dn(dn({},gl),{from:vl}),hl=function(n,t){return q(n,function(n){var e=bl.from(n);return e.fold(function(){return n},function(n){var e=n/t*100;return e+"%"},function(n){return n+"%"})})},wl=function(n,t,e){var r=e/t;return q(n,function(n){var t=bl.from(n);return t.fold(function(){return n},function(n){return n*r+"px"},function(n){return n/100*e+"px"})})},yl=function(n,t){var e=n.fold(function(){return D("")},function(n){var e=n/t;return D(e+"px")},function(){var n=100/t;return D(n+"%")});return U(t,e)},Cl=function(n,t,e){return n.fold(function(){return t},function(n){return wl(t,e,n)},function(n){return hl(t,e)})},Sl=function(n,t,e){var r=bl.from(e),o=rn(n,function(n){return"0px"===n})?yl(r,n.length):Cl(r,n,t);return Dl(o)},Tl=function(n,t){return 0===n.length?t:Y(n,function(n,t){return bl.from(t).fold(D(0),O,O)+n},0)},xl=function(n,t){var e=Math.floor(n);return{value:e+t,remainder:n-e}},Rl=function(n,t){return bl.from(n).fold(D(n),function(n){return n+t+"px"},function(n){return n+t+"%"})},Dl=function(n){if(0===n.length)return n;var t=Y(n,function(n,t){var e=bl.from(t).fold(function(){return{value:t,remainder:0}},function(n){return xl(n,"px")},function(n){return{value:n+"%",remainder:0}});return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}},{output:[],remainder:0}),e=t.output;return e.slice(0,e.length-1).concat([Rl(e[e.length-1],Math.round(t.remainder))])},Ol=bl.from,Al=function(n,t,e){G(t,function(t){var r=n.slice(t.column,t.colspan+t.column),o=Tl(r,Lr());Rr(t.element,"width",o+e)})},kl=function(n,t,e){G(t,function(t,r){var o=Tl([n[r]],Lr());Rr(t.element,"width",o+e)})},Il=function(n,t,e,r){G(e,function(t){var e=n.slice(t.row,t.rowspan+t.row),o=Tl(e,_r());Rr(t.element,"height",o+r)}),G(t,function(t,e){Rr(t.element,"height",n[e])})},Bl=function(n){return Ol(n).fold(D("px"),D("px"),D("%"))},El=function(n,t,e){var r=To.fromTable(n),o=r.all,u=To.justCells(r),i=To.justColumns(r);t.each(function(t){var e=Bl(t),o=Xu(n),c=pc(r,n),a=Sl(c,o,t);To.hasColumns(r)?kl(a,i,e):Al(a,u,e),Rr(n,"width",t)}),e.each(function(t){var e=Bl(t),i=ii(n),c=yc(r,n,Di),a=Sl(c,i,t);Il(a,o,u,e),Rr(n,"height",t)})},Ml=rc,Pl=oc,Nl=uc,zl=function(n){var t=To.fromTable(n);return t.grid},Ll=function(n){var t=[],e=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");t.push(n)},r=function(n){t=X(t,function(t){return t!==n})},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};G(n,function(n,t){o[n]=e[t]}),G(t,function(n){n(o)})};return{bind:e,unbind:r,trigger:o}},_l=function(n){var t=_t(n,function(n){return{bind:n.bind,unbind:n.unbind}}),e=_t(n,function(n){return n.trigger});return{registry:t,trigger:e}},Wl=function(n,t){var e=null,r=function(){v(e)||(clearTimeout(e),e=null)},o=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),e=setTimeout(function(){e=null,n.apply(null,o)},t)};return{cancel:r,throttle:o}},jl=function(n){return n.slice(0).sort()},Fl=function(n,t){throw new Error("All required keys ("+jl(n).join(", ")+") were not specified. Specified keys were: "+jl(t).join(", ")+".")},Hl=function(n){throw new Error("Unsupported keys for object: "+jl(n).join(", "))},Vl=function(n,t){if(!p(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");G(t,function(t){if(!d(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")})},Ul=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+jl(n).join(", ")+") were not.")},ql=function(n){var t=jl(n),e=Z(t,function(n,e){return e<t.length-1&&n===t[e+1]});e.each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},Gl=function(n,t){return $l(n,t,{validate:C,label:"function"})},$l=function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");return Vl("required",t),ql(t),function(r){var o=Nt(r),u=rn(t,function(n){return H(o,n)});u||Fl(t,o),n(t,o);var i=X(t,function(n){return!e.validate(r[n],n)});return i.length>0&&Ul(i,e.label),r}},Kl=function(n,t){var e=X(t,function(t){return!H(n,t)});e.length>0&&Hl(e)},Xl=function(n){return Gl(Kl,n)},Yl=Xl(["compare","extract","mutate","sink"]),Jl=Xl(["element","start","stop","destroy"]),Ql=Xl(["forceDrop","drop","move","delayDrop"]),Zl=function(){var n=L.none(),t=function(){n=L.none()},e=function(t,e){var r=n.map(function(n){return t.compare(n,e)});return n=L.some(e),r},r=function(n,t){var r=t.extract(n);r.each(function(n){var r=e(t,n);r.each(function(n){o.trigger.move(n)})})},o=_l({move:Ll(["info"])});return{onEvent:r,reset:t,events:o.registry}},nf=function(){var n=_l({move:Ll(["info"])});return{onEvent:T,reset:T,events:n.registry}},tf=function(){var n=nf(),t=Zl(),e=n,r=function(){e.reset(),e=t},o=function(){e.reset(),e=n},u=function(n,t){e.onEvent(n,t)},i=function(){return e===t};return{on:r,off:o,isOn:i,onEvent:u,events:t.events}},ef=function(n,t,e){var r=!1,o=_l({start:Ll([]),stop:Ll([])}),u=tf(),i=function(){d.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=Wl(i,200),a=function(n){d.start(n),u.on(),o.trigger.start()},l=function(n){c.cancel(),u.onEvent(n,t)};u.events.move.bind(function(e){t.mutate(n,e.info)});var f=function(){r=!0},s=function(){r=!1},m=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r&&n.apply(null,t)}},d=t.sink(Ql({forceDrop:i,drop:m(i),move:m(l),delayDrop:m(c.throttle)}),e),g=function(){d.destroy()};return{element:d.element,go:a,on:f,off:s,destroy:g,events:o.registry}},rf=function(n,t,e,r,o,u,i){return{target:n,x:t,y:e,stop:r,prevent:o,kill:u,raw:i}},of=function(n){var t=Rt.fromDom(Ve(n).getOr(n.target)),e=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=x(r,e);return rf(t,n.clientX,n.clientY,e,r,o,n)},uf=function(n,t){return function(e){n(e)&&t(of(e))}},cf=function(t,e,r,o,u){var i=uf(r,o);return t.dom.addEventListener(e,i,u),{unbind:n(lf,t,e,i,u)}},af=function(n,t,e,r){return cf(n,t,e,r,!1)},lf=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},ff=E,sf=function(n,t,e){return af(n,t,ff,e)},mf=of,df=function(n,t){var e=mr(n,t);return void 0===e||""===e?[]:e.split(" ")},gf=function(n,t,e){var r=df(n,t),o=r.concat([e]);return lr(n,t,o.join(" ")),!0},pf=function(n,t,e){var r=X(df(n,t),function(n){return n!==e});return r.length>0?lr(n,t,r.join(" ")):gr(n,t),!1},vf=function(n){return void 0!==n.dom.classList},bf=function(n){return df(n,"class")},hf=function(n,t){return gf(n,"class",t)},wf=function(n,t){return pf(n,"class",t)},yf=function(n,t){vf(n)?n.dom.classList.add(t):hf(n,t)},Cf=function(n){var t=vf(n)?n.dom.classList:bf(n);0===t.length&&gr(n,"class")},Sf=function(n,t){if(vf(n)){var e=n.dom.classList;e.remove(t)}else wf(n,t);Cf(n)},Tf=function(n,t){return vf(n)&&n.dom.classList.contains(t)},xf=function(n){var t=n.replace(/\./g,"-"),e=function(n){return t+"-"+n};return{resolve:e}},Rf=xf("ephox-dragster"),Df=Rf.resolve,Of=function(n){var t=dn({layerClass:Df("blocker")},n),e=Rt.fromTag("div");lr(e,"role","presentation"),Dr(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),yf(e,Df("blocker")),yf(e,t.layerClass);var r=D(e),o=function(){Ko(e)};return{element:r,destroy:o}},Af=function(n,t){return fi(t.left-n.left,t.top-n.top)},kf=function(n){return L.some(fi(n.x,n.y))},If=function(n,t){n.mutate(t.left,t.top)},Bf=function(n,t){var e=Of(t),r=sf(e.element(),"mousedown",n.forceDrop),o=sf(e.element(),"mouseup",n.drop),u=sf(e.element(),"mousemove",n.move),i=sf(e.element(),"mouseout",n.delayDrop),c=function(){e.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()},a=function(n){Fo(n,e.element())},l=function(){Ko(e.element())};return Jl({element:e.element,start:a,stop:l,destroy:c})},Ef=Yl({compare:Af,extract:kf,sink:Bf,mutate:If}),Mf=function(n,t){void 0===t&&(t={});var e=void 0!==t.mode?t.mode:Ef;return ef(n,e,t)},Pf=function(n){return cr(n,"[contenteditable]")},Nf=function(n,t){return void 0===t&&(t=!1),!mt().browser.isIE()&&qe(n)?n.dom.isContentEditable:Pf(n).fold(D(t),function(n){return"true"===zf(n)})},zf=function(n){return n.dom.contentEditable},Lf=xf("ephox-snooker"),_f=Lf.resolve,Wf=function(){var n=_l({drag:Ll(["xDelta","yDelta"])}),t=function(t,e){n.trigger.drag(t,e)};return{mutate:t,events:n.registry}},jf=function(){var n=_l({drag:Ll(["xDelta","yDelta","target"])}),t=L.none(),e=Wf();e.events.drag.bind(function(e){t.each(function(t){n.trigger.drag(e.xDelta,e.yDelta,t)})});var r=function(n){t=L.some(n)},o=function(){return t};return{assign:r,get:o,mutate:e.mutate,events:n.registry}},Ff=function(n,t,e,r,o){var u=Rt.fromTag("div");return Dr(u,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),fr(u,{"data-column":n,role:"presentation"}),u},Hf=function(n,t,e,r,o){var u=Rt.fromTag("div");return Dr(u,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),fr(u,{"data-row":n,role:"presentation"}),u},Vf=_f("resizer-bar"),Uf=_f("resizer-rows"),qf=_f("resizer-cols"),Gf=7,$f=function(n,t){return en(n.all,function(n,e){return t(n.element)?[e]:[]})},Kf=function(n,t){var e=[];return U(n.grid.columns,function(r){var o=To.getColumnAt(n,r).map(function(n){return n.element});o.forall(t)&&e.push(r)}),X(e,function(e){var r=To.filterItems(n,function(n){return n.column===e});return rn(r,function(n){return t(n.element)})})},Xf=function(n){var t=Ze(n.parent(),"."+Vf);G(t,Ko)},Yf=function(n,t,e){var r=n.origin();G(t,function(t){t.each(function(t){var o=e(r,t);yf(o,Vf),Fo(n.parent(),o)})})},Jf=function(n,t,e,r){Yf(n,t,function(n,t){var o=Ff(t.col,t.x-n.left,e.top-n.top,Gf,r);return yf(o,qf),o})},Qf=function(n,t,e,r){Yf(n,t,function(n,t){var o=Hf(t.row,e.left-n.left,t.y-n.top,r,Gf);return yf(o,Uf),o})},Zf=function(n,t,e,r,o){var u=di(e),i=t.isResizable,c=r.length>0?Di.positions(r,e):[],a=c.length>0?$f(n,i):[],l=X(c,function(n,t){return V(a,function(n){return t===n})});Qf(t,l,u,Yu(e));var f=o.length>0?Ii.positions(o,e):[],s=f.length>0?Kf(n,i):[],m=X(f,function(n,t){return V(s,function(n){return t===n})});Jf(t,m,u,ci(e))},ns=function(n,t){if(Xf(n),n.isResizable(t)){var e=To.fromTable(t),r=ti(e),o=Zu(e);Zf(e,n,t,r,o)}},ts=function(n,t){var e=Ze(n.parent(),"."+Vf);G(e,t)},es=function(n){ts(n,function(n){Rr(n,"display","none")})},rs=function(n){ts(n,function(n){Rr(n,"display","block")})},os=function(n){return Tf(n,Uf)},us=function(n){return Tf(n,qf)},is=_f("resizer-bar-dragging"),cs=function(t){var e=jf(),r=Mf(e,{}),o=L.none(),u=function(n,t){return L.from(mr(n,t))};e.events.drag.bind(function(n){u(n.target,"data-row").each(function(t){var e=zr(n.target,"top");Rr(n.target,"top",e+n.yDelta+"px")}),u(n.target,"data-column").each(function(t){var e=zr(n.target,"left");Rr(n.target,"left",e+n.xDelta+"px")})});var i=function(n,t){var e=zr(n,t),r=Er(n,"data-initial-"+t,0);return e-r};r.events.stop.bind(function(){e.get().each(function(n){o.each(function(e){u(n,"data-row").each(function(t){var r=i(n,"top");gr(n,"data-initial-top"),g.trigger.adjustHeight(e,r,parseInt(t,10))}),u(n,"data-column").each(function(t){var r=i(n,"left");gr(n,"data-initial-left"),g.trigger.adjustWidth(e,r,parseInt(t,10))}),ns(t,e)})})});var c=function(n,o){
g.trigger.startAdjust(),e.assign(n),lr(n,"data-initial-"+o,zr(n,o)),yf(n,is),Rr(n,"opacity","0.2"),r.go(t.parent())},a=sf(t.parent(),"mousedown",function(n){os(n.target)&&c(n.target,"top"),us(n.target)&&c(n.target,"left")}),l=function(n){return It(n,t.view())},f=function(n){return cr(n,"table",l).filter(Nf)},s=sf(t.view(),"mouseover",function(n){f(n.target).fold(function(){qe(n.target)&&Xf(t)},function(n){o=L.some(n),ns(t,n)})}),m=function(){a.unbind(),s.unbind(),r.destroy(),Xf(t)},d=function(n){ns(t,n)},g=_l({adjustHeight:Ll(["table","delta","row"]),adjustWidth:Ll(["table","delta","column"]),startAdjust:Ll([])});return{destroy:m,refresh:d,on:r.on,off:r.off,hideBars:n(es,t),showBars:n(rs,t),events:g.registry}},as=function(n,t,e){var r=Di,o=Ii,u=cs(n),i=_l({beforeResize:Ll(["table","type"]),afterResize:Ll(["table","type"]),startDrag:Ll([])});return u.events.adjustHeight.bind(function(n){var t=n.table;i.trigger.beforeResize(t,"row");var e=r.delta(n.delta,t);nl(t,e,n.row,r),i.trigger.afterResize(t,"row")}),u.events.startAdjust.bind(function(n){i.trigger.startDrag()}),u.events.adjustWidth.bind(function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=e(r);Za(r,u,n.column,t,c),i.trigger.afterResize(r,"col")}),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},ls={create:as},fs=function(n,t){return n.fire("newrow",{node:t})},ss=function(n,t){return n.fire("newcell",{node:t})},ms=function(n,t,e,r,o){n.fire("ObjectResizeStart",{target:t,width:e,height:r,origin:o})},ds=function(n,t,e,r,o){n.fire("ObjectResized",{target:t,width:e,height:r,origin:o})},gs=function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})},ps=function(n){n.fire("TableSelectionClear")},vs=function(n,t,e){n.fire("TableModified",dn(dn({},e),{table:t}))},bs={structure:!1,style:!0},hs={structure:!0,style:!1},ws={structure:!0,style:!0},ys="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Cs={"border-collapse":"collapse",width:"100%"},Ss=U(5,function(n){var t=n+1+"px";return{title:t,value:t}}),Ts=q(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(n){return{title:n,value:n.toLowerCase()}}),xs=function(n){var t;if(qs(n)){var e=n.dom,r=null!==(t=e.getParent(n.selection.getStart(),e.isBlock))&&void 0!==t?t:n.getBody(),o=Ju(Rt.fromDom(r));return dn(dn({},Cs),{width:o+"px"})}return Gs(n)?Ht(Cs,function(n,t){return"width"!==t}):Cs},Rs={border:"1"},Ds="preservetable",Os=function(n){return n.getParam("table_sizing_mode","auto")},As=function(n){return n.getParam("table_responsive_width")},ks=function(n){return n.getParam("table_border_widths",Ss,"array")},Is=function(n){return n.getParam("table_border_styles",Ts,"array")},Bs=function(n){return n.getParam("table_default_attributes",Rs,"object")},Es=function(n){return n.getParam("table_default_styles",xs(n),"object")},Ms=function(n){return n.getParam("table_resize_bars",!0,"boolean")},Ps=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ns=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},zs=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Ls=function(n){return n.getParam("table_advtab",!0,"boolean")},_s=function(n){return n.getParam("table_appearance_options",!0,"boolean")},Ws=function(n){return n.getParam("table_grid",!0,"boolean")},js=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Fs=function(n){return n.getParam("table_cell_class_list",[],"array")},Hs=function(n){return n.getParam("table_row_class_list",[],"array")},Vs=function(n){return n.getParam("table_class_list",[],"array")},Us=function(n){return"relative"===Os(n)||!0===As(n)},qs=function(n){return"fixed"===Os(n)||!1===As(n)},Gs=function(n){return"responsive"===Os(n)},$s=function(n){return n.getParam("table_toolbar",ys)},Ks=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},Xs=function(n){var t="section",e=n.getParam("table_header_type",t,"string"),r=["section","cells","sectionCells","auto"];return H(r,e)?e:t},Ys=function(n){var t=["preservetable","resizetable"],e=n.getParam("table_column_resizing",Ds,"string");return Z(t,function(n){return n===e}).getOr(Ds)},Js=function(n){return"preservetable"===Ys(n)},Qs=function(n){return"resizetable"===Ys(n)},Zs=function(n){var t=n.getParam("table_clone_elements");return d(t)?L.some(t.split(/[ ,]/)):Array.isArray(t)?L.some(t):L.none()},nm=function(n){var t=n.getParam("object_resizing",!0);return d(t)?"table"===t:t},tm=function(n){return n.getParam("table_background_color_map",[],"array")},em=function(n){return n.getParam("table_border_color_map",[],"array")},rm=function(n,t){return Us(n)?Oc.percentageSize(t):qs(n)?Oc.pixelSize(t):Oc.getTableSize(t)},om=function(n){gr(n,"width")},um=function(n){var t=ec(n);El(n,L.some(t),L.none()),om(n)},im=function(n){var t=tc(n);El(n,L.some(t),L.none()),om(n)},cm=function(n){Ir(n,"width");var t=Ur(n),e=t.length>0?t:Vr(n);G(e,function(n){Ir(n,"width"),om(n)}),om(n)},am=um,lm=im,fm=cm,sm=function(n){var t=To.fromTable(n);To.hasColumns(t)||G(Vr(n),function(n){var t=Or(n,"width");Rr(n,"width",t),gr(n,"width")})},mm=function(){var n=Rt.fromTag("div");return Dr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Fo(Ge(),n),n},dm=function(n,t){return n.inline?dl.body(ra(n),mm(),t):dl.only(Rt.fromDom(n.getDoc()),t)},gm=function(n,t){n.inline&&Ko(t.parent())},pm="bar-",vm=function(n){return"false"!==mr(n,"data-mce-resize")},bm=function(n){var t,e,r=L.none(),o=L.none(),u=L.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(){return u.getOr(dl.only(Rt.fromDom(n.getBody()),vm))},l=function(t){return rm(n,t)},f=function(){return Js(n)?ll():al()},s=function(n){return zl(n).columns},m=function(r,o,u){var i=Bn(o,"e");if(""===e&&am(r),u!==t&&""!==e){Rr(r,"width",e);var c=f(),a=l(r),m=Js(n)||i?s(r)-1:0;Za(r,u-t,m,c,a)}else if(sa(e)){var d=parseFloat(e.replace("%","")),g=u*d/t;Rr(r,"width",g+"%")}ma(e)&&sm(r)},d=function(){o.each(function(n){n.destroy()}),u.each(function(t){gm(n,t)})};return n.on("init",function(){var t=dm(n,vm);if(u=L.some(t),nm(n)&&Ms(n)){var e=f(),i=ls.create(t,e,l);i.on(),i.events.startDrag.bind(function(t){r=L.some(n.selection.getRng())}),i.events.beforeResize.bind(function(t){var e=t.table.dom;ms(n,e,oa(e),ua(e),pm+t.type)}),i.events.afterResize.bind(function(t){var e=t.table,o=e.dom;la(e),r.each(function(t){n.selection.setRng(t),n.focus()}),ds(n,o,oa(o),ua(o),pm+t.type),n.undoReceptionist.add()}),o=L.some(i)}}),n.on("ObjectResizeStart",function(r){var o=r.target;if(i(o)){var u=Rt.fromDom(o);G(n.dom.select(".mce-clonedresizable"),function(t){n.dom.addClass(t,"mce-"+Ys(n)+"-columns")}),!Pl(u)&&qs(n)?lm(u):!Ml(u)&&Us(n)&&am(u),Nl(u)&&In(r.origin,pm)&&am(u),t=r.width,e=Gs(n)?"":fa(n,o).getOr("")}}),n.on("ObjectResized",function(t){var e=t.target;if(i(e)){var r=Rt.fromDom(e),o=t.origin;In(o,"corner-")&&m(r,o,t.width),la(r),vs(n,r.dom,bs)}}),n.on("SwitchMode",function(){c().each(function(t){n.mode.isReadOnly()?t.hideBars():t.showBars()})}),{lazyResize:c,lazyWire:a,destroy:d}},hm=function(n,t){return{element:n,offset:t}},wm=function(n,t,e){return n.property().isText(t)&&0===n.property().getText(t).trim().length||n.property().isComment(t)?e(t).bind(function(t){return wm(n,t,e).orThunk(function(){return L.some(t)})}):L.none()},ym=function(n,t){if(n.property().isText(t))return n.property().getText(t).length;var e=n.property().children(t);return e.length},Cm=function(n,t){var e=wm(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return hm(e,ym(n,e));var r=n.property().children(e);return r.length>0?Cm(n,r[r.length-1]):hm(e,ym(n,e))},Sm=Cm,Tm=r(),xm=function(n){return Sm(Tm,n)},Rm=function(n,t){var e=Mr(n,"colspan");if(1===e){var r=Zi(n);r.each(function(e){var r=e.value/2;nc(n,r,e.unit),nc(t,r,e.unit)})}},Dm=Re("th"),Om=function(n){return rn(n,function(n){return Dm(n.element)})},Am=function(n,t){return n&&t?"sectionCells":n?"section":"cells"},km=function(n){var t="thead"===n.section,e=vr(Im(n.cells),"th");return t||e?{type:"header",subType:Am(t,e)}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},Im=function(n){var t=X(n,function(n){return Dm(n.element)});return 0===t.length?L.some("td"):t.length===n.length?L.some("th"):L.none()},Bm=function(n){var t=q(n,function(n){return km(n).type}),e=H(t,"header"),r=H(t,"footer");if(e||r){var o=H(t,"body");return!e||o||r?e||o||!r?L.none():L.some("footer"):L.some("header")}return L.some("body")},Em=function(n){return mn(n.all,function(n){var t=km(n);return"header"===t.type?L.from(t.subType):L.none()})},Mm=function(n,t,e){return ue(e(n.element,t),!0,n.isLocked)},Pm=function(n,t){return n.section!==t?ie(n.element,n.cells,t,n.isNew):n},Nm=function(){return{transformRow:Pm,transformCell:function(n,t,e){var r=e(n.element,t),o="td"!==be(r)?zu(r,"td"):r;return ue(o,n.isNew,n.isLocked)}}},zm=function(){return{transformRow:Pm,transformCell:Mm}},Lm=function(){return{transformRow:function(n,t){var e="thead"===t?"tbody":t;return Pm(n,e)},transformCell:Mm}},_m=function(){return{transformRow:O,transformCell:Mm}},Wm=function(n,t){var e=To.fromTable(n),r=Em(e).getOr(t);switch(r){case"section":return Nm();case"sectionCells":return zm();case"cells":return Lm()}},jm={getTableSectionType:Wm,section:Nm,sectionCells:zm,cells:Lm,fallback:_m},Fm=function(n,t,e,r){e===r?gr(n,t):lr(n,t,e)},Hm=function(n,t,e){sn(Qe(n,t)).fold(function(){return jo(n,e)},function(n){return Wo(n,e)})},Vm=function(n,t){var e=ur(n,t).getOrThunk(function(){var e=Rt.fromTag(t,De(n).dom);return"thead"===t?Hm(n,"caption,colgroup",e):"colgroup"===t?Hm(n,"caption",e):Fo(n,e),e});return $o(e),e},Um=function(n,t){var e=[],r=[],o=function(n){return q(n,function(n){n.isNew&&e.push(n.element);var t=n.element;return $o(t),G(n.cells,function(n){n.isNew&&r.push(n.element),Fm(n.element,"colspan",n.colspan,1),Fm(n.element,"rowspan",n.rowspan,1),Fo(t,n.element)}),t})},u=function(n){return en(n,function(n){return q(n.cells,function(n){return Fm(n.element,"span",n.colspan,1),n.element})})},i=function(t,e){var r=Vm(n,e),i="colgroup"===e?u:o,c=i(t);Go(r,c)},c=function(t){ur(n,t).each(Ko)},a=function(n,t){n.length>0?i(n,t):c(t)},l=[],f=[],s=[],m=[];return G(t,function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":f.push(n);break;case"tfoot":s.push(n);break;case"colgroup":m.push(n)}}),a(m,"colgroup"),a(l,"thead"),a(f,"tbody"),a(s,"tfoot"),{newRows:e,newCells:r}},qm=function(n){return q(n,function(n){var t=Eu(n.element);return G(n.cells,function(n){var e=Mu(n.element);Fm(e,"colspan",n.colspan,1),Fm(e,"rowspan",n.rowspan,1),Fo(t,e)}),t})},Gm=function(n,t){return q(n,function(n){return ro(n,t)})},$m=function(n,t){return n[t]},Km=function(n,t){if(0===n.length)return 0;var e=n[0],r=nn(n,function(n){return!t(e.element,n.element)});return r.getOr(n.length)},Xm=function(n,t,e,r){var o=$m(n,t),u="colgroup"===o.section,i=Km(o.cells.slice(e),r),c=u?1:Km(Gm(n.slice(t),e),r);return{colspan:i,rowspan:c}},Ym=function(n,t){var e=q(n,function(n){return q(n.cells,B)}),r=function(n,t,r,o){for(var u=n;u<n+r;u++)for(var i=t;i<t+o;i++)e[u][i]=!0};return q(n,function(o,u){var i=en(o.cells,function(o,i){if(!1===e[u][i]){var c=Xm(n,u,i,t);return r(u,i,c.rowspan,c.colspan),[te(o.element,c.rowspan,c.colspan,o.isNew)]}return[]});return oe(o.element,i,o.section,o.isNew)})},Jm=function(n,t,e){var r=[];G(n.colgroups,function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=To.getColumnAt(n,i).map(function(n){return ue(n.element,e,!1)}).getOrThunk(function(){return ue(t.colGap(),!0,!1)});u.push(c)}r.push(ie(o.element,u,"colgroup",e))});for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=To.getAt(n,o,i).map(function(n){return ue(n.element,e,n.isLocked)}).getOrThunk(function(){return ue(t.gap(),!0,!1)});u.push(c)}var a=n.all[o],l=ie(a.element,u,a.section,e);r.push(l)}return r},Qm=function(n,t){return Jm(n,t,!1)},Zm=function(n){return Ym(n,It)},nd=function(n,t){return mn(n.all,function(n){return Z(n.cells,function(n){return It(t,n.element)})})},td=function(n,t,e){var r=q(t.selection,function(t){return Hr(t).bind(function(t){return nd(n,t)}).filter(e)}),o=br(r);return Cr(o.length>0,o)},ed=function(n,t,e,r,o){return function(u,i,c,a,l){var f=To.fromTable(i),s=L.from(null==l?void 0:l.section).getOrThunk(jm.fallback),m=t(f,c).map(function(t){var e=Qm(f,a),r=n(e,t,It,o(a),s),u=fo(r.grid),i=Zm(r.grid);return{info:t,grid:i,cursor:r.cursor,lockedColumns:u}});return m.bind(function(n){var t=Um(i,n.grid),o=L.from(null==l?void 0:l.sizing).getOrThunk(function(){return Oc.getTableSize(i)}),c=L.from(null==l?void 0:l.resize).getOrThunk(ll);return e(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),ns(u,i),gr(i,ao),n.lockedColumns.length>0&&lr(i,ao,n.lockedColumns.join(",")),L.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})})}},rd=function(n,t){return Hr(t.element).bind(function(e){return nd(n,e).map(function(n){var e=dn(dn({},n),{generators:t.generators,clipboard:t.clipboard});return e})})},od=function(n,t){return td(n,t,E).map(function(n){return{cells:n,generators:t.generators,clipboard:t.clipboard}})},ud=function(n,t){return t.mergable},id=function(n,t){return t.unmergable},cd=function(n,t){return td(n,t,E)},ad=function(n,t){return td(n,t,function(n){return!n.isLocked})},ld=function(n,t){return nd(n,t).exists(function(n){return!n.isLocked})},fd=function(n,t){return rn(t,function(t){return ld(n,t)})},sd=function(n,t){return ud(n,t).filter(function(t){return fd(n,t.cells)})},md=function(n,t){return id(n,t).filter(function(t){return fd(n,t)})},dd=function(n,t,e,r){var o=io(n).rows;if(0===o.length)return n;for(var u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++){var c=o[u],a=ro(c,i).isLocked;no(c,i,ue(r(),!1,a))}return n},gd=function(n,t,e,r){for(var o=io(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<uo(o[0]);c++){var a=o[i],l=ro(a,c),f=l.element,s=e(f,t);!0===s&&!1===u?no(a,c,ue(r(),!0,l.isLocked)):!0===s&&(u=!1)}return n},pd=function(n,t){return J(n,function(n,e){return V(n,function(n){return t(n.element,e.element)})?n:n.concat([e])},[])},vd=function(n,t,e,r){return t>0&&t<n[0].cells.length&&G(n,function(n){var o=n.cells[t-1],u=n.cells[t],i=e(u.element,o.element);i&&no(n,t,ue(r(),!0,u.isLocked))}),n},bd=function(n,t,e,r){var o=io(n).rows;if(t>0&&t<o.length){var u=o[t-1].cells,i=pd(u,e);G(i,function(n){for(var u=L.none(),i=t;i<o.length;i++)for(var c=function(t){var c=o[i],a=ro(c,t),l=e(a.element,n.element);l&&(u.isNone()&&(u=L.some(r())),u.each(function(n){no(c,t,ue(n,!0,a.isLocked))}))},a=0;a<uo(o[0]);a++)c(a)})}return n},hd=function(n){var t=function(t){return hd(n)},e=function(t){return hd(n)},r=function(t){return hd(t(n))},o=function(t){return hd(n)},u=function(t){t(n)},i=function(t){return t(n)},c=function(t,e){return e(n)},a=function(t){return t(n)},l=function(t){return t(n)},f=function(){return L.some(n)};return{isValue:E,isError:B,getOr:D(n),getOrThunk:D(n),getOrDie:D(n),or:t,orThunk:e,fold:c,map:r,mapError:o,each:u,bind:i,exists:a,forall:l,toOptional:f}},wd=function(n){var t=function(n){return n()},e=function(){return I(String(n))()},r=O,o=function(n){return n()},u=function(t){return wd(n)},i=function(t){return wd(t(n))},c=function(t){return wd(n)},a=function(t,e){return t(n)};return{isValue:B,isError:E,getOr:O,getOrThunk:t,getOrDie:e,or:r,orThunk:o,fold:a,map:u,mapError:i,each:T,bind:c,exists:B,forall:E,toOptional:L.none}},yd=function(n,t){return n.fold(function(){return wd(t)},hd)},Cd={value:hd,error:wd,fromOption:yd},Sd=function(n,t,e){if(n.row>=t.length||n.column>uo(t[0]))return Cd.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),o=r[0].cells.slice(n.column),u=uo(e[0]),i=e.length;return Cd.value({rowDelta:r.length-i,colDelta:o.length-u})},Td=function(n,t){var e=uo(n[0]),r=uo(t[0]);return{rowDelta:0,colDelta:e-r}},xd=function(n,t){var e=n.length,r=t.length;return{rowDelta:e-r,colDelta:0}},Rd=function(n,t,e,r){var o="colgroup"===t.section?e.col:e.cell;return U(n,function(n){return ue(o(),!0,r(n))})},Dd=function(n,t,e,r){var o=n[n.length-1];return n.concat(U(t,function(){var n="colgroup"===o.section?e.colgroup:e.row,t=co(o,n,O),u=Rd(t.cells.length,t,e,function(n){return $t(r,n.toString())});return to(t,u)}))},Od=function(n,t,e,r){return q(n,function(n){var o=Rd(t,n,e,B);return Qr(n,r,o)})},Ad=function(n,t,e){return q(n,function(n){return J(e,function(e,r){var o=Rd(1,n,t,E)[0];return Zr(e,r,o)},n)})},kd=function(n,t,e){var r=t.colDelta<0?Od:O,o=t.rowDelta<0?Dd:O,u=fo(n),i=uo(n[0]),c=V(u,function(n){return n===i-1}),a=r(n,Math.abs(t.colDelta),e,c?i-1:i),l=fo(a);return o(a,Math.abs(t.rowDelta),e,un(l,E))},Id=function(t,e,r,o){var u=ro(t[e],r),i=n(o,u.element),c=t[e];return t.length>1&&uo(c)>1&&(r>0&&i(oo(c,r-1))||r<c.cells.length-1&&i(oo(c,r+1))||e>0&&i(oo(t[e-1],r))||e<t.length-1&&i(oo(t[e+1],r)))},Bd=function(n,t,e,r,o,u){for(var i=n.row,c=n.column,a=e.length,l=uo(e[0]),f=i+a,s=c+l+u.length,m=un(u,E),d=i;d<f;d++)for(var g=0,p=c;p<s;p++)if(m[p])g++;else{Id(t,d,p,o)&&gd(t,oo(t[d],p),o,r.cell);var v=p-c-g,b=ro(e[d-i],v),h=b.element,w=r.replace(h);no(t[d],p,ue(w,!0,b.isLocked))}return t},Ed=function(n,t,e){var r=uo(t[0]),o=io(t).cols.length+n.row,u=U(r-n.column,function(t){return t+n.column}),i=Z(u,function(n){return rn(e,function(t){return t!==n})}).getOr(r-1);return{row:o,column:i}},Md=function(n,t,e){return X(e,function(e){return e>=n.column&&e<=uo(t[0])+n.column})},Pd=function(n,t,e,r,o){var u=fo(t),i=Ed(n,t,u),c=io(e).rows,a=Md(i,c,u),l=Sd(i,t,c);return l.map(function(n){var e=dn(dn({},n),{colDelta:n.colDelta-a.length}),u=kd(t,e,r),l=fo(u),f=Md(i,c,l);return Bd(i,u,c,r,o,f)})},Nd=function(n,t,e,r,o){vd(t,n,o,r.cell);var u=xd(e,t),i=kd(e,u,r),c=xd(t,i),a=kd(t,c,r);return q(a,function(t,e){return Qr(t,n,i[e].cells)})},zd=function(n,t,e,r,o){bd(t,n,o,r.cell);var u=fo(t),i=Td(t,e),c=dn(dn({},i),{colDelta:i.colDelta-u.length}),a=kd(t,c,r),l=io(a),f=l.cols,s=l.rows,m=fo(a),d=Td(e,t),g=dn(dn({},d),{colDelta:d.colDelta+m.length}),p=Ad(e,r,m),v=kd(p,g,r);return f.concat(s.slice(0,n)).concat(v).concat(s.slice(n,s.length))},Ld=function(n,t,e,r){return co(n,function(n){return r(n,e)},t)},_d=function(n,t,e,r,o){var u=io(n),i=u.rows,c=u.cols,a=i.slice(0,t),l=i.slice(t),f=Ld(i[e],function(n,e){var u=t>0&&t<i.length&&r(oo(i[t-1],e),oo(i[t],e)),c=u?ro(i[t],e):ue(o(n.element,r),!0,n.isLocked);return c},r,o);return c.concat(a).concat([f]).concat(l)},Wd=function(n,t,e,r,o,u,i){if("colgroup"!==e&&r)return ro(n,t);var c=ro(n,o);return ue(i(c.element,u),!0,!1)},jd=function(n,t,e,r,o){return q(n,function(n){var u=t>0&&t<uo(n)&&r(oo(n,t-1),oo(n,t)),i=Wd(n,t,n.section,u,e,r,o);return Zr(n,t,i)})},Fd=function(n,t){return en(n,function(n){var e=n.cells,r=Y(t,function(n,t){return t>=0&&t<n.length?n.slice(0,t).concat(n.slice(t+1)):n},e);return r.length>0?[ie(n.element,r,n.section,n.isNew)]:[]})},Hd=function(n,t,e){var r=io(n),o=r.rows,u=r.cols;return u.concat(o.slice(0,t)).concat(o.slice(e+1))},Vd=function(n,t,e,r){return void 0!==oo(n[t],e)&&t>0&&r(oo(n[t-1],e),oo(n[t],e))},Ud=function(n,t,e){return t>0&&e(oo(n,t-1),oo(n,t))},qd=function(n,t,e,r){return Vd(n,t,e,r)||Ud(n[t],e,r)},Gd=function(n,t){var e=rn(t,O)&&Om(n.cells);return e?E:function(n,e,r){var o=be(n.element);return!("th"===o&&t[r])}},$d=function(n,t){var e=rn(t,O)&&Om(n);return e?E:function(n,e,r){var o=be(n.element);return!("th"===o&&t[e])}},Kd=function(n,t,e,r){var o=function(n){return"row"===n?Nr(t):Pr(t)},u=function(n){return o(n)?n+"group":n};if(n)return Dm(t)?u(e):null;if(r&&Dm(t)){var i="row"===e?"col":"row";return u(i)}return null},Xd=function(n,t){return function(e,r,o){return L.some(Kd(n,e.element,"col",t[o]))}},Yd=function(n,t){return function(e,r){return L.some(Kd(n,e.element,"row",t[r]))}},Jd=function(n,t,e){return ue(e(n.element,t),!0,n.isLocked)},Qd=function(n,t,e,r,o,u,i){var c=function(n){return V(t,function(t){return e(n.element,t.element)})};return q(n,function(n,t){return eo(n,function(n,a){if(c(n)){var l=i(n,t,a)?o(n,e,r):n;return u(l,t,a).each(function(n){sr(l.element,{scope:L.from(n)})}),l}return n})})},Zd=function(n,t,e){return en(n,function(r,o){return qd(n,o,t,e)?[]:[ro(r,t)]})},ng=function(n,t,e){var r=n[t];return en(r.cells,function(r,o){return qd(n,t,o,e)?[]:[r]})},tg=function(n,t,e,r,o){var u=io(n).rows,i=en(t,function(n){return Zd(u,n,r)}),c=q(n,function(n){return Om(n.cells)}),a=$d(i,c),l=Yd(e,c);return Qd(n,i,r,o,Jd,l,a)},eg=function(n,e,r,o,u,i,c){var a=io(n),l=a.cols,f=a.rows,s=f[e[0]],m=en(e,function(n){return ng(f,n,u)}),d=q(s.cells,function(n,t){return Om(Zd(f,t,u))}),g=t([],f,!0);G(e,function(n){g[n]=c.transformRow(f[n],r)});var p=l.concat(g),v=Gd(s,d),b=Xd(o,d);return Qd(p,m,u,i,c.transformCell,b,v)},rg=function(n,t,e,r){var o=io(n).rows,u=q(t,function(n){return ro(o[n.row],n.column)});return Qd(n,u,e,r,Jd,L.none,E)},og=function(n){var t=function(n,t){var e=V(n,function(n){return n.column===t.column});return e?n:n.concat([t])};return J(n,t,[]).sort(function(n,t){return n.column-t.column})},ug=Re("col"),ig=Re("colgroup"),cg=function(n){return"tr"===be(n)||ig(n)},ag=function(n){var t=Er(n,"colspan",1),e=Er(n,"rowspan",1);return{element:n,colspan:t,rowspan:e}},lg=function(n,t){void 0===t&&(t=ag);var e=function(t){return ug(t.element)?n.col(t):n.cell(t)},r=function(t){return ig(t.element)?n.colgroup(t):n.row(t)},o=function(n){if(cg(n))return r({element:n});var o=e(t(n));return u=L.some({item:n,replacement:o}),o},u=L.none(),i=function(n,t){return u.fold(function(){return o(n)},function(e){return t(n,e.item)?e.replacement:o(n)})};return{getOrInit:i}},fg=function(n){return function(t){var e=[],r=function(n,t){return Z(e,function(e){return t(e.item,n)})},o=function(r){var o="td"===n?{scope:null}:{},u=t.replace(r,n,o);return e.push({item:r,sub:u}),u},u=function(n,t){return cg(n)||ug(n)?n:r(n,t).fold(function(){return o(n)},function(e){return t(n,e.item)?e.sub:o(n)})};return{replaceOrInit:u}}},sg=function(n){return dr(n,"scope").map(function(n){return n.substr(0,3)})},mg=function(n){var t=function(t){var e=sg(t);return e.each(function(n){return lr(t,"scope",n)}),function(){var r=n.cell({element:t,colspan:1,rowspan:1});return Ir(r,"width"),Ir(t,"width"),e.each(function(n){return lr(r,"scope",n)}),r}},e=function(n){var t=function(){var t=br(q(n,sg));if(0===t.length)return L.none();var e=t[0],r=["row","col"],o=V(t,function(n){return n!==e&&H(r,n)});return o?L.none():L.from(e)};return Ir(n[0],"width"),t().fold(function(){return gr(n[0],"scope")},function(t){return lr(n[0],"scope",t+"group")}),D(n[0])};return{unmerge:t,merge:e}},dg={modification:lg,transform:fg,merging:mg},gg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],pg=function(n,t){var e=n.property().name(t);return H(["ol","ul"],e)},vg=function(n,t){var e=n.property().name(t);return H(gg,e)},bg=function(n,t){return H(["br","img","hr","input"],n.property().name(t))},hg=r(),wg=function(n){return vg(hg,n)},yg=function(n){return pg(hg,n)},Cg=function(n){return bg(hg,n)},Sg=function(n){var t=function(n){return"br"===be(n)},e=function(n){return rn(n,function(n){return t(n)||Se(n)&&0===Qo(n).trim().length})},r=function(n){return"li"===be(n)||nr(n,yg).isSome()},o=function(n){return Me(n).map(function(n){return!!wg(n)||!!Cg(n)&&"img"!==be(n)}).getOr(!1)},u=function(n){return Fc(n).bind(function(e){var u=o(e);return ke(e).map(function(o){return!0===u||r(o)||t(e)||wg(o)&&!It(n,o)?[]:[Rt.fromTag("br")]})}).getOr([])},i=function(){var t=en(n,function(n){var t=Pe(n);return e(t)?[]:t.concat(u(n))});return 0===t.length?[Rt.fromTag("br")]:t},c=i();$o(n[0]),Go(n[0],c)},Tg=function(n){return Nf(n,!0)},xg=function(n){var t=Vr(n);0===t.length&&Ko(n)},Rg=function(n,t){return{grid:n,cursor:t}},Dg=function(n){return mn(n,function(n){return mn(n.cells,function(n){var t=n.element;return Cr(Tg(t),t)})})},Og=function(n,t,e){var r,o,u=io(n).rows;return L.from(null===(o=null===(r=u[t])||void 0===r?void 0:r.cells[e])||void 0===o?void 0:o.element).filter(Tg).orThunk(function(){return Dg(u)})},Ag=function(n,t,e){var r=Og(n,t,e);return Rg(n,r)},kg=function(n){var t=function(n,t){var e=V(n,function(n){return n.row===t.row});return e?n:n.concat([t])};return J(n,t,[]).sort(function(n,t){return n.row-t.row})},Ig=function(n,t,e,r){var o=t[0].row,u=kg(t),i=Y(u,function(n,t){var u=_d(n.grid,o,t.row+n.delta,e,r.getOrInit);return{grid:u,delta:n.delta+1}},{grid:n,delta:0}).grid;return Ag(i,o,t[0].column)},Bg=function(n,t,e,r){var o=kg(t),u=o[o.length-1],i=u.row+u.rowspan,c=Y(o,function(n,t){return _d(n,i,t.row,e,r.getOrInit)},n);return Ag(c,i,t[0].column)},Eg=function(n,t,e,r){var o=t.details,u=og(o),i=u[0].column,c=Y(u,function(n,t){var o=jd(n.grid,i,t.column+n.delta,e,r.getOrInit);return{grid:o,delta:n.delta+1}},{grid:n,delta:0}).grid;return Ag(c,o[0].row,i)},Mg=function(n,t,e,r){var o=t.details,u=o[o.length-1],i=u.column+u.colspan,c=og(o),a=Y(c,function(n,t){return jd(n,i,t.column,e,r.getOrInit)},n);return Ag(a,o[0].row,i)},Pg=function(n,t,e,r){var o=og(t),u=q(o,function(n){return n.column}),i=tg(n,u,!0,e,r.replaceOrInit);return Ag(i,t[0].row,t[0].column)},Ng=function(n,t,e,r){var o=rg(n,t,e,r.replaceOrInit);return Ag(o,t[0].row,t[0].column)},zg=function(n,t,e,r){var o=og(t),u=q(o,function(n){return n.column}),i=tg(n,u,!1,e,r.replaceOrInit);return Ag(i,t[0].row,t[0].column)},Lg=function(n,t,e,r){var o=rg(n,t,e,r.replaceOrInit);return Ag(o,t[0].row,t[0].column)},_g=function(n,t){return function(e,r,o,u,i){var c=kg(r),a=q(c,function(n){return n.row}),l=eg(e,a,n,t,o,u.replaceOrInit,i);return Ag(l,r[0].row,r[0].column)}},Wg=_g("thead",!0),jg=_g("tbody",!1),Fg=_g("tfoot",!1),Hg=function(n,t,e,r){var o=og(t.details),u=Fd(n,q(o,function(n){return n.column})),i=u.length>0?u[0].cells.length-1:0;return Ag(u,o[0].row,Math.min(o[0].column,i))},Vg=function(n,t,e,r){var o=kg(t),u=Hd(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return Ag(u,Math.min(t[0].row,i),t[0].column)},Ug=function(n,t,e,r){var o=t.cells;Sg(o);var u=dd(n,t.bounds,e,r.merge(o));return Rg(u,L.from(o[0]))},qg=function(n,t,e,r){var o=function(n,t){return gd(n,t,e,r.unmerge(t))},u=Y(t,o,n);return Rg(u,L.from(t[0]))},Gg=function(n,t,e,r){var o=function(n,t){var e=To.fromTable(n);return Jm(e,t,!0)},u=o(t.clipboard,t.generators),i=Zt(t.row,t.column),c=Pd(i,n,u,t.generators,e);return c.fold(function(){return Rg(n,L.some(t.element))},function(n){return Ag(n,t.row,t.column)})},$g=function(n,t,e){var r=Jr(n,e.section),o=To.generate(r);return Jm(o,t,!0)},Kg=function(n,t,e,r){var o=io(n).rows,u=t.cells[0].column,i=o[t.cells[0].row],c=$g(t.clipboard,t.generators,i),a=Nd(u,n,c,t.generators,e);return Ag(a,t.cells[0].row,t.cells[0].column)},Xg=function(n,t,e,r){var o=io(n).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],c=$g(t.clipboard,t.generators,i),a=Nd(u,n,c,t.generators,e);return Ag(a,t.cells[0].row,t.cells[0].column)},Yg=function(n,t,e,r){var o=io(n).rows,u=t.cells[0].row,i=o[u],c=$g(t.clipboard,t.generators,i),a=zd(u,n,c,t.generators,e);return Ag(a,t.cells[0].row,t.cells[0].column)},Jg=function(n,t,e,r){var o=io(n).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],c=$g(t.clipboard,t.generators,i),a=zd(u,n,c,t.generators,e);return Ag(a,t.cells[0].row,t.cells[0].column)},Qg=function(n,t){var e=To.fromTable(n),r=cd(e,t);return r.bind(function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=tn(q(e.all,function(n){return X(n.cells,function(n){return n.column>=r&&n.column<o})}));return Im(u)}).getOr("")},Zg=function(n,t){var e=To.fromTable(n),r=cd(e,t);return r.bind(Im).getOr("")},np=function(n,t){var e=To.fromTable(n),r=cd(e,t);return r.bind(function(n){var t=n[n.length-1],r=n[0].row,o=t.row+t.rowspan,u=e.all.slice(r,o);return Bm(u)}).getOr("")},tp=function(n,t,e,r){return el(n,t,e,r.sizing)},ep=function(n,t,e,r){return tl(n,t,e,r.sizing,r.resize)},rp=function(n,t){return V(t,function(n){return 0===n.column&&n.isLocked})},op=function(n,t){return V(t,function(t){return t.column+t.colspan>=n.grid.columns&&t.isLocked})},up=function(n,t){var e=Zu(n),r=og(t);return J(r,function(n,t){var r=e[t.column],o=r.map(Yu).getOr(0);return n+o},0)},ip=function(n){return function(t,e){return cd(t,e).filter(function(e){var r=n?rp:op;return!r(t,e)}).map(function(n){return{details:n,pixelDelta:up(t,n)}})}},cp=function(n,t){return ad(n,t).map(function(t){return{details:t,pixelDelta:-up(n,t)}})},ap=function(n){return function(t,e){return od(t,e).filter(function(e){var r=n?rp:op;return!r(t,e.cells)})}},lp=dg.transform("th"),fp=dg.transform("td"),sp=ed(Ig,cd,T,T,dg.modification),mp=ed(Bg,cd,T,T,dg.modification),dp=ed(Eg,ip(!0),ep,T,dg.modification),gp=ed(Mg,ip(!1),ep,T,dg.modification),pp=ed(Hg,cp,ep,xg,dg.modification),vp=ed(Vg,cd,T,xg,dg.modification),bp=ed(Pg,ad,T,T,lp),hp=ed(zg,ad,T,T,fp),wp=ed(Wg,ad,T,T,lp),yp=ed(jg,ad,T,T,fp),Cp=ed(Fg,ad,T,T,fp),Sp=ed(Ng,ad,T,T,lp),Tp=ed(Lg,ad,T,T,fp),xp=ed(Ug,sd,tp,T,dg.merging),Rp=ed(qg,md,tp,T,dg.merging),Dp=ed(Gg,rd,tp,T,dg.modification),Op=ed(Kg,ap(!0),T,T,dg.modification),Ap=ed(Xg,ap(!1),T,T,dg.modification),kp=ed(Yg,od,T,T,dg.modification),Ip=ed(Jg,od,T,T,dg.modification),Bp=Qg,Ep=Zg,Mp=np,Pp=function(n,t,e){var r=function(n){return"table"===be(ra(n))},o=function(t){return!1===r(n)||zl(t).rows>1},u=function(t){return!1===r(n)||zl(t).columns>1},i=Zs(n),c=Qs(n)?T:Rm,a=function(t){switch(Xs(n)){case"section":return jm.section();case"sectionCells":return jm.sectionCells();case"cells":return jm.cells();default:return jm.getTableSectionType(t,"section")}},l=function(e,r){return r.cursor.fold(function(){var r=Vr(e);return fn(r).filter(qe).map(function(r){t.clear(e);var o=n.dom.createRng();return o.selectNode(r.dom),n.selection.setRng(o),lr(r,"data-mce-selected","1"),o})},function(r){var o=xm(r),u=n.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),n.selection.setRng(u),t.clear(e),L.some(u)})},f=function(t,e,r,o,u){return function(c,f,s){void 0===s&&(s=!1),la(c);var m=o(),d=Rt.fromDom(n.getDoc()),g=Qc(r,d,i),p={sizing:rm(n,c),resize:Qs(n)?al():ll(),section:a(c)};return e(c)?t(m,c,f,g,p).bind(function(t){G(t.newRows,function(t){fs(n,t.dom)}),G(t.newCells,function(t){ss(n,t.dom)});var e=l(c,t);return qe(c)&&(la(c),s||vs(n,c.dom,u)),e.map(function(n){return{rng:n,effect:u}})}):L.none()}},s=f(vp,o,T,e,hs),m=f(pp,u,T,e,hs),d=f(sp,E,T,e,hs),g=f(mp,E,T,e,hs),p=f(dp,E,c,e,hs),v=f(gp,E,c,e,hs),b=f(xp,E,T,e,hs),h=f(Rp,E,T,e,hs),w=f(Op,E,T,e,hs),y=f(Ap,E,T,e,hs),C=f(kp,E,T,e,hs),S=f(Ip,E,T,e,hs),x=f(Dp,E,T,e,ws),R=f(Sp,E,T,e,hs),D=f(Tp,E,T,e,hs),O=f(bp,E,T,e,hs),A=f(hp,E,T,e,hs),k=f(wp,E,T,e,hs),I=f(yp,E,T,e,hs),B=f(Cp,E,T,e,hs),M=Ep,P=Bp,N=Mp;return{deleteRow:s,deleteColumn:m,insertRowsBefore:d,insertRowsAfter:g,insertColumnsBefore:p,insertColumnsAfter:v,mergeCells:b,unmergeCells:h,pasteColsBefore:w,pasteColsAfter:y,pasteRowsBefore:C,pasteRowsAfter:S,pasteCells:x,makeCellsHeader:R,unmakeCellsHeader:D,makeColumnsHeader:O,unmakeColumnsHeader:A,makeRowsHeader:k,makeRowsBody:I,makeRowsFooter:B,getTableRowType:N,getTableCellType:M,getTableColType:P}},Np={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},zp=function(){return Rt.fromTag("th")},Lp=function(){return Rt.fromTag("td")},_p=function(){return Rt.fromTag("col")},Wp=function(n,t,e,r){for(var o=Rt.fromTag("tr"),u=0;u<n;u++){var i=r<t||u<e?zp():Lp();u<e&&lr(i,"scope","row"),r<t&&lr(i,"scope","col"),Fo(i,Rt.fromTag("br")),Fo(o,i)}return o},jp=function(n){var t=Rt.fromTag("colgroup");return U(n,function(){return Fo(t,_p())}),t},Fp=function(n,t,e,r){return U(n,function(n){return Wp(t,e,r,n)})},Hp=function(n,t,e,r,o,u){void 0===u&&(u=Np);var i=Rt.fromTag("table"),c="cells"!==o
;Dr(i,u.styles),fr(i,u.attributes),u.colGroups&&Fo(i,jp(t));var a=Math.min(n,e);if(c&&e>0){var l=Rt.fromTag("thead");Fo(i,l);var f="sectionCells"===o?a:0,s=Fp(e,t,f,r);Go(l,s)}var m=Rt.fromTag("tbody");Fo(i,m);var d=c?n-a:n,g=c?0:e,p=Fp(d,t,g,r);return Go(m,p),i},Vp=function(n){return n.dom.innerHTML},Up=function(n){var t=Rt.fromTag("div"),e=Rt.fromDom(n.dom.cloneNode(!0));return Fo(t,e),Vp(t)},qp=function(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)},Gp=function(t,e){ir(e,"td,th").each(n(qp,t))},$p=function(n,t){G(Ze(t,"tr"),function(t){fs(n,t.dom),G(Ze(t,"th,td"),function(t){ss(n,t.dom)})})},Kp=function(n){return d(n)&&-1!==n.indexOf("%")},Xp=function(n,t,e,r,o){var u=Es(n),i={styles:u,attributes:Bs(n),colGroups:Ks(n)};return n.undoReceptionist.ignore(function(){var u=Hp(e,t,o,r,Xs(n),i);lr(u,"data-mce-id","__mce");var c=Up(u);n.insertContent(c),n.addVisual()}),ir(ra(n),'table[data-mce-id="__mce"]').map(function(t){return qs(n)?lm(t):Gs(n)?fm(t):(Us(n)||Kp(u.width))&&am(t),la(t),gr(t,"data-mce-id"),$p(n,t),Gp(n,t),t.dom}).getOr(null)},Yp=function(n,t,e,r,o){void 0===r&&(r={});var u=function(n){return S(n)&&n>0};if(u(t)&&u(e)){var i=r.headerRows||0,c=r.headerColumns||0;return Xp(n,e,t,c,i)}return console.error(o),null},Jp=function(n){return function(){return n().fold(function(){return[]},function(n){return q(n,function(n){return n.dom})})}},Qp=function(n){return function(t){var e=t.length>0?L.some(ta(t)):L.none();n(e)}},Zp=function(n){return function(t,e,r){void 0===r&&(r={});var o=Yp(n,e,t,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoReceptionist.add(),o}},nv=function(n,t,e,r){return{insertTable:Zp(n),setClipboardRows:Qp(t.setRows),getClipboardRows:Jp(t.getRows),setClipboardCols:Qp(t.setColumns),getClipboardCols:Jp(t.getColumns),resizeHandler:e,selectionTargets:r}},tv=function(n,t,e){var r=Er(n,t,1);1===e||r<=1?gr(n,t):lr(n,t,Math.min(e,r))},ev=function(n,t,e){if(To.hasColumns(n)){var r=X(To.justColumns(n),function(n){return n.column>=t&&n.column<e}),o=q(r,function(n){var r=Mu(n.element);return tv(r,"span",e-t),r}),u=Rt.fromTag("colgroup");return Go(u,o),[u]}return[]},rv=function(n,t,e){return q(n.all,function(n){var r=X(n.cells,function(n){return n.column>=t&&n.column<e}),o=q(r,function(n){var r=Mu(n.element);return tv(r,"colspan",e-t),r}),u=Rt.fromTag("tr");return Go(u,o),u})},ov=function(n,e){var r=To.fromTable(n),o=ad(r,e);return o.map(function(n){var e=n[n.length-1],o=n[0].column,u=e.column+e.colspan,i=ev(r,o,u),c=rv(r,o,u);return t(t([],i,!0),c,!0)})},uv=function(n,t,e){var r=To.fromTable(n),o=cd(r,t);return o.bind(function(n){var t=Jm(r,e,!1),o=io(t).rows,u=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),i=en(u,function(n){var t=X(n.cells,function(n){return!n.isLocked});return t.length>0?[dn(dn({},n),{cells:t})]:[]}),c=Zm(i);return Cr(c.length>0,c)}).map(function(n){return qm(n)})},iv=tinymce.util.Tools.resolve("tinymce.util.Tools"),cv=function(n,t,e){var r,o=n.select("td,th",t),u=function(t,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],e);if(void 0===t&&(t=u),t!==u)return""}return t};return u(r,o)},av=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},lv=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},fv=function(n,t){iv.each("left center right".split(" "),function(e){n.formatter.remove("align"+e,{},t)})},sv=function(n,t){iv.each("top middle bottom".split(" "),function(e){n.formatter.remove("valign"+e,{},t)})},mv=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],dv=function(n){return{value:n}},gv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,vv=function(n){return gv.test(n)||pv.test(n)},bv=function(n){return An(n,"#").toUpperCase()},hv=function(n){return vv(n)?L.some({value:bv(n)}):L.none()},wv=function(n){var t=n.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},yv=function(n){var t=wv(n.red)+wv(n.green)+wv(n.blue);return dv(t)},Cv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Sv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Tv=function(n,t,e,r){return{red:n,green:t,blue:e,alpha:r}},xv=function(n,t,e,r){var o=parseInt(n,10),u=parseInt(t,10),i=parseInt(e,10),c=parseFloat(r);return Tv(o,u,i,c)},Rv=function(n){if("transparent"===n)return L.some(Tv(0,0,0,0));var t=Cv.exec(n);if(null!==t)return L.some(xv(t[1],t[2],t[3],"1"));var e=Sv.exec(n);return null!==e?L.some(xv(e[1],e[2],e[3],e[4])):L.none()},Dv=function(n){return hv(n).orThunk(function(){return Rv(n).map(yv)}).getOrThunk(function(){var t=document.createElement("canvas");t.height=1,t.width=1;var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.fillStyle="#FFFFFF",e.fillStyle=n,e.fillRect(0,0,1,1);var r=e.getImageData(0,0,1,1).data,o=r[0],u=r[1],i=r[2],c=r[3];return yv(Tv(o,u,i,c))})},Ov=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},Av=function(n){var t=Ov(L.none()),e=function(){return t.get().each(n)},r=function(){e(),t.set(L.none())},o=function(){return t.get().isSome()},u=function(){return t.get()},i=function(n){e(),t.set(L.some(n))};return{clear:r,isSet:o,get:u,set:i}},kv=function(){return Av(function(n){return n.unbind()})},Iv=function(){var n=Av(T),t=function(t){return n.get().each(t)};return dn(dn({},n),{on:t})},Bv=function(n,t,e,r){return function(o){var u=kv(),i=Nn(r),c=function(){var c=Na(t),a=function(t){return n.formatter.match(e,{value:r},t.dom,i)};i?(o.setActive(!V(c,a)),u.set(n.formatter.formatChanged(e,function(n){return o.setActive(!n)},!0))):(o.setActive(rn(c,a)),u.set(n.formatter.formatChanged(e,o.setActive,!1,{value:r})))};return n.initialized?c():n.on("init",c),u.clear}},Ev=function(n){return Kt(n,"menu")},Mv=function(n){return q(n,function(n){var t=n.text||n.title;return Ev(n)?{text:t,items:Mv(n.menu)}:{text:t,value:n.value}})},Pv=function(n,t,e,r,o){return q(e,function(e){var u=e.text||e.title;return Ev(e)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return Pv(n,t,e.menu,r,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(e.value)},onSetup:Bv(n,t,r,e.value)}})},Nv=function(n,t){return function(e){var r;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[t]=e,r))}},zv=function(n){return en(n,function(n){return Ev(n)?[dn(dn({},n),{menu:zv(n.menu)})]:Pn(n.value)?[n]:[]})},Lv=function(n,t,e,r,o){return function(u){return u(Pv(n,t,e,r,o))}},_v=function(n,t,e){var r=q(t,function(n){return{text:n.title,value:"#"+Dv(n.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(t){var r,o="remove"===t.value?"":t.value;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[e]=o,r))}}]},Wv=function(n){return function(){var t=n.queryCommandValue("mceTableRowType"),e="header"===t?"body":"header";n.execCommand("mceTableRowType",!1,{type:e})}},jv=function(n){return function(){var t=n.queryCommandValue("mceTableColType"),e="th"===t?"td":"th";n.execCommand("mceTableColType",!1,{type:e})}},Fv=function(n){var t=Mv(Fs(n));return t.length>0?L.some({name:"class",type:"listbox",label:"Class",items:t}):L.none()},Hv=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:mv}],Vv=function(n){return Hv.concat(Fv(n).toArray())},Uv=function(n,t){var e=[{text:"Select...",value:""}],r=[{name:"borderstyle",type:"listbox",label:"Border style",items:e.concat(Mv(Is(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},u="cell"===t?[o].concat(r):r;return{title:"Advanced",name:"advanced",items:u}},qv=function(n){return function(t,e){var r=t.dom,o=function(t,o){n&&!o||r.setAttrib(e,t,o)},u=function(t,o){n&&!o||r.setStyle(e,t,o)},i=function(r,o){n&&!o||(""===o?t.formatter.remove(r,{value:null},e,!0):t.formatter.apply(r,{value:o},e))};return{setAttrib:o,setStyle:u,setFormat:i}}},Gv={normal:qv(!1),ifTruthy:qv(!0)},$v=function(n){return function(t){return In(t,"rgb")?n.toHex(t):t}},Kv=function(n,t){var e=Rt.fromDom(t);return{borderwidth:kr(e,"border-width").getOr(""),borderstyle:kr(e,"border-style").getOr(""),bordercolor:kr(e,"border-color").map($v(n)).getOr(""),backgroundcolor:kr(e,"background-color").map($v(n)).getOr("")}},Xv=function(n){var t=n[0],e=n.slice(1);return G(e,function(n){G(Nt(t),function(e){Lt(n,function(n,r){var o=t[e];""!==o&&e===r&&o!==n&&(t[e]="")})})}),t},Yv=function(n,t,e,r){return Z(n,function(n){return!h(e.formatter.matchNode(r,t+n))}).getOr("")},Jv=n(Yv,["left","center","right"],"align"),Qv=n(Yv,["top","middle","bottom"],"valign"),Zv=function(n,t){var e=Es(n),r=Bs(n),o=function(n){return{borderstyle:Gt(e,"border-style").getOr(""),bordercolor:$v(n)(Gt(e,"border-color").getOr("")),backgroundcolor:$v(n)(Gt(e,"background-color").getOr(""))}},u={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var t=e["border-width"];return js(n)&&t?{border:t}:Gt(r,"border").fold(function(){return{}},function(n){return{border:n}})},c=t?o(n.dom):{},a=function(){var n=Gt(e,"border-spacing").or(Gt(r,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),t=Gt(e,"border-padding").or(Gt(r,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}});return dn(dn({},n),t)},l=dn(dn(dn(dn(dn(dn({},u),e),r),c),i()),a());return l},nb=function(n){return qr(Rt.fromDom(n)).map(function(t){var e={selection:ta(n.cells)};return Mp(t,e)}).getOr("")},tb=function(n,t,e){var r=function(t,e){var r=kr(Rt.fromDom(e),"border-width");return js(n)&&r.isSome()?r.getOr(""):t.getAttrib(e,"border")||cv(n.dom,e,"border-width")||cv(n.dom,e,"border")},o=n.dom,u=js(n)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),i=js(n)?cv(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||cv(o,t,"padding");return dn({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:u,cellpadding:i,border:r(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Jv(n,t)},e?Kv(o,t):{})},eb=function(n,t,e){var r=n.dom;return dn({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:nb(t),align:Jv(n,t)},e?Kv(r,t):{})},rb=function(n,t,e,r){var o=n.dom,u=r.getOr(t),i=function(n,t){return o.getStyle(n,t)||o.getAttrib(n,t)};return dn({width:i(u,"width"),height:i(t,"height"),scope:o.getAttrib(t,"scope"),celltype:ea(t),class:o.getAttrib(t,"class",""),halign:Jv(n,t),valign:Qv(n,t)},e?Kv(o,t):{})},ob=function(n,t){var e=To.fromTable(n),r=To.justCells(e),o=X(r,function(n){return V(t,function(t){return It(n.element,t)})});return q(o,function(n){return{element:n.element.dom,column:To.getColumnAt(e,n.column).map(function(n){return n.element.dom})}})},ub=function(n,t,e){n.setAttrib("scope",e.scope),n.setAttrib("class",e.class),n.setStyle("height",aa(e.height)),t.setStyle("width",aa(e.width))},ib=function(n,t){n.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n.setFormat("tablecellbordercolor",t.bordercolor),n.setFormat("tablecellborderstyle",t.borderstyle),n.setFormat("tablecellborderwidth",aa(t.borderwidth))},cb=function(n,t,e){var r=1===t.length;G(t,function(t){var o=t.element,u=r?Gv.normal(n,o):Gv.ifTruthy(n,o),i=t.column.map(function(t){return r?Gv.normal(n,t):Gv.ifTruthy(n,t)}).getOr(u);ub(u,i,e),Ns(n)&&ib(u,e),r&&(fv(n,o),sv(n,o)),e.halign&&av(n,o,e.halign),e.valign&&lv(n,o,e.valign)})},ab=function(n,t){n.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},lb=function(n,t,e,r){var o=Ht(r,function(n,t){return e[t]!==n});qt(o)>0&&t.length>=1&&qr(t[0]).each(function(e){var u=ob(e,t),i=qt(Ht(o,function(n,t){return"scope"!==t&&"celltype"!==t}))>0,c=$t(o,"celltype");(i||$t(o,"scope"))&&cb(n,u,r),c&&ab(n,r),vs(n,e.dom,{structure:c,style:i})})},fb=function(n,t,e,r){var o=r.getData();r.close(),n.undoReceptionist.transact(function(){lb(n,t,e,o),n.focus()})},sb=function(n,t){var e=qr(t[0]).map(function(e){return q(ob(e,t),function(t){return rb(n,t.element,Ns(n),t.column)})});return Xv(e.getOrDie())},mb=function(t,e){var r=Na(e);if(0!==r.length){var o=sb(t,r),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:Vv(t)},Uv(t,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:Vv(t)}]};t.windowReceptionist.open({title:"Cell Properties",size:"normal",body:Ns(t)?u:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:n(fb,t,r,o)})}},db=function(n){var t=Mv(Hs(n));return t.length>0?L.some({name:"class",type:"listbox",label:"Class",items:t}):L.none()},gb=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],pb=function(n){return gb.concat(db(n).toArray())},vb=function(n,t){n.setAttrib("class",t.class),n.setStyle("height",aa(t.height))},bb=function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)},hb=function(n,t,e,r){var o=1===t.length;G(t,function(t){var u=o?Gv.normal(n,t):Gv.ifTruthy(n,t);vb(u,e),zs(n)&&bb(u,e),e.align!==r.align&&(fv(n,t),av(n,t,e.align))})},wb=function(n,t){n.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},yb=function(n,t,e,r){var o=Ht(r,function(n,t){return e[t]!==n});if(qt(o)>0){var u=$t(o,"type"),i=!u||qt(o)>1;i&&hb(n,t,r,e),u&&wb(n,r),qr(Rt.fromDom(t[0])).each(function(t){return vs(n,t.dom,{structure:u,style:i})})}},Cb=function(n,t,e,r){var o=r.getData();r.close(),n.undoReceptionist.transact(function(){yb(n,t,e,o),n.focus()})},Sb=function(t){var e=za(da(t),Da.selected);if(0!==e.length){var r=q(e,function(n){return eb(t,n.dom,zs(t))}),o=Xv(r),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:pb(t)},Uv(t,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:pb(t)}]};t.windowReceptionist.open({title:"Row Properties",size:"normal",body:zs(t)?u:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:n(Cb,t,q(e,function(n){return n.dom}),o)})}},Tb=function(n,t,e){var r=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],u=_s(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat(o).concat(u).concat(i).concat(c)},xb=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)d(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var o=0;o<t.children.length;o++)xb(n,t.children[o],e,r)},Rb=function(n,t,e){var r=n.dom,o={},u={};if(o.class=e.class,u.height=aa(e.height),r.getAttrib(t,"width")&&!js(n)?o.width=ca(e.width):u.width=aa(e.width),js(n)?(u["border-width"]=aa(e.border),u["border-spacing"]=aa(e.cellspacing)):(o.border=e.border,o.cellpadding=e.cellpadding,o.cellspacing=e.cellspacing),js(n)&&t.children)for(var i=0;i<t.children.length;i++)xb(r,t.children[i],{"border-width":aa(e.border),padding:aa(e.cellpadding)}),Ls(n)&&xb(r,t.children[i],{"border-color":e.bordercolor});Ls(n)&&(u["background-color"]=e.backgroundcolor,u["border-color"]=e.bordercolor,u["border-style"]=e.borderstyle),o.style=r.serializeStyle(dn(dn({},Es(n)),u)),r.setAttribs(t,dn(dn({},Bs(n)),o))},Db=function(n,t,e,r){var o=n.dom,u=r.getData(),i=Ht(u,function(n,t){return e[t]!==n});r.close(),""===u.class&&delete u.class,n.undoReceptionist.transact(function(){if(!t){var e=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;t=Xp(n,e,r,0,0)}if(qt(i)>0){Rb(n,t,u);var c=o.select("caption",t)[0];(c&&!u.caption||!c&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?fv(n,t):av(n,t,u.align)}if(n.focus(),n.addVisual(),qt(i)>0){var a=$t(i,"caption"),l=!a||qt(i)>1;vs(n,t,{structure:a,style:l})}})},Ob=function(t,e){var r,o=t.dom,u=Zv(t,Ls(t));!1===e?(r=o.getParent(t.selection.getStart(),"table",t.getBody()),r?u=tb(t,r,Ls(t)):Ls(t)&&(u.borderstyle="",u.bordercolor="",u.backgroundcolor="")):(u.cols="1",u.rows="1",Ls(t)&&(u.borderstyle="",u.bordercolor="",u.backgroundcolor=""));var i=Mv(Vs(t));i.length>0&&u.class&&(u.class=u.class.replace(/\s*mce\-item\-table\s*/g,""));var c={type:"grid",columns:2,items:Tb(t,i,e)},a=function(){return{type:"panel",items:[c]}},l=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[c]},Uv(t,"table")]}},f=Ls(t)?l():a();t.windowReceptionist.open({title:"Table Properties",size:"normal",body:f,onSubmit:n(Db,t,r,u),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u})},Ab=function(n){return Ma(da(n),ia(n))},kb=function(n){return Pa(da(n),ia(n))},Ib=function(t,e,r,o,u){var i=ia(t),c=function(){return Ab(t).each(function(n){qr(n,i).filter(k(i)).each(function(n){var e=Rt.fromText("");if(Wo(n,e),Ko(n),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(e.dom,0),r.setEnd(e.dom,0),t.selection.setRng(r),t.nodeChanged()}})})},a=function(n){return Ab(t).each(function(e){var r=Gs(t)||qs(t)||Us(t);r||qr(e,i).each(function(e){"relative"!==n||Ml(e)?"fixed"!==n||Pl(e)?"responsive"!==n||Nl(e)||fm(e):lm(e):am(e),la(e),vs(t,e.dom,hs)})})},l=function(n){return qr(n,i)},f=function(n){return kb(t).bind(function(t){return l(t).map(function(e){return n(e,t)})})},s=function(n,e){f(function(n){t.formatter.toggle("tableclass",{value:e},n.dom),vs(t,n.dom,bs)})},m=function(n,e){f(function(n){var r=Na(o),u=rn(r,function(n){return t.formatter.match("tablecellclass",{value:e},n.dom)}),i=u?t.formatter.remove:t.formatter.apply;G(r,function(n){return i("tablecellclass",{value:e},n.dom)}),vs(t,n.dom,bs)})},p=function(){Ab(t).each(function(n){qr(n,i).each(function(e){ur(e,"caption").fold(function(){var n=Rt.fromTag("caption");Fo(n,Rt.fromText("Caption")),Ho(e,n,0),t.selection.setCursorLocation(n.dom,0)},function(r){Re("caption")(n)&&kt("td",e).each(function(n){return t.selection.setCursorLocation(n.dom,0)}),Ko(r)}),vs(t,e.dom,hs)})})},v=function(n){t.focus()},b=function(n,t){return void 0===t&&(t=!1),f(function(e,r){var u=Aa(o,e,r);n(e,u,t).each(v)})},h=function(){return f(function(n,e){var r=Aa(o,n,e),u=Qc(T,Rt.fromDom(t.getDoc()),L.none());return uv(n,r,u)})},w=function(){return f(function(n,t){var e=Aa(o,n,t);return ov(n,e)})},y=function(n,e){return e().each(function(e){var r=q(e,function(n){return Mu(n)});f(function(e,u){var i=Zc(Rt.fromDom(t.getDoc())),c=Ia(o,u,r,i);n(e,c).each(v)})})},C=function(n){return function(t,e){return Gt(e,"type").each(function(t){b(n(t),e.no_events)})}};Lt({mceTableSplitCells:function(){return b(e.unmergeCells)},mceTableMergeCells:function(){return b(e.mergeCells)},mceTableInsertRowBefore:function(){return b(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return b(e.insertRowsAfter)},mceTableInsertColBefore:function(){return b(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return b(e.insertColumnsAfter)},mceTableDeleteCol:function(){return b(e.deleteColumn)},mceTableDeleteRow:function(){return b(e.deleteRow)},mceTableCutCol:function(){return w().each(function(n){u.setColumns(n),b(e.deleteColumn)})},mceTableCutRow:function(){return h().each(function(n){u.setRows(n),b(e.deleteRow)})},mceTableCopyCol:function(){return w().each(function(n){return u.setColumns(n)})},mceTableCopyRow:function(){return h().each(function(n){return u.setRows(n)})},mceTablePasteColBefore:function(){return y(e.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return y(e.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return y(e.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return y(e.pasteRowsAfter,u.getRows)},mceTableDelete:c,mceTableCellToggleClass:m,mceTableToggleClass:s,mceTableToggleCaption:p,mceTableSizingMode:function(n,t){return a(t)},mceTableCellType:C(function(n){return"th"===n?e.makeCellsHeader:e.unmakeCellsHeader}),mceTableColType:C(function(n){return"th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader}),mceTableRowType:C(function(n){switch(n){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}})},function(n,e){return t.addCommand(e,n)}),Lt({mceTableProps:n(Ob,t,!1),mceTableRowProps:n(Sb,t),mceTableCellProps:n(mb,t,o)},function(n,e){return t.addCommand(e,function(){return n()})}),t.addCommand("mceInsertTable",function(n,e){g(e)&&Nt(e).length>0?Yp(t,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Ob(t,!0)}),t.addCommand("mceTableApplyCellStyle",function(n,e){var r=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(g(e)){var u=Na(o);if(0!==u.length){var i=Ht(e,function(n,e){return t.formatter.has(r(e))&&d(n)});Xt(i)||(Lt(i,function(n,e){G(u,function(o){Gv.normal(t,o.dom).setFormat(r(e),n)})}),l(u[0]).each(function(n){return vs(t,n.dom,bs)}))}}})},Bb=function(n,t,e){var r=ia(n),o=function(t){return Pa(da(n)).bind(function(n){return qr(n,r).map(function(r){var o=Aa(e,r,n);return t(r,o)})}).getOr("")};Lt({mceTableRowType:function(){return o(t.getTableRowType)},mceTableCellType:function(){return o(t.getTableCellType)},mceTableColType:function(){return o(t.getTableColType)}},function(t,e){return n.addQueryValueHandler(e,t)})},Eb=function(){var n=Iv(),t=Iv();return{getRows:n.get,setRows:function(e){e.fold(n.clear,n.set),t.clear()},clearRows:n.clear,getColumns:t.get,setColumns:function(e){e.fold(t.clear,t.set),n.clear()},clearColumns:t.clear}},Mb={remove_similar:!0,inherit:!1},Pb=dn({selector:"td,th"},Mb),Nb={tablecellbackgroundcolor:dn({styles:{backgroundColor:"%value"}},Pb),tablecellverticalalign:dn({styles:{"vertical-align":"%value"}},Pb),tablecellbordercolor:dn({styles:{borderColor:"%value"}},Pb),tablecellclass:dn({classes:["%value"]},Pb),tableclass:dn({selector:"table",classes:["%value"]},Mb),tablecellborderstyle:dn({styles:{borderStyle:"%value"}},Pb),tablecellborderwidth:dn({styles:{borderWidth:"%value"}},Pb)},zb=function(n){n.formatter.register(Nb)},Lb=Tu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),_b=function(n){return void 0===n&&(n=void 0),Lb.none(n)},Wb=dn(dn({},Lb),{none:_b}),jb=function(n,t,e,r,o){void 0===o&&(o=E);var u=1===r;if(!u&&e<=0)return Wb.first(n[0]);if(u&&e>=n.length-1)return Wb.last(n[n.length-1]);var i=e+r,c=n[i];return o(c)?Wb.middle(t,c):jb(n,t,i,r,o)},Fb=function(n,t){return qr(n,t).bind(function(t){var e=Vr(t),r=nn(e,function(t){return It(n,t)});return r.map(function(n){return{index:n,all:e}})})},Hb=function(n,t,e){var r=Fb(n,e);return r.fold(function(){return Wb.none(n)},function(e){return jb(e.all,n,e.index,1,t)})},Vb=function(n,t,e){var r=Fb(n,e);return r.fold(function(){return Wb.none()},function(e){return jb(e.all,n,e.index,-1,t)})},Ub=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},qb={create:Ub},Gb=Tu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$b=function(n,t,e,r){return n.fold(t,e,r)},Kb=function(n){return n.fold(O,O,O)},Xb=Gb.before,Yb=Gb.on,Jb=Gb.after,Qb={before:Xb,on:Yb,after:Jb,cata:$b,getStart:Kb},Zb=Tu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),nh=function(n){return Zb.exact(n.start,n.soffset,n.finish,n.foffset)},th=function(n){return n.match({domRange:function(n){return Rt.fromDom(n.startContainer)},relative:function(n,t){return Qb.getStart(n)},exact:function(n,t,e,r){return n}})},eh=Zb.domRange,rh=Zb.relative,oh=Zb.exact,uh=function(n){var t=th(n);return Ae(t)},ih=qb.create,ch={domRange:eh,relative:rh,exact:oh,exactFromRange:nh,getWin:uh,range:ih},ah=function(n,t){var e=n.document.createRange();return e.selectNode(t.dom),e},lh=function(n,t){var e=n.document.createRange();return fh(e,t),e},fh=function(n,t){return n.selectNodeContents(t.dom)},sh=function(n,t){t.fold(function(t){n.setStartBefore(t.dom)},function(t,e){n.setStart(t.dom,e)},function(t){n.setStartAfter(t.dom)})},mh=function(n,t){t.fold(function(t){n.setEndBefore(t.dom)},function(t,e){n.setEnd(t.dom,e)},function(t){n.setEndAfter(t.dom)})},dh=function(n,t,e){var r=n.document.createRange();return sh(r,t),mh(r,e),r},gh=function(n,t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},ph=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},vh=function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?L.some(e).map(ph):L.none()},bh=Tu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hh=function(n,t,e){return t(Rt.fromDom(e.startContainer),e.startOffset,Rt.fromDom(e.endContainer),e.endOffset)},wh=function(n,t){return t.match({domRange:function(n){return{ltr:D(n),rtl:L.none}},relative:function(t,e){return{ltr:gn(function(){return dh(n,t,e)}),rtl:gn(function(){return L.some(dh(n,e,t))})}},exact:function(t,e,r,o){return{ltr:gn(function(){return gh(n,t,e,r,o)}),rtl:gn(function(){return L.some(gh(n,r,o,t,e))})}}})},yh=function(n,t){var e=t.ltr();if(e.collapsed){var r=t.rtl().filter(function(n){return!1===n.collapsed});return r.map(function(n){return bh.rtl(Rt.fromDom(n.endContainer),n.endOffset,Rt.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return hh(n,bh.ltr,e)})}return hh(n,bh.ltr,e)},Ch=function(n,t){var e=wh(n,t);return yh(n,e)},Sh=function(n,t){var e=Ch(n,t);return e.match({ltr:function(t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rtl:function(t,e,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(t.dom,e),u}})};bh.ltr,bh.rtl;var Th=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(t-c.left);if(e<=c.bottom){if(e<c.top||a>u)return i-1;u=a}}return 0},xh=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},Rh=function(n,t,e,r,o){var u=function(e){var r=n.dom.createRange();return r.setStart(t.dom,e),r.collapse(!0),r},i=function(n){var t=u(n);return t.getBoundingClientRect()},c=Qo(t).length,a=Th(i,e,r,o.right,c);return u(a)},Dh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getClientRects(),i=mn(u,function(n){return xh(n,e,r)?L.some(n):L.none()});return i.map(function(o){return Rh(n,t,e,r,o)})},Oh=function(n,t,e,r){var o=n.dom.createRange(),u=Pe(t);return mn(u,function(t){return o.selectNode(t.dom),xh(o.getBoundingClientRect(),e,r)?Ah(n,t,e,r):L.none()})},Ah=function(n,t,e,r){return Se(t)?Dh(n,t,e,r):Oh(n,t,e,r)},kh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return Ah(n,t,i,c)},Ih=!0,Bh=!1,Eh=function(n,t){return t-n.left<n.right-t?Ih:Bh},Mh=function(n,t,e){var r=n.dom.createRange();return r.selectNode(t.dom),r.collapse(e),r},Ph=function(n,t,e){var r=n.dom.createRange();r.selectNode(t.dom);var o=r.getBoundingClientRect(),u=Eh(o,e),i=u===Ih?jc:Fc;return i(t).map(function(t){return Mh(n,t,u)})},Nh=function(n,t,e){var r=t.dom.getBoundingClientRect(),o=Eh(r,e);return L.some(Mh(n,t,o))},zh=function(n,t,e){var r=0===Pe(t).length?Nh:Ph;return r(n,t,e)},Lh=function(n,t,e){var r,o;return L.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,e)).bind(function(t){if(null===t.offsetNode)return L.none();var e=n.dom.createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),L.some(e)})},_h=function(n,t,e){var r,o;return L.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,e))},Wh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return kh(n,t,i,c)},jh=function(n,t,e){return Rt.fromPoint(n,t,e).bind(function(r){var o=function(){return zh(n,r,t)};return 0===Pe(r).length?o():Wh(n,r,t,e).orThunk(o)})},Fh=document.caretPositionFromPoint?Lh:document.caretRangeFromPoint?_h:jh,Hh=function(n,t,e){var r=Rt.fromDom(n.document);return Fh(r,t,e).map(function(n){return qb.create(Rt.fromDom(n.startContainer),n.startOffset,Rt.fromDom(n.endContainer),n.endOffset)})},Vh=function(n,t){var e=be(n);return"input"===e?Qb.after(n):H(["br","img"],e)?0===t?Qb.before(n):Qb.after(n):Qb.on(n,t)},Uh=function(n,t){var e=n.fold(Qb.before,Vh,Qb.after),r=t.fold(Qb.before,Vh,Qb.after);return ch.relative(e,r)},qh=function(n,t,e,r){var o=Vh(n,t),u=Vh(e,r);return ch.relative(o,u)},Gh=function(n){return n.match({domRange:function(n){var t=Rt.fromDom(n.startContainer),e=Rt.fromDom(n.endContainer);return qh(t,n.startOffset,e,n.endOffset)},relative:Uh,exact:qh})},$h=function(n,t,e,r){var o=De(n),u=o.dom.createRange();return u.setStart(n.dom,t),u.setEnd(e.dom,r),u},Kh=function(n,t,e,r){var o=$h(n,t,e,r),u=It(n,e)&&t===r;return o.collapsed&&!u},Xh=function(n){return L.from(n.getSelection())},Yh=function(n,t){Xh(n).each(function(n){n.removeAllRanges(),n.addRange(t)})},Jh=function(n,t,e,r,o){var u=gh(n,t,e,r,o);Yh(n,u)},Qh=function(n,t,e,r,o,u){t.collapse(e.dom,r),t.extend(o.dom,u)},Zh=function(n,t){return Ch(n,t).match({ltr:function(t,e,r,o){Jh(n,t,e,r,o)},rtl:function(t,e,r,o){Xh(n).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom,e,r.dom,o);else if(u.extend)try{Qh(n,u,t,e,r,o)}catch(u){Jh(n,r,o,t,e)}else Jh(n,r,o,t,e)})}})},nw=function(n,t,e,r,o){var u=qh(t,e,r,o);Zh(n,u)},tw=function(n,t,e){var r=Uh(t,e);Zh(n,r)},ew=function(n){var t=ch.getWin(n).dom,e=function(n,e,r,o){return gh(t,n,e,r,o)},r=Gh(n);return Ch(t,r).match({ltr:e,rtl:e})},rw=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return L.some(qb.create(Rt.fromDom(t.startContainer),t.startOffset,Rt.fromDom(e.endContainer),e.endOffset))}return L.none()},ow=function(n){if(null===n.anchorNode||null===n.focusNode)return rw(n);var t=Rt.fromDom(n.anchorNode),e=Rt.fromDom(n.focusNode);return Kh(t,n.anchorOffset,e,n.focusOffset)?L.some(qb.create(t,n.anchorOffset,e,n.focusOffset)):rw(n)},uw=function(n,t,e){void 0===e&&(e=!0);var r=e?lh:ah,o=r(n,t);Yh(n,o)},iw=function(n){return Xh(n).filter(function(n){return n.rangeCount>0}).bind(ow)},cw=function(n){return iw(n).map(function(n){return ch.exact(n.start,n.soffset,n.finish,n.foffset)})},aw=function(n,t){var e=Sh(n,t);return vh(e)},lw=function(n,t,e){return Hh(n,t,e)},fw=function(n){Xh(n).each(function(n){
return n.removeAllRanges()})},sw=tinymce.util.Tools.resolve("tinymce.util.VK"),mw=function(n,t,e){return pw(n,t,Hb(e,Nf))},dw=function(n,t,e){return pw(n,t,Vb(e,Nf))},gw=function(n,t){var e=ch.exact(t,0,t,0);return ew(e)},pw=function(n,t,e){return e.fold(L.none,L.none,function(t,e){return jc(e).map(function(t){return gw(n,t)})},function(e){return n.execCommand("mceTableInsertRowAfter"),mw(n,t,e)})},vw=["table","li","dl"],bw=function(n,t,e){if(n.keyCode===sw.TAB){var r=ra(t),o=function(n){var t=be(n);return It(n,r)||H(vw,t)},u=t.selection.getRng(),i=Rt.fromDom(n.shiftKey?u.startContainer:u.endContainer);Hr(i,o).each(function(r){n.preventDefault(),qr(r,o).each(e.clear),t.selection.collapse(n.shiftKey);var u=n.shiftKey?dw:mw,i=u(t,o,r);i.each(function(n){t.selection.setRng(n)})})}},hw=function(n,t){return{selection:n,kill:t}},ww={create:hw},yw=function(n,t,e,r){return{start:Qb.on(n,t),finish:Qb.on(e,r)}},Cw={create:yw},Sw=function(n,t){var e=Sh(n,t);return qb.create(Rt.fromDom(e.startContainer),e.startOffset,Rt.fromDom(e.endContainer),e.endOffset)},Tw=Cw.create,xw=function(n,t,e,r,o,u,i){return It(e,o)&&r===u?L.none():cr(e,"td,th",t).bind(function(e){return cr(o,"td,th",t).bind(function(r){return Rw(n,t,e,r,i)})})},Rw=function(n,t,e,r,o){return It(e,r)?L.none():gu(e,r,t).bind(function(t){var r=t.boxes.getOr([]);return r.length>1?(o(n,r,t.start,t.finish),L.some(ww.create(L.some(Tw(e,0,e,zc(e))),!0))):L.none()})},Dw=function(n,t,e,r,o){var u=function(n){return o.clearBeforeUpdate(e),o.selectRange(e,n.boxes,n.start,n.finish),n.boxes};return wu(r,n,t,o.firstSelectedSelector,o.lastSelectedSelector).map(u)},Ow=function(n,t){return{item:n,mode:t}},Aw=function(n,t,e,r){return void 0===r&&(r=kw),n.property().parent(t).map(function(n){return Ow(n,r)})},kw=function(n,t,e,r){return void 0===r&&(r=Iw),e.sibling(n,t).map(function(n){return Ow(n,r)})},Iw=function(n,t,e,r){void 0===r&&(r=Iw);var o=n.property().children(t),u=e.first(o);return u.map(function(n){return Ow(n,r)})},Bw=[{current:Aw,next:kw,fallback:L.none()},{current:kw,next:Iw,fallback:L.some(Aw)},{current:Iw,next:Iw,fallback:L.some(kw)}],Ew=function(n,t,e,r,o){void 0===o&&(o=Bw);var u=Z(o,function(n){return n.current===e});return u.bind(function(e){return e.current(n,t,r,e.next).orThunk(function(){return e.fallback.bind(function(e){return Ew(n,t,e,r)})})})},Mw=function(){var n=function(n,t){return n.query().prevSibling(t)},t=function(n){return n.length>0?L.some(n[n.length-1]):L.none()};return{sibling:n,first:t}},Pw=function(){var n=function(n,t){return n.query().nextSibling(t)},t=function(n){return n.length>0?L.some(n[0]):L.none()};return{sibling:n,first:t}},Nw={left:Mw,right:Pw},zw=function(n,t,e,r,o,u){var i=Ew(n,t,r,o);return i.bind(function(t){return u(t.item)?L.none():e(t.item)?L.some(t.item):zw(n,t.item,e,t.mode,o,u)})},Lw=function(n,t,e,r){return zw(n,t,e,kw,Nw.left(),r)},_w=function(n,t,e,r){return zw(n,t,e,kw,Nw.right(),r)},Ww=function(n){return function(t){return 0===n.property().children(t).length}},jw=function(n,t,e){return Hw(n,t,Ww(n),e)},Fw=function(n,t,e){return Vw(n,t,Ww(n),e)},Hw=Lw,Vw=_w,Uw=r(),qw=function(n,t){return jw(Uw,n,t)},Gw=function(n,t){return Fw(Uw,n,t)},$w=function(n,t,e){return Hw(Uw,n,t,e)},Kw=function(n,t,e){return Vw(Uw,n,t,e)},Xw=function(n,t,e){return nr(n,t,e).isSome()},Yw=Tu.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Jw=function(n,t,e){var r=n.getRect(t),o=n.getRect(e);return o.right>r.left&&o.left<r.right},Qw=function(n){return cr(n,"tr")},Zw=function(n,t,e,r,o,u,i){return cr(r,"td,th",i).bind(function(e){return cr(t,"td,th",i).map(function(t){return It(e,t)?It(r,e)&&zc(e)===o?u(t):Yw.none("in same cell"):su(Qw,[e,t]).fold(function(){return Jw(n,t,e)?Yw.success():u(t)},function(n){return u(t)})})}).getOr(Yw.none("default"))},ny=function(n,t,e,r,o){return n.fold(t,e,r,o)},ty=dn(dn({},Yw),{verify:Zw,cata:ny}),ey=function(n,t,e,r){return{parent:n,children:t,element:e,index:r}},ry=function(n){return ke(n).bind(function(t){var e=Pe(t);return oy(e,n).map(function(r){return ey(t,e,n,r)})})},oy=function(t,e){return nn(t,n(It,e))},uy=function(n){return"br"===be(n)},iy=function(n,t,e){return t(n,e).bind(function(n){return Se(n)&&0===Qo(n).trim().length?iy(n,t,e):L.some(n)})},cy=function(n,t,e){return e.traverse(t).orThunk(function(){return iy(t,e.gather,n)}).map(e.relative)},ay=function(n,t){return Ne(n,t).filter(uy).orThunk(function(){return Ne(n,t-1).filter(uy)})},ly=function(n,t,e,r){return ay(t,e).bind(function(t){return r.traverse(t).fold(function(){return iy(t,r.gather,n).map(r.relative)},function(n){return ry(n).map(function(n){return Qb.on(n.parent,n.index)})})})},fy=function(n,t,e,r){var o=uy(t)?cy(n,t,r):ly(n,t,e,r);return o.map(function(n){return{start:n,finish:n}})},sy=function(n){return ty.cata(n,function(n){return L.none()},function(){return L.none()},function(n){return L.some(hm(n,0))},function(n){return L.some(hm(n,zc(n)))})},my=function(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}},dy=function(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}},gy=function(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}},py=function(n){return n.top},vy=function(n){return n.bottom},by=function(n,t,e){return e>=0&&e<zc(t)?n.getRangedRect(t,e,t,e+1):e>0?n.getRangedRect(t,e-1,t,e):L.none()},hy=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},wy=function(n,t){return L.some(n.getRect(t))},yy=function(n,t,e){return Ce(t)?wy(n,t).map(hy):Se(t)?by(n,t,e).map(hy):L.none()},Cy=function(n,t){return Ce(t)?wy(n,t).map(hy):Se(t)?n.getRangedRect(t,0,t,zc(t)).map(hy):L.none()},Sy=5,Ty=100,xy=Tu.generate([{none:[]},{retry:["caret"]}]),Ry=function(n,t){return n.left<t.left||Math.abs(t.right-n.left)<1||n.left>t.right},Dy=function(n,t,e){return tr(t,wg).fold(B,function(t){return Cy(n,t).exists(function(n){return Ry(e,n)})})},Oy=function(n,t,e,r,o){var u=my(o,Sy);return Math.abs(e.bottom-r.bottom)<1?xy.retry(u):e.top>o.bottom?xy.retry(u):e.top===o.bottom?xy.retry(my(o,1)):Dy(n,t,o)?xy.retry(gy(u,Sy,0)):xy.none()},Ay=function(n,t,e,r,o){var u=dy(o,Sy);return Math.abs(e.top-r.top)<1?xy.retry(u):e.bottom<o.top?xy.retry(u):e.bottom===o.top?xy.retry(dy(o,1)):Dy(n,t,o)?xy.retry(gy(u,Sy,0)):xy.none()},ky={point:py,adjuster:Ay,move:dy,gather:qw},Iy={point:vy,adjuster:Oy,move:my,gather:Gw},By=function(n,t,e){return n.elementFromPoint(t,e).filter(function(n){return"table"===be(n)}).isSome()},Ey=function(n,t,e,r,o){return My(n,t,e,t.move(r,Sy),o)},My=function(n,t,e,r,o){return 0===o?L.some(r):By(n,r.left,t.point(r))?Ey(n,t,e,r,o-1):n.situsFromPoint(r.left,t.point(r)).bind(function(u){return u.start.fold(L.none,function(u){return Cy(n,u).bind(function(i){return t.adjuster(n,u,i,e,r).fold(L.none,function(r){return My(n,t,e,r,o-1)})}).orThunk(function(){return L.some(r)})},L.none)})},Py=function(n,t){return n.situsFromPoint(t.left,t.bottom+Sy)},Ny=function(n,t){return n.situsFromPoint(t.left,t.top-Sy)},zy=function(n,t,e){return n.point(t)>e.getInnerHeight()?L.some(n.point(t)-e.getInnerHeight()):n.point(t)<0?L.some(-n.point(t)):L.none()},Ly=function(n,t,e){var r=n.move(e,Sy),o=My(t,n,e,r,Ty).getOr(r);return zy(n,o,t).fold(function(){return t.situsFromPoint(o.left,n.point(o))},function(e){return t.scrollBy(0,e),t.situsFromPoint(o.left,n.point(o)-e)})},_y={tryUp:n(Ly,ky),tryDown:n(Ly,Iy),ieTryUp:Ny,ieTryDown:Py,getJumpSize:D(Sy)},Wy=20,jy=function(n,t,e){return n.getSelection().bind(function(r){return fy(t,r.finish,r.foffset,e).fold(function(){return L.some(hm(r.finish,r.foffset))},function(o){var u=n.fromSitus(o),i=ty.verify(n,r.finish,r.foffset,u.finish,u.foffset,e.failure,t);return sy(i)})})},Fy=function(n,t,e,r,o,u){return 0===u?L.none():Uy(n,t,e,r,o).bind(function(i){var c=n.fromSitus(i),a=ty.verify(n,e,r,c.finish,c.foffset,o.failure,t);return ty.cata(a,function(){return L.none()},function(){return L.some(i)},function(i){return It(e,i)&&0===r?Hy(n,e,r,dy,o):Fy(n,t,i,0,o,u-1)},function(i){return It(e,i)&&r===zc(i)?Hy(n,e,r,my,o):Fy(n,t,i,zc(i),o,u-1)})})},Hy=function(n,t,e,r,o){return yy(n,t,e).bind(function(t){return Vy(n,o,r(t,_y.getJumpSize()))})},Vy=function(n,t,e){var r=mt().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):L.none()},Uy=function(n,t,e,r,o){return yy(n,e,r).bind(function(t){return Vy(n,o,t)})},qy=function(n,t,e){return jy(n,t,e).bind(function(r){return Fy(n,t,r.element,r.offset,e,Wy).map(n.fromSitus)})},Gy=function(n,t){return Xw(n,function(n){return ke(n).exists(function(n){return It(n,t)})})},$y=function(n,t,e,r,o){return cr(r,"td,th",t).bind(function(r){return cr(r,"table",t).bind(function(u){return Gy(o,u)?qy(n,t,e).bind(function(n){return cr(n.finish,"td,th",t).map(function(t){return{start:r,finish:t,range:n}})}):L.none()})})},Ky=function(n,t,e,r,o,u){return mt().browser.isIE()?L.none():u(r,t).orThunk(function(){return $y(n,t,e,r,o).map(function(n){var t=n.range;return ww.create(L.some(Tw(t.start,t.soffset,t.finish,t.foffset)),!0)})})},Xy=function(n,t){return cr(n,"tr",t).bind(function(n){return cr(n,"table",t).bind(function(e){var r=Ze(e,"tr");return It(n,r[0])?$w(e,function(n){return Fc(n).isSome()},t).map(function(n){var t=zc(n);return ww.create(L.some(Tw(n,t,n,t)),!0)}):L.none()})})},Yy=function(n,t){return cr(n,"tr",t).bind(function(n){return cr(n,"table",t).bind(function(e){var r=Ze(e,"tr");return It(n,r[r.length-1])?Kw(e,function(n){return jc(n).isSome()},t).map(function(n){return ww.create(L.some(Tw(n,0,n,0)),!0)}):L.none()})})},Jy=function(n,t,e,r,o,u,i){return $y(n,e,r,o,u).bind(function(n){return Rw(t,e,n.start,n.finish,i)})},Qy=function(n,t){return cr(n,"td,th",t)},Zy=function(n,t,e,r){var o=Iv(),u=o.clear,i=function(u){o.on(function(o){r.clearBeforeUpdate(t),Qy(u.target,e).each(function(i){gu(o,i,e).each(function(e){var o=e.boxes.getOr([]);if(1===o.length){var c=o[0],a="false"===zf(c),l=vr(Pf(u.target),c,It);a&&l&&(r.selectRange(t,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(t,o,e.start,e.finish),n.selectContents(i))})})})},c=function(n){r.clear(t),Qy(n.target,e).each(o.set)},a=function(n){i(n)},l=function(n){i(n),u()};return{clearstate:u,mousedown:c,mouseover:a,mouseup:l}},nC={traverse:Me,gather:Gw,relative:Qb.before,otherRetry:_y.tryDown,ieRetry:_y.ieTryDown,failure:ty.failedDown},tC={traverse:Ee,gather:qw,relative:Qb.before,otherRetry:_y.tryUp,ieRetry:_y.ieTryUp,failure:ty.failedUp},eC=function(n){return function(t){return t===n}},rC=eC(38),oC=eC(40),uC=function(n){return n>=37&&n<=40},iC={isBackward:eC(37),isForward:eC(39)},cC={isBackward:eC(39),isForward:eC(37)},aC=function(n){var t=void 0!==n?n.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return fi(e,r)},lC=function(n,t,e){var r=void 0!==e?e.dom:document,o=r.defaultView;o&&o.scrollBy(n,t)},fC=function(n){var t=function(t,e){return Rt.fromPoint(Rt.fromDom(n.document),t,e)},e=function(n){return n.dom.getBoundingClientRect()},r=function(t,e,r,o){var u=ch.exact(t,e,r,o);return aw(n,u)},o=function(){return cw(n).map(function(t){return Sw(n,t)})},u=function(t){var e=ch.relative(t.start,t.finish);return Sw(n,e)},i=function(t,e){return lw(n,t,e).map(function(n){return Cw.create(n.start,n.soffset,n.finish,n.foffset)})},c=function(){fw(n)},a=function(t){void 0===t&&(t=!1),cw(n).each(function(e){return e.fold(function(n){return n.collapse(t)},function(e,r){var o=t?e:r;tw(n,o,o)},function(e,r,o,u){var i=t?e:o,c=t?r:u;nw(n,i,c,i,c)})})},l=function(t){uw(n,t,!1)},f=function(t){uw(n,t)},s=function(t){nw(n,t.start,t.soffset,t.finish,t.foffset)},m=function(t,e){tw(n,t,e)},d=function(){return n.innerHeight},g=function(){var t=aC(Rt.fromDom(n.document));return t.top},p=function(t,e){lC(t,e,Rt.fromDom(n.document))};return{elementFromPoint:t,getRect:e,getRangedRect:r,getSelection:o,fromSitus:u,situsFromPoint:i,clearSelection:c,collapseSelection:a,setSelection:s,setRelativeSelection:m,selectNode:l,selectContents:f,getInnerHeight:d,getScrollY:g,scrollBy:p}},sC=function(n,t){return{rows:n,cols:t}},mC=function(n,t,e,r){var o=fC(n),u=Zy(o,t,e,r);return{clearstate:u.clearstate,mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},dC=function(t,e,r,o){var u=fC(t),i=function(){return o.clear(e),L.none()},c=function(t,c,a,l,f,s){var m=t.raw,d=m.which,g=!0===m.shiftKey,p=pu(e,o.selectedSelector).fold(function(){return uC(d)&&!g&&o.clearBeforeUpdate(e),oC(d)&&g?n(Jy,u,e,r,nC,l,c,o.selectRange):rC(d)&&g?n(Jy,u,e,r,tC,l,c,o.selectRange):oC(d)?n(Ky,u,r,nC,l,c,Yy):rC(d)?n(Ky,u,r,tC,l,c,Xy):L.none},function(n){var t=function(t){return function(){var r=mn(t,function(t){return Dw(t.rows,t.cols,e,n,o)});return r.fold(function(){return bu(e,o.firstSelectedSelector,o.lastSelectedSelector).map(function(n){var t=oC(d)||s.isForward(d)?Qb.after:Qb.before;return u.setRelativeSelection(Qb.on(n.first,0),t(n.table)),o.clear(e),ww.create(L.none(),!0)})},function(n){return L.some(ww.create(L.none(),!0))})}};return oC(d)&&g?t([sC(1,0)]):rC(d)&&g?t([sC(-1,0)]):s.isBackward(d)&&g?t([sC(0,-1),sC(-1,0)]):s.isForward(d)&&g?t([sC(0,1),sC(1,0)]):uC(d)&&!g?i:L.none});return p()},a=function(n,t,u,i,c){return pu(e,o.selectedSelector).fold(function(){var a=n.raw,l=a.which,f=!0===a.shiftKey;return f&&uC(l)?xw(e,r,t,u,i,c,o.selectRange):L.none()},L.none)};return{keydown:c,keyup:a}},gC=function(n,t,e,r){var o=fC(n);return function(n,u){r.clearBeforeUpdate(t),gu(n,u,e).each(function(n){var e=n.boxes.getOr([]);r.selectRange(t,e,n.start,n.finish),o.selectContents(u),o.collapseSelection()})}},pC=function(n,t){G(t,function(t){Sf(n,t)})},vC=function(n){return function(t){yf(t,n)}},bC=function(n){return function(t){pC(t,n)}},hC=function(n){var t=vC(n.selected),e=bC([n.selected,n.lastSelected,n.firstSelected]),r=function(t){var r=Ze(t,n.selectedSelector);G(r,e)},o=function(e,o,u,i){r(e),G(o,t),yf(u,n.firstSelected),yf(i,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},wC=function(n,t,e){var r=function(t){gr(t,n.selected),gr(t,n.firstSelected),gr(t,n.lastSelected)},o=function(t){lr(t,n.selected,"1")},u=function(n){i(n),e()},i=function(t){var e=Ze(t,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector);G(e,r)},c=function(e,r,i,c){u(e),G(r,o),lr(i,n.firstSelected,"1"),lr(c,n.lastSelected,"1"),t(r,i,c)};return{clearBeforeUpdate:i,clear:u,selectRange:c,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},yC={byClass:hC,byAttr:wC},CC=function(n,t){var e=n.slice(0,t[t.length-1].row+1),r=Zm(e);return en(r,function(n){var e=n.cells.slice(0,t[t.length-1].column+1);return q(e,function(n){return n.element})})},SC=function(n,t){var e=n.slice(t[0].row+t[0].rowspan-1,n.length),r=Zm(e);return en(r,function(n){var e=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return q(e,function(n){return n.element})})},TC=function(n,t,e){var r=To.fromTable(n),o=cd(r,t);return o.map(function(n){var t=Jm(r,e,!1),o=CC(t,n),u=SC(t,n);return{upOrLeftCells:o,downOrRightCells:u}})},xC=tinymce.util.Tools.resolve("tinymce.Env"),RC=function(n){return!1===Tf(Rt.fromDom(n.target),"ephox-snooker-resizer-bar")},DC=function(n,t){return ur(n,t).isSome()},OC=function(n,t){var e=Ov(L.none()),r=Ov([]),o=L.none(),u=Re("caption"),i=function(n){return o.forall(function(t){return!t[n]})},c=function(){return Ma(da(n),ia(n))},a=function(){return Ma(ga(n),ia(n))},l=function(){return c().bind(function(n){return yr(hr(qr(n),a().bind(qr),function(e,r){return It(e,r)?u(n)?L.some(Oa(n)):L.some(Aa(t,e,n)):L.none()}))})},f=function(n){var t=qr(n.element);return t.map(function(t){var e=To.fromTable(t),r=cd(e,n).getOr([]),o=J(r,function(n,t){return t.isLocked&&(n.onAny=!0,0===t.column?n.onFirst=!0:t.column+t.colspan>=e.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:sd(e,n).isSome(),unmergeable:md(e,n).isSome(),locked:o}})},s=function(){e.set(gn(l)()),o=e.get().bind(f),G(r.get(),function(n){return n()})},m=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(X(r.get(),function(t){return t!==n}))}},d=function(n,t){return m(function(){return e.get().fold(function(){n.setDisabled(!0)},function(e){n.setDisabled(t(e))})})},g=function(n,t,r){return m(function(){return e.get().fold(function(){n.setDisabled(!0),n.setActive(!1)},function(e){n.setDisabled(t(e)),n.setActive(r(e))})})},p=function(n){return o.exists(function(t){return t.locked[n]})},v=function(n){return d(n,function(n){return!1})},b=function(n){return d(n,function(n){return u(n.element)})},h=function(n){return function(t){return d(t,function(t){return u(t.element)||p(n)})}},w=function(n){return function(t){return d(t,function(t){return u(t.element)||n().isNone()})}},y=function(n,t){return function(e){return d(e,function(e){return u(e.element)||n().isNone()||p(t)})}},C=function(n){return d(n,function(n){return i("mergeable")})},S=function(n){return d(n,function(n){return i("unmergeable")})},T=function(t){return g(t,B,function(t){var e=qr(t.element,ia(n));return e.exists(function(n){return DC(n,"caption")})})},x=function(t,e){return function(r){return g(r,function(n){return u(n.element)},function(){return n.queryCommandValue(t)===e})}},R=x("mceTableRowType","header"),D=x("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:v,onSetupCellOrRow:b,onSetupColumn:h,onSetupPasteable:w,onSetupPasteableColumn:y,onSetupMergeable:C,onSetupUnmergeable:S,resetTargets:s,onSetupTableWithCaption:T,onSetupTableRowHeaders:R,onSetupTableColumnHeaders:D,targets:e.get}},AC=function(n,t,e,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=zv(Vs(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Lv(n,t,u,"tableclass",function(t){return n.execCommand("mceTableToggleClass",!1,t)}),onSetup:e.onSetupTable});var i=zv(Fs(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Lv(n,t,i,"tablecellclass",function(t){return n.execCommand("mceTableCellToggleClass",!1,t)}),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Lv(n,t,mv,"tablecellverticalalign",Nv(n,"vertical-align")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Lv(n,t,ks(n),"tablecellborderwidth",Nv(n,"border-width")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Lv(n,t,Is(n),"tablecellborderstyle",Nv(n,"border-style")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:e.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(t){return t(_v(n,tm(n),"background-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(t){return t(_v(n,em(n),"border-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Wv(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:jv(n),onSetup:e.onSetupTableColumnHeaders})},kC=function(n){var t=function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},e=$s(n);e.length>0&&n.ui.registry.addContextToolbar("table",{predicate:t,items:e,scope:"node",position:"node"})},IC=function(n,t,e,r){var o=function(t){return function(){return n.execCommand(t)}},u=function(t){n.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},i={text:"Table properties",onSetup:e.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:D("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:D("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:e.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:e.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:D("tablecellprops tablemergecells tablesplitcells")};!1===Ws(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",l),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(D(""),function(n){return"caption"===be(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var s=zv(Vs(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Pv(n,t,s,"tableclass",function(t){return n.execCommand("mceTableToggleClass",!1,t)})},onSetup:e.onSetupTable});var m=zv(Fs(n));0!==m.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Pv(n,t,m,"tablecellclass",function(t){return n.execCommand("mceTableCellToggleClass",!1,t)})},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Pv(n,t,mv,"tablecellverticalalign",Nv(n,"vertical-align"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Pv(n,t,ks(n),"tablecellborderwidth",Nv(n,"border-width"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Pv(n,t,Is(n),"tablecellborderstyle",Nv(n,"border-style"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:e.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return _v(n,tm(n),"background-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return _v(n,em(n),"border-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Wv(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:jv(n),onSetup:e.onSetupTableColumnHeaders})},BC=function(n){var t=ku(function(){return ra(n)},function(){return Pa(da(n),ia(n))},Da.selectedSelector),e=OC(n,t),r=bm(n),u=o(n,r.lazyResize,e),i=Pp(n,u,r.lazyWire),c=Eb();return Ib(n,i,u,t,c),Bb(n,i,t),ja(n,t,i),IC(n,t,e,c),AC(n,t,e,c),kC(n),n.on("PreInit",function(){n.serializer.addTempAttr(Da.firstSelected),n.serializer.addTempAttr(Da.lastSelected),zb(n)}),Ps(n)&&n.on("keydown",function(t){bw(t,n,u)}),n.on("remove",function(){r.destroy()}),nv(n,c,r,e)};u()})();