(function(){"use strict";function t(){i.add("imagetools",function(t){var n=o(0),e=o(null);Pn(t,n),Ln(t),kn(t),On(t,n,e)})}var n,e,r,o=function(t){var n=t,e=function(){return n},r=function(t){n=t};return{get:e,set:r}},i=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n},c=function(t){return function(n){return a(n)===t}},f=function(t){return function(n){return typeof n===t}},s=c("array"),l=function(t){return null==t},d=function(t){return!l(t)},m=f("function"),h=function(){},g=function(t){return function(){return t}},p=function(t){return t},v=g(!1),y=g(!0),w=function(){return b},b=(n=function(t){return t()},e=p,r={fold:function(t,n){return t()},isSome:v,isNone:y,getOr:e,getOrThunk:n,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:g(null),getOrUndefined:g(void 0),or:e,orThunk:n,map:w,each:h,bind:w,exists:v,forall:y,filter:function(){return w()},toArray:function(){return[]},toString:g("none()")},r),_=function(t){var n=g(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:y,isNone:v,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return _(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:b},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},E=function(t){return null==t?b:_(t)},R={some:_,none:w,from:E},T={},x={exports:T};(function(t,n,e,r){(function(r,o){"object"==typeof n&&void 0!==e?e.exports=o():"function"==typeof t&&t.amd?t(o):(r="undefined"!=typeof globalThis?globalThis:r||self,r.EphoxContactWrapper=o())})(this,function(){var t,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};t=e,function(n){function e(){}function r(t,n){return function(){t.apply(n,arguments)}}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function i(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn(function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void a(n.promise,t)}u(n.promise,r)}else(1===t._state?u:a)(n.promise,t._value)})):t._deferreds.push(n)}function u(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof o)return t._state=3,t._value=n,void c(t);if("function"==typeof e)return void s(r(e,n),t)}t._state=1,t._value=n,c(t)}catch(n){a(t,n)}}function a(t,n){t._state=2,t._value=n,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)i(t,t._deferreds[n]);t._deferreds=null}function f(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function s(t,n){var e=!1;try{t(function(t){e||(e=!0,u(n,t))},function(t){e||(e=!0,a(n,t))})}catch(t){if(e)return;e=!0,a(n,t)}}var l=setTimeout;o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,n){var r=new this.constructor(e);return i(this,new f(t,n,r)),r},o.all=function(t){var n=Array.prototype.slice.call(t);return new o(function(t,e){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(t){r(i,t)},e)}n[i]=u,0==--o&&t(n)}catch(t){e(t)}}if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)r(i,n[i])})},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(n){n(t)})},o.reject=function(t){return new o(function(n,e){e(t)})},o.race=function(t){return new o(function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)})},o._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){l(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},t.exports?t.exports=o:n.Promise||(n.Promise=o)}(n);var r=e.exports,o="undefined"!=typeof window?window:Function("return this;")(),i={boltExport:o.Promise||r};return i})})(void 0,T,x);var I=x.exports.boltExport,U=function(t,n){return S(document.createElement("canvas"),t,n)},A=function(t){var n=U(t.width,t.height),e=j(n);return e.drawImage(t,0,0),n},j=function(t){return t.getContext("2d")},S=function(t,n,e){return t.width=n,t.height=e,t},P=function(t){return t.naturalWidth||t.width},O=function(t){return t.naturalHeight||t.height},L=function(t){var n=t.src;return 0===n.indexOf("data:")?M(n):C(n)},k=function(t){return new I(function(n,e){var r=URL.createObjectURL(t),o=new Image,i=function(){o.removeEventListener("load",u),o.removeEventListener("error",a)},u=function(){i(),n(o)},a=function(){i(),e("Unable to load data of type "+t.type+": "+r)};o.addEventListener("load",u),o.addEventListener("error",a),o.src=r,o.complete&&setTimeout(u,0)})},C=function(t){return new I(function(n,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){200===this.status&&n(this.response)},r.onerror=function(){var t=this,n=function(){var t=new Error("No access to download image");return t.code=18,t.name="SecurityError",t},r=function(){return new Error("Error "+t.status+" downloading image")};e(0===this.status?n():r())},r.send()})},F=function(t){var n=t.split(","),e=/data:([^;]+)/.exec(n[0]);if(!e)return R.none();for(var r=e[1],o=n[1],i=1024,u=atob(o),a=u.length,c=Math.ceil(a/i),f=new Array(c),s=0;s<c;++s){for(var l=s*i,d=Math.min(l+i,a),m=new Array(d-l),h=l,g=0;h<d;++g,++h)m[g]=u[h].charCodeAt(0);f[s]=new Uint8Array(m)}return R.some(new Blob(f,{type:r}))},M=function(t){return new I(function(n,e){F(t).fold(function(){e("uri is not base64: "+t)},n)})},B=function(t,n,e){return n=n||"image/png",m(HTMLCanvasElement.prototype.toBlob)?new I(function(r,o){t.toBlob(function(t){t?r(t):o()},n,e)}):M(t.toDataURL(n,e))},N=function(t,n,e){return n=n||"image/png",t.toDataURL(n,e)},D=function(t){return k(t).then(function(t){z(t);var n=U(P(t),O(t)),e=j(n);return e.drawImage(t,0,0),n})},H=function(t){return new I(function(n){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(t)})},z=function(t){URL.revokeObjectURL(t.src)},q=function(t){return k(t)},W=function(t){return L(t)},$=Array.prototype.indexOf,V=function(t,n){return $.call(t,n)},G=function(t,n){return V(t,n)>-1},J=function(t,n){for(var e=0,r=t.length;e<r;e++){var o=t[e];n(o,e)}},K=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e},X=function(t,n,e){return J(t,function(t,r){e=n(e,t,r)}),e},Q=function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return R.some(i);if(e(i,r))break}return R.none()},Y=function(t,n){return Q(t,n,v)},Z=function(t,n){for(var e=0,r=t.length;e<r;++e){var o=t[e];if(!0!==n(o,e))return!1}return!0},tt=Object.keys,nt=function(t,n){for(var e=tt(t),r=0,o=e.length;r<o;r++){var i=e[r],u=t[i];n(u,i)}},et=function(t){if(!s(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],e={};return J(t,function(r,o){var i=tt(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=r[u];if(void 0!==e[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!s(a))throw new Error("case arguments must be an array");n.push(u),e[u]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i);var c=function(t){var r=tt(t);if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","));var o=Z(n,function(t){return G(r,t)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "));return t[u].apply(null,e)};return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(n.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+n.length);var i=n[o];return i.apply(null,e)},match:c,log:function(t){console.log(t,{constructors:n,constructor:u,params:e})}}}}),e},rt={generate:et};rt.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ot=function(t,n,e){var r=n.type,o=g(r),i=function(){return I.resolve(n)},u=g(e),a=function(){return e.split(",")[1]},c=function(n,e){return t.then(function(t){return B(t,n,e)})},f=function(n,e){return t.then(function(t){return N(t,n,e)})},s=function(t,n){return f(t,n).then(function(t){return t.split(",")[1]})},l=function(){return t.then(A)};return{getType:o,toBlob:i,toDataURL:u,toBase64:a,toAdjustedBlob:c,toAdjustedDataURL:f,toAdjustedBase64:s,toCanvas:l}},it=function(t){return H(t).then(function(n){return ot(D(t),t,n)})},ut=function(t,n){return B(t,n).then(function(n){return ot(I.resolve(t),n,t.toDataURL())})},at=function(t,n){void 0===n&&(n=2);var e=Math.pow(10,n),r=Math.round(t*e);return Math.ceil(r/e)},ct=function(t,n){return t.toCanvas().then(function(e){return ft(e,t.getType(),n)})},ft=function(t,n,e){var r=e<0?360+e:e,o=r*Math.PI/180,i=t.width,u=t.height,a=Math.sin(o),c=Math.cos(o),f=at(Math.abs(i*c)+Math.abs(u*a)),s=at(Math.abs(i*a)+Math.abs(u*c)),l=U(f,s),d=j(l);return d.translate(f/2,s/2),d.rotate(o),d.drawImage(t,-i/2,-u/2),ut(l,n)},st=function(t,n){return t.toCanvas().then(function(e){return lt(e,t.getType(),n)})},lt=function(t,n,e){var r=U(t.width,t.height),o=j(r);return"v"===e?(o.scale(1,-1),o.drawImage(t,0,-r.height)):(o.scale(-1,1),o.drawImage(t,-r.width,0)),ut(r,n)},dt=function(t,n){return st(t,n)},mt=function(t,n){return ct(t,n)},ht=function(t,n,e){return void 0===e&&(e=!1),new I(function(r){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&r({status:o.status,blob:o.response})},o.open("GET",t,!0),o.withCredentials=e,nt(n,function(t,n){o.setRequestHeader(n,t)}),o.responseType="blob",o.send()})},gt=function(t){return new I(function(n,e){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=function(t){e(t)},r.readAsText(t)})},pt=function(t){try{return R.some(JSON.parse(t))}catch(t){return R.none()}},vt=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],yt=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],wt=function(t,n){var e=X(n,function(t,n){return d(t)?t[n]:void 0},t);return R.from(e)},bt=function(t,n){return"application/json"===(null==n?void 0:n.type)&&(400===t||403===t||404===t||500===t)},_t=function(t){var n=Y(vt,function(n){return t===n.code}).fold(g("Unknown ImageProxy error"),function(t){return t.message});return"ImageProxy HTTP error: "+n},Et=function(t){var n=_t(t);return I.reject(n)},Rt=function(t){return Y(yt,function(n){return n.type===t}).fold(g("Unknown service error"),function(t){return t.message})},Tt=function(t){var n=pt(t),e=n.bind(function(t){return wt(t,["error","type"]).map(Rt)}).getOr("Invalid JSON in service error message");return"ImageProxy Service error: "+e},xt=function(t){return gt(t).then(function(t){var n=Tt(t);return I.reject(n)})},It=function(t,n){return bt(t,n)?xt(n):Et(t)},Ut=function(t,n){var e=-1===t.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(t)?t:t+e+"apiKey="+encodeURIComponent(n)},At=function(t){return t<200||t>=300},jt=function(t,n){var e={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":n};return ht(Ut(t,n),e).then(function(t){return At(t.status)?It(t.status,t.blob):I.resolve(t.blob)})},St=function(t,n){return ht(t,{},n).then(function(t){return At(t.status)?Et(t.status):I.resolve(t.blob)})},Pt=function(t,n,e){return void 0===e&&(e=!1),n?jt(t,n):St(t,e)},Ot=function(t){return it(t)},Lt=1,kt=function(t,n){var e=n||document,r=e.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Mt(r.childNodes[0])},Ct=function(t,n){var e=n||document,r=e.createElement(t);return Mt(r)},Ft=function(t,n){var e=n||document,r=e.createTextNode(t);return Mt(r)},Mt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Bt=function(t,n,e){return R.from(t.dom.elementFromPoint(n,e)).map(Mt)},Nt={fromHtml:kt,fromTag:Ct,fromText:Ft,fromDom:Mt,fromPoint:Bt},Dt=function(t,n){var e=t.dom;if(e.nodeType!==Lt)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var Ht=function(t,n){var e=function(t){return n(Nt.fromDom(t))},r=Y(t.dom.childNodes,e);return r.map(Nt.fromDom)},zt=function(t,n){return Ht(t,function(t){return Dt(t,n)})},qt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Wt=tinymce.util.Tools.resolve("tinymce.util.Promise"),$t=tinymce.util.Tools.resolve("tinymce.util.URI"),Vt=function(t){return t.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},Gt=function(t){return t.getParam("imagetools_proxy")},Jt=function(t){return t.getParam("imagetools_cors_hosts",[],"string[]")},Kt=function(t){return t.getParam("imagetools_credentials_hosts",[],"string[]")},Xt=function(t){return R.from(t.getParam("imagetools_fetch_image",null,"function"))},Qt=function(t){return t.getParam("api_key",t.getParam("imagetools_api_key","","string"),"string")},Yt=function(t){return t.getParam("images_upload_timeout",3e4,"number")},Zt=function(t){return t.getParam("images_reuse_filename",!1,"boolean")},tn=function(t){var n,e,r=function(t){return/^[0-9\.]+px$/.test(t)};return n=t.style.width,e=t.style.height,n||e?r(n)&&r(e)?{w:parseInt(n,10),h:parseInt(e,10)}:null:(n=t.width,e=t.height,n&&e?{w:parseInt(n,10),h:parseInt(e,10)}:null)},nn=function(t,n){var e,r;n&&(e=t.style.width,r=t.style.height,(e||r)&&(t.style.width=n.w+"px",t.style.height=n.h+"px",t.removeAttribute("data-mce-style")),e=t.width,r=t.height,(e||r)&&(t.setAttribute("width",String(n.w)),t.setAttribute("height",String(n.h))))},en=function(t){return{w:t.naturalWidth,h:t.naturalHeight}},rn=0,on=function(t){return zt(Nt.fromDom(t),"img")},un=function(t,n){return t.dom.is(n,"figure")},an=function(t,n){return t.dom.is(n,"img:not([data-mce-object],[data-mce-placeholder])")},cn=function(t,n){var e=function(n){return an(t,n)&&(mn(t,n)||hn(t,n)||d(Gt(t)))};return un(t,n)?on(n).bind(function(t){return e(t.dom)?R.some(t.dom):R.none()}):e(n)?R.some(n):R.none()},fn=function(t,n){t.notificationReceptionist.open({text:n,type:"error"})},sn=function(t){var n=t.selection.getNode(),e=t.dom.getParent(n,"figure.image");return null!==e&&un(t,e)?on(e):an(t,n)?R.some(Nt.fromDom(n)):R.none()},ln=function(t,n,e){var r=n.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i);return d(r)?t.dom.encode(r[e]):null},dn=function(){return"imagetools"+rn++},mn=function(t,n){var e=n.src;return 0===e.indexOf("data:")||0===e.indexOf("blob:")||new $t(e).host===t.documentBaseURI.host},hn=function(t,n){return-1!==u.inArray(Jt(t),new $t(n.src).host)},gn=function(t,n){return-1!==u.inArray(Kt(t),new $t(n.src).host)},pn=function(t,n){if(hn(t,n))return Pt(n.src,null,gn(t,n));if(!mn(t,n)){var e=Gt(t),r=e+(-1===e.indexOf("?")?"?":"&")+"url="+encodeURIComponent(n.src),o=Qt(t);return Pt(r,o,!1)}return W(n)},vn=function(t,n){return Xt(t).fold(function(){return pn(t,n)},function(t){return t(n)})},yn=function(t,n){var e=t.editorUpload.blobCache.getByUri(n.src);return e?Wt.resolve(e.blob()):vn(t,n)},wn=function(t,n){var e=qt.setEditorTimeout(t,function(){t.editorUpload.uploadImagesAuto()},Yt(t));n.set(e)},bn=function(t){qt.clearTimeout(t.get())},_n=function(t,n,e,r,o,i,u){return e.toBlob().then(function(a){var c,f,s,l,m=t.editorUpload.blobCache;c=i.src;var h=n.type===a.type;return Zt(t)&&(l=m.getByUri(c),d(l)?(c=l.uri(),f=l.name(),s=l.filename()):(f=ln(t,c,2),s=ln(t,c,1))),l=m.create({id:dn(),blob:a,base64:e.toBase64(),uri:c,name:f,filename:h?s:void 0}),m.add(l),t.undoReceptionist.transact(function(){var n=function(){t.$(i).off("load",n),t.nodeChanged(),r?t.editorUpload.uploadImagesAuto():(bn(o),wn(t,o))};t.$(i).on("load",n),u&&t.$(i).attr({width:u.w,height:u.h}),t.$(i).attr({src:l.blobUri()}).removeAttr("data-mce-src")}),l})},En=function(t,n,e,r){return function(){var o=sn(t);return o.fold(function(){fn(t,"Could not find selected image")},function(o){return t._scanForImages().then(function(){return yn(t,o.dom)}).then(function(i){return Ot(i).then(e).then(function(e){return _n(t,i,e,!1,n,o.dom,r)})}).catch(function(n){fn(t,n)})})}},Rn=function(t,n,e){return function(){var r=sn(t),o=r.map(function(t){var n=tn(t.dom);return n?{w:n.h,h:n.w}:null}).getOrNull();return En(t,n,function(t){return mt(t,e)},o)()}},Tn=function(t,n,e){return function(){return En(t,n,function(t){return dt(t,e)})()}},xn=function(t,n,e,r,o){return q(o).then(function(t){var n=en(t);return r.w===n.w&&r.h===n.h||tn(e)&&nn(e,n),URL.revokeObjectURL(t.src),o}).then(Ot).then(function(r){return _n(t,o,r,!0,n,e)})},In="save-state",Un="disable",An="enable",jn=function(t){return{blob:t,url:URL.createObjectURL(t)}},Sn=function(t,n){return function(){var e=function(e){return{title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:e}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(e){var i=e.getData().imagetools.blob;r.each(function(e){o.each(function(r){xn(t,n,e.dom,r,i)})}),e.close()},onCancel:h,onAction:function(t,n){switch(n.name){case In:n.value?t.enable("save"):t.disable("save");break;case Un:t.disable("save"),t.disable("cancel");break;case An:t.enable("cancel")}}}},r=sn(t),o=r.map(function(t){return en(t.dom)});r.each(function(n){cn(t,n.dom).each(function(r){yn(t,n.dom).then(function(n){var r=jn(n);t.windowReceptionist.open(e(r))})})})}},Pn=function(t,n){u.each({mceImageRotateLeft:Rn(t,n,-90),mceImageRotateRight:Rn(t,n,90),mceImageFlipVertical:Tn(t,n,"v"),mceImageFlipHorizontal:Tn(t,n,"h"),mceEditImage:Sn(t,n)},function(n,e){t.addCommand(e,n)})},On=function(t,n,e){t.on("NodeChange",function(r){var o=e.get(),i=cn(t,r.element);o&&!i.exists(function(t){return o.src===t.src})&&(bn(n),t.editorUpload.uploadImagesAuto(),e.set(null)),i.each(e.set)})},Ln=function(t){var n=[],e=function(n){return function(){return t.execCommand(n)}},r=function(){return sn(t).exists(function(n){return cn(t,n.dom).isSome()})},o=function(t){var e=function(n){return t.setDisabled(!n)};return e(r()),n=n.concat([e]),function(){n=K(n,function(t){return t!==e})}};t.on("NodeChange",function(){var t=r();J(n,function(n){return n(t)})}),t.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:e("mceImageRotateLeft"),onSetup:o}),t.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:e("mceImageRotateRight"),onSetup:o}),t.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:e("mceImageFlipVertical"),onSetup:o}),t.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:e("mceImageFlipHorizontal"),onSetup:o}),t.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:e("mceEditImage"),onSetup:o}),t.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:e("mceImage")}),t.ui.registry.addContextMenu("imagetools",{update:function(n){return cn(t,n).map(function(t){return{text:"Edit image",icon:"edit-image",onAction:e("mceEditImage")}}).toArray()}})},kn=function(t){t.ui.registry.addContextToolbar("imagetools",{items:Vt(t),predicate:function(n){return cn(t,n).isSome()},position:"node",scope:"node"})};t()})();