(function(){"use strict";function n(){o.add("advlist",function(n){n.hasPlugin("lists")?(k(n),u(n)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}var t,e,r,o=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),i=function(n,t,e){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";n.execCommand(r,!1,!1===e?null:{"list-style-type":e})},u=function(n){n.addCommand("ApplyUnorderedListStyle",function(t,e){i(n,"UL",e["list-style-type"])}),n.addCommand("ApplyOrderedListStyle",function(t,e){i(n,"OL",e["list-style-type"])})},l=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=function(n){var t=n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},s=function(n){var t=n.getParam("advlist_bullet_styles","default,circle,square");return t?t.split(/[ ,]/):[]},f=function(){},a=function(n){return function(){return n}},d=function(n){return n},m=a(!1),p=a(!0),g=function(){return y},y=(t=function(n){return n()},e=d,r={fold:function(n,t){return n()},isSome:m,isNone:p,getOr:e,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:e,orThunk:t,map:g,each:f,bind:g,exists:m,forall:p,filter:function(){return g()},toArray:function(){return[]},toString:a("none()")},r),v=function(n){var t=a(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:p,isNone:m,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return v(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:y},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},h=function(n){return null==n?y:v(n)},O={some:v,none:g,from:h},L=function(n,t){return n.$.contains(n.getBody(),t)},N=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},S=function(n){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&L(n,t)}},T=function(n){var t=n.dom.getParent(n.selection.getNode(),"ol,ul"),e=n.dom.getStyle(t,"listStyleType");return O.from(e)},U=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(t(r))return e}return-1},A=function(n){return n.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()})},b=function(n,t,e){var r=U(t.parents,N),o=-1!==r?t.parents.slice(0,r):t.parents,i=l.grep(o,S(n));return i.length>0&&i[0].nodeName===e},w=function(n,t){return function(e){var r=function(r){e.setActive(b(n,r,t))};return n.on("NodeChange",r),function(){return n.off("NodeChange",r)}}},C=function(n,t,e,r,o,u){n.ui.registry.addSplitButton(t,{tooltip:e,icon:"OL"===o?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(n){var t=l.map(u,function(n){var t="OL"===o?"num":"bull",e="disc"===n||"decimal"===n?"default":n,r="default"===n?"":n,i=A(n);return{type:"choiceitem",value:r,icon:"list-"+t+"-"+e,text:i}});n(t)},onAction:function(){return n.execCommand(r)},onItemAction:function(t,e){i(n,o,e)},select:function(t){var e=T(n);return e.map(function(n){return t===n}).getOr(!1)},onSetup:w(n,o)})},x=function(n,t,e,r,o,i){n.ui.registry.addToggleButton(t,{active:!1,tooltip:e,icon:"OL"===o?"ordered-list":"unordered-list",onSetup:w(n,o),onAction:function(){return n.execCommand(r)}})},P=function(n,t,e,r,o,i){i.length>1?C(n,t,e,r,o,i):x(n,t,e,r,o)},k=function(n){P(n,"numlist","Numbered list","InsertOrderedList","OL",c(n)),P(n,"bullist","Bullet list","InsertUnorderedList","UL",s(n))};n()})();