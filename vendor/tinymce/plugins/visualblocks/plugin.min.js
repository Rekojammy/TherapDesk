(function(){"use strict";function t(){n.add("visualblocks",function(t,n){var e=o(!1);u(t,n,e),a(t,e),s(t,n,e)})}var o=function(t){var o=t,n=function(){return o},e=function(t){o=t};return{get:n,set:e}},n=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),e=function(t,o){t.fire("VisualBlocks",{state:o})},i=function(t,o,n){var i=t.dom;i.toggleClass(t.getBody(),"mce-visualblocks"),n.set(!n.get()),e(t,n.get())},u=function(t,o,n){t.addCommand("mceVisualBlocks",function(){i(t,o,n)})},c=function(t){return t.getParam("visualblocks_default_state",!1,"boolean")},s=function(t,o,n){t.on("PreviewFormats AfterPreviewFormats",function(o){n.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===o.type)}),t.on("init",function(){c(t)&&i(t,o,n)})},l=function(t,o){return function(n){n.setActive(o.get());var e=function(t){return n.setActive(t.state)};return t.on("VisualBlocks",e),function(){return t.off("VisualBlocks",e)}}},a=function(t,o){var n=function(){return t.execCommand("mceVisualBlocks")};t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:n,onSetup:l(t,o)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:n,onSetup:l(t,o)})};t()})();