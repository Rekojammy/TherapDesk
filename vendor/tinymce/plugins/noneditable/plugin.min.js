(function(){"use strict";function t(){n.add("noneditable",function(t){u(t)})}var n=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(t){return t.getParam("noneditable_noneditable_class","mceNonEditable")},a=function(t){return t.getParam("noneditable_editable_class","mceEditable")},i=function(t){var n=t.getParam("noneditable_regexp",[]);return n&&n.constructor===RegExp?[n]:n},o=function(t){return function(n){return-1!==(" "+n.attr("class")+" ").indexOf(t)}},c=function(t,n,e){return function(r){var a=arguments,i=a[a.length-2],o=i>0?n.charAt(i-1):"";if('"'===o)return r;if(">"===o){var c=n.lastIndexOf("<",i);if(-1!==c){var l=n.substring(c,i);if(-1!==l.indexOf('contenteditable="false"'))return r}}return'<span class="'+e+'" data-mce-content="'+t.dom.encode(a[0])+'">'+t.dom.encode("string"==typeof a[1]?a[1]:a[0])+"</span>"}},l=function(t,n,e){var a=n.length,i=e.content;if("raw"!==e.format){for(;a--;)i=i.replace(n[a],c(t,i,r(t)));e.content=i}},u=function(t){var n="contenteditable",c=" "+e.trim(a(t))+" ",u=" "+e.trim(r(t))+" ",f=o(c),s=o(u),d=i(t);t.on("PreInit",function(){d.length>0&&t.on("BeforeSetContent",function(n){l(t,d,n)}),t.parser.addAttributeFilter("class",function(t){for(var e,r=t.length;r--;)e=t[r],f(e)?e.attr(n,"true"):s(e)&&e.attr(n,"false")}),t.serializer.addAttributeFilter(n,function(t){for(var e,r=t.length;r--;)e=t[r],(f(e)||s(e))&&(d.length>0&&e.attr("data-mce-content")?(e.name="#text",e.type=3,e.raw=!0,e.value=e.attr("data-mce-content")):e.attr(n,null))})})};t()})();