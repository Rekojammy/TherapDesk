(function(){"use strict";function n(){e.add("nonbreaking",function(n){u(n),f(n),s(n)})}var e=tinymce.util.Tools.resolve("tinymce.PluginReceptionist"),t=function(n){var e=n.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},i=function(n){return n.getParam("nonbreaking_wrap",!0,"boolean")},o=function(n,e){for(var t="",i=0;i<e;i++)t+=n;return t},r=function(n){return!!n.plugins.visualchars&&n.plugins.visualchars.isEnabled()},a=function(n,e){var t=function(){return r(n)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"},a=function(){return'<span class="'+t()+'" contenteditable="false">'+o("&nbsp;",e)+"</span>"},u=i(n),c=u||n.plugins.visualchars?a():o("&nbsp;",e);n.undoReceptionist.transact(function(){return n.insertContent(c)})},u=function(n){n.addCommand("mceNonBreaking",function(){a(n,1)})},c=tinymce.util.Tools.resolve("tinymce.util.VK"),s=function(n){var e=t(n);e>0&&n.on("keydown",function(t){if(t.keyCode===c.TAB&&!t.isDefaultPrevented()){if(t.shiftKey)return;t.preventDefault(),t.stopImmediatePropagation(),a(n,e)}})},f=function(n){var e=function(){return n.execCommand("mceNonBreaking")};n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:e}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:e})};n()})();